## Feature Description
This API is used by the app admin to batch obtain the roles of users in a group.

## API Invocation Description
### Applicable group types

| Group Type | Support This RESTful API |
|-----------|------------|
| Private group (Private) | Yes |
| Public group (Public) | Yes |
| Chatroom (ChatRoom) | Yes |
| AVChatRoom | No (see description below) |
| BChatRoom | No (see description below) |

Instant Messaging (IM) provides the preceding five built-in group types. For details, see [Group Systems](https://intl.cloud.tencent.com/document/product/1047/33529).

>
>- AVChatRoom groups do not support querying the roles of users in a group through this RESTful API. If you perform this operation in such a group, error 10007 returns. To query the roles of users, the admin can invoke the [obtaining group member details](/doc/product/269/obtaining group member details) API.
>- No admin or group owner can be configured for BChatRoom groups, and all members in such groups are common members. Therefore, this RESTful API cannot be used to query the roles of users in such groups.

### Request URL example
```
https://console.tim.qq.com/v4/group_open_http_svc/get_role_in_group?sdkappid=88888888&identifier=admin&usersig=xxx&random=99999999&contenttype=json
```
### Request parameters

The following table lists and describes only the parameters to be modified when this API is invoked. For details on other parameters, see [RESTful API Overview](https://intl.cloud.tencent.com/document/product/1047/34620).

| Parameter | Description |
| ------------------ | ------------------------------------ |
| v4/group_open_http_svc/get_role_in_group | The request API. |
| sdkappid | The SDKAppID assigned by the IM console when an app is created. |
| identifier | This must be the app admin account. For details, see [App Admins](https://intl.cloud.tencent.com/document/product/1047/33517#app-.E7.AE.A1.E7.90.86.E5.91.98). |
| usersig | The signature generated by the app admin account. For details, see [Generating UserSig](https://intl.cloud.tencent.com/document/product/1047/34385). |
| random | Enter a random 32-bit unsigned integer ranging from 0 to 4294967295. |

### Maximum invocation frequency

The maximum invocation frequency is 200 times per second.

### Request packet example

Obtains the list of groups that a user has joined. The group information includes the group ID and the IDs of group members whose roles are to be queried.
```
{
    "GroupId": "@TGS#2C5SZEAEF",
    "User_Account": [ // Up to 500 accounts are supported
        "leckie",
        "peter",
        "wesley"
    ]
}
```

### Request packet fields

| Field | Type | Attribute | Description |
|---------|---------|---------|---------|
| GroupId | String | Required | The ID of the group to be queried. |
| User_Account | Array | Required | User accounts to be queries. Up to 500 accounts are supported. |

### Response packet example

```
{
    "ActionStatus": "OK",
    "ErrorInfo": "",
    "ErrorCode": 0,
    "UserIdList": [ //Result
        {
            "Member_Account": "leckie",
            "Role": "Owner" // Role: Owner, Admin, Member, or NotMember
        },
        {
            "Member_Account": "peter",
            "Role": "Member"
        },
        {
            "Member_Account": "wesley",
            "Role": "NotMember"
        }
    ]
}
```

### Response packet fields

| Field | Type | Description |
|---------|---------|---------|
| ActionStatus | String | The request processing result. OK: succeeded. FAIL: failed. |
| ErrorCode | Integer | The error code. 0: succeeded. Others: failed. |
| ErrorInfo | String | Error information. |
| UserIdList | Array | The role information of pulled members in the group. Possible roles are `Owner, Admin, Member, and NotMember`. |

## Error Codes

Unless a network error (such as error 502) occurs, the HTTP return code of this API is always 200. ErrorCode and ErrorInfo in the response packet represent the actual error code and error information, respectively.
For common error codes (60000 to 79999), see [Error Codes](https://intl.cloud.tencent.com/document/product/1047/34348).
The following table describes the error codes specific to this API.

| Error Code | Description |
|---------|---------|
| 10002 | An internal server error occurred. In this case, try again. |
| 10003 | A request command keyword is invalid. |
| 10004 | A request parameter is invalid. In this case, check whether request parameters are correct based on the error description. |
| 10007 | Operation permissions are insufficient. For example, an ordinary member in a public group attempts to remove a member from the group, but only the app admin has the permission to do so. |
| 10010 | The group does not exist or has been dismissed. |
| 10015 | Failed to parse the JSON request packet. In this case, check whether the request packet meets JSON specifications. |

## API Commissioning Tool

Use the [RESTful online commissioning tool for APIs](https://avc.cloud.tencent.com/im/APITester/APITester.html#group_open_http_svc/get_role_in_group) to commission this API.

## References
Obtaining the list of groups a user has joined ([v4/group_open_http_svc/get_joined_group_list](https://intl.cloud.tencent.com/document/product/1047/34925))
