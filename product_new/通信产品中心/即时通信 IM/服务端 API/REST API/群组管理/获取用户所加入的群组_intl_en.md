## Feature Description
The app admin can use this API to obtain information about public groups, chatrooms, and activated private groups that a user has joined. By default, information about inactivate private groups, AVChatRoom groups, and BChatRoom groups that the user has joined is not obtained.

## API Invocation Description
### Applicable group types

| Group Type | Support This RESTful API |
|-----------|------------|
| Private | Yes, but only information about activated private groups is obtained by default |
| Public | Yes |
| ChatRoom | Yes |
| AVChatRoom | Yes, but information about AVChatRoom groups is not returned by default |
| BChatRoom | Yes, but information about BChatRoom groups is not returned by default |

Instant Messaging (IM) provides the preceding five built-in group types. For details, see [Group Systems](https://intl.cloud.tencent.com/document/product/1047/33529).


### Request URL example
```
https://console.tim.qq.com/v4/group_open_http_svc/get_joined_group_list?sdkappid=88888888&identifier=admin&usersig=xxx&random=99999999&contenttype=json
```
### Request parameters

The following table lists only the parameters to be modified when this API is called. For details on other parameters, see [RESTful API Overview](https://intl.cloud.tencent.com/document/product/1047/34620).

| Parameter | Description |
| ------------------ | ------------------------------------ |
| v4/group_open_http_svc/get_joined_group_list | The request API. |
| sdkappid | The SDKAppID assigned by the IM console when an app is created. |
| identifier | This must be the app admin account. For details, see [App Admins](https://intl.cloud.tencent.com/document/product/1047/33517#app-.E7.AE.A1.E7.90.86.E5.91.98). |
| usersig | The signature generated by the app admin account. For details, see [Generating UserSig](https://intl.cloud.tencent.com/document/product/1047/34385). |
| random | Enter a random 32-bit unsigned integer ranging from 0 to 4294967295. |


### Maximum calling frequency

The maximum calling frequency is 200 times per second.

### Request packet examples

- **Basic form**
Obtains the information about groups that a user has joined. The group information only contains the IDs of users in the groups.
```
{
    "Member_Account": "leckie"
}
```
- **Pulling by page**
You can use the Limit and Offset fields to control pagination pulling:
 - The Limit field specifies the maximum number of groups in GroupIdList in the response packet, which cannot exceed 5,000.
 - The Offset field specifies the sequence number of the starting group for information reading in the group list. Its default value is 0. For a pagination request (the page number starts from 1), the Offset value of each page is calculated as follows: `(Page number – 1) × Number of groups displayed on each page`.
For example, if pagination pulling is requested and 20 group members are displayed on each page, request parameters for the first page are `{"Limit": 20, "Offset": 0}`, whereas those for the second page are `{"Limit": 20, "Offset": 20}`, and so on.

 The value of Limit or Offset does not affect TotalCount in the response packet. 
```
{
    "Member_Account": "leckie",
    "Limit": 10, // Specifies the number of groups to be pulled. If this field is not specified, all groups will be pulled.
    "Offset": 0 // Specifies the sequence number of the starting group whose information to be pulled.
}
```
- **Specifying the group type**
You can specify the type of groups to be pulled, such as Public, Private, or ChatRoom. If the group type is AVChatRoom, the obtained members may be incomplete.
```
{
    "Member_Account": "leckie",
    "GroupType": "Public" // Specifies the type of groups to be pulled. If this parameter is not specified, all groups will be pulled.
}
```
- **Pulling a specified information**
To specify basic information fields that you want to pull, set GroupBaseInfoFilter.
To specify the self information of group members that needs to be pulled, set SelfInfoFilter.

```
{
    "Member_Account": "leckie",
    "WithHugeGroups":1, // Supports pulling information about AVChatRoom and BChatRoom groups.
    "WithNoActiveGroups":1,// Supports pulling information about inactive private groups that the user has joined.
    "ResponseFilter": {
        "GroupBaseInfoFilter": [ // Specifies basic information fields to be pulled.
            "Type",
            "Name",
            "Introduction",
            "Notification",
            "FaceUrl",
            "CreateTime",
            "Owner_Account",
            "LastInfoTime",
            "LastMsgTime",
            "NextMsgSeq",
            "MemberNum",
            "MaxMemberNum",
            "ApplyJoinOption",
            "ShutUpAllMember"
        ],
        "SelfInfoFilter": [ // Specifies the self information in the group.
            "Role", // Role in the group
            "JoinTime", // Joining time of the member
            "MsgFlag", // Type of messages to be blocked
            "UnreadMsgNum" // Number of unread messages, which is calculated by the IM backend
        ]
    }
}
```
- **ALL IN ONE**
```
{
    "Member_Account": "leckie",
    "Limit": 10, // Specifies the number of groups to be pulled. If this field is not specified, all groups will be pulled.
    "Offset": 0, // Specifies the sequence number of the starting group whose information to be pulled.
    "GroupType": "Public" // Specifies the type of groups to be pulled. If this parameter is not specified, all groups will be pulled.
    "ResponseFilter": {
        "GroupBaseInfoFilter": [ // Specifies the basic information fields to be pulled. For details, see "Basic Information Fields".
            "Type",
            "Name",
            "Introduction",
            "Notification",
            "FaceUrl",
            "CreateTime",
            "Owner_Account",
            "LastInfoTime",
            "LastMsgTime",
            "NextMsgSeq",
            "MemberNum",
            "MaxMemberNum",
            "ApplyJoinOption",
            "ShutUpAllMember"
        ],
        "SelfInfoFilter": [ // Specifies the self information in the group.
            "Role", // Role in the group
            "JoinTime", // Joining time of the member
            "MsgFlag", // Type of messages to be blocked
            "UnreadMsgNum" // Number of unread messages, which is calculated by the IM backend
        ]
    }
}
```

### Request packet fields

| Field | Type | Attribute | Description |
|---------|---------|---------|---------|
| Member_Account | String | Required | The user account to be queried. |
| WithHugeGroups | Integer | Optional | Specifies whether to obtain information about AVChatRoom and BChatRoom groups that the user has joined. 0: no. 1: yes. The default value is 0. |
| WithNoActiveGroups | Integer | Optional | Specifies whether to obtain information about inactive private groups that the user has joined. 0: no. 1: yes. The default value is 0. |
| Limit | Integer | Optional | The number of groups pulled at a time. If this field is not specified, all groups will be pulled. The paging mode is the same as that for [obtaining all groups in the app](https://intl.cloud.tencent.com/document/product/1047/34960). |
| Offset | Integer | Optional | The sequence number of the starting group whose information to be pulled. The paging mode is the same as that for [obtaining all groups in the app](https://intl.cloud.tencent.com/document/product/1047/34960). |
| GroupType | String | Optional | The type of groups to be pulled. Possible values are Private, Public, ChatRoom, and AVChatRoom. If this field is not specified, all groups will be pulled. |
| ResponseFilter | Object | Optional | This includes two filters: GroupBaseInfoFilter and SelfInfoFilter. GroupBaseInfoFilter specifies basic information fields to be pulled. For details, see [Group Systems](https://intl.cloud.tencent.com/document/product/1047/33529). SelfInfoFilter specifies the self information of the user to be pulled in each group. For details, see [Group Systems](https://intl.cloud.tencent.com/document/product/1047/33529). |

### Response packet examples
- **Basic form and pagination pulling**
```
{
    "ActionStatus": "OK",
    "ErrorInfo": "",
    "ErrorCode": 0,
    "TotalCount": 2, // The value is the total number of groups that meet the conditions, regardless of the Limit and Offset values.
    "GroupIdList": [
        {
            "GroupId": "@TGS#2J4SZEAEL"
        },
        {
            "GroupId": "@TGS#2C5SZEAEF"
        }
    ]
}
```
- **Specifying the group type**
```
{
    "ActionStatus": "OK",
    "ErrorInfo": "",
    "ErrorCode": 0,
    "TotalCount": 1,
    "GroupIdList": [
        {
            "GroupId": "@TGS#2J4SZEAEL"
        }
    ]
}
```
- **Pulling a specified information**
```
{
    "ActionStatus": "OK",
    "ErrorInfo": "",
    "ErrorCode": 0,
    "TotalCount": 2,
    "GroupIdList": [
        {
            "GroupId": "@TGS#2J4SZEAEL",
            "Type": "Public",
            "LastMsgTime": 1425976500,
            "MemberCount": 48,
            "ShutUpAllMember": "On",
            "SelfInfo": {
                "Role": "Owner",
                "MsgFlag": "AcceptAndNotify",
                "UnreadMsgNum": 1
            }
        },
        {
            "GroupId": "@TGS#2C5SZEAEF",
            "Type": "ChatRoom",
            "LastMsgTime": 1425976567,
            "MemberCount": 120,
            "ShutUpAllMember": "Off",
            "SelfInfo": {
                "Role": "Member",
                "MsgFlag": "AcceptAndNotify",
                "UnreadMsgNum": 0
            }
        }
    ]
}
```
- **ALL IN ONE**
```
{
    "ActionStatus": "OK",
    "ErrorInfo": "",
    "ErrorCode": 0,
    "TotalCount": 1, // The value is the total number of groups that meet the conditions, regardless of the Limit and Offset values.
    "GroupIdList": [
        {
            "GroupId": "@TGS#2J4SZEAEL",
            "Type": "Public",
            "LastMsgTime": 1425976500,
            "MemberCount": 48,
            "SelfInfo": {
                "Role": "Owner",
                "MsgFlag": "AcceptAndNotify",
                "UnreadMsgNum": 1
            }
        }
    ]
}
```


### Response packet fields

| Field | Type | Description |
|---------|---------|---------|
| ActionStatus | String | The request processing result. OK: succeeded. FAIL: failed. |
| ErrorCode | Integer | The error code. 0: succeeded. Other values: failed. |
| ErrorInfo | String | Error information. |
| TotalCount | Integer | The number of groups that the user has joined. |
| GroupIdList | Array | The group information that has been pulled. The returned result is the resulting information of the filter. |

## Error Codes
Unless a network error (such as error 502) occurs, the HTTP return code for this API is always 200. ErrorCode and ErrorInfo in the response packet represent the actual error code and error information, respectively.
For common error codes (60000 to 79999), see [Error Codes](https://intl.cloud.tencent.com/document/product/1047/34348).
The following table describes the error codes specific to this API.

| Error Code | Description |
|---------|---------|
| 10002 | A system error occurred. To correct it, try again or contact our technical customer service. |
| 10003 | The request command is invalid. To correct it, try again or contact our technical customer service. |
| 10004 | A parameter is invalid. To correct it, based on the ErrorInfo field in the response packet, check whether the required fields have been specified, or whether these fields meet protocol requirements. |
| 10018 | The response packet length exceeds the maximum packet length (1 MB) because the requested content is excessive. To correct it, reduce the amount of data requested at a time. |

## API Commissioning Tool

Use the [online commissioning tool for RESTful APIs](https://avc.cloud.tencent.com/im/APITester/APITester.html#v4/group_open_http_svc/get_joined_group_list) to commission this API.

## References
Obtaining all groups in an app ([v4/group_open_http_svc/get_appid_group_list](https://intl.cloud.tencent.com/document/product/1047/34960))
