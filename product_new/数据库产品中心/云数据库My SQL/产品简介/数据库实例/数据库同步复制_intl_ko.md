데이터베이스 인스턴스 복제는 서버를 통해 1개 혹은 멀티 백업 데이터베이스를 설정하여 데이터를 동기화하는 방식으로, MySQL의 데이터를 멀티 시스템에 분포합니다. TencentDB for MySQL는 3종 데이터 복제 방식을 지원합니다.

>
>- Master는 마스터 데이터베이스 인스턴스를 의미합니다. Salve는 백업 데이터베이스 인스턴스를 의미합니다.
>- MySQL 5.6, 5.7 버전은 비동기화, 반동기화, 강제 동기화 등 3종 복제 방식을 지원합니다. 5.5버전은 비동기화를 지원합니다.

### 비동기화 복제
애플리케이션이 데이터 업데이트(insert, update, delete 조작 포함) 요청을 보내면, Master는 업데이트 완료 시, 바로 애플리케이션에 리턴하여 응답하며, Master는 다시 Slave에 데이터를 복제합니다.

데이터를 업데이트할 때 Master는 Slave의 응답을 대기하지 않아도 되므로, 비동기화로 복제된 데이터베이스 인스턴스는 일반적으로 성능이 뛰어난 편입니다. 또한  Slave를 사용할수 없을 경우에도 Master가 외부에 서비스를 제공하는데 영향을 미치지 않습니다. 다만 데이터를 Slave에 실시간 동기화하는것이 아니며, Master는 Slave에 딜레이가 있을 경우 고장이 생기므로 작은 확률로 데이터가 불일치할 수 있습니다.
TencentDB for MySQL 비동기화 복제는 1 마스터 1 슬레이브의 아키텍처를 적용합니다.

### 반동기화 복제
애플리케이션이 데이터 업데이트(insert, update, delete 조작 포함) 요청을 보내면, Master는 업데이트를 완료 시 바로 Slave에 데이터를 복제합니다. Slave는 **데이터를 받아 relay log(실행하지 않습니다)에 write하면** Master는 반드시 Slave의 성공 메시지를 받아야만 애플리케이션에 리턴하여 피드백할 수 있습니다. 

데이터 복제 시에만 이상(Slave 노드를 사용 불가 혹은 데이터 복제에 사용한 네트워크에 이상이 생길 경우)이 생길 경우, Master는 애플리케이션에 대한 피드백 일시 정지(MySQL는 기본 10초 정도)하며, 복제 모드를 비동기화 복제로 하향 조정합니다. 데이터 복제를 정상 복구하면 반동기화 복제로 복구합니다.
TencentDB for MySQL 반동기화 복제는 1 마스터 1 슬레이어 아키텍처를 적용합니다.

### 강제 동기화 복제
애플리케이션이 데이터 업데이트(insert, update, delete 조작 포함) 요청을 보내면 Master는 업데이트를 완료 시에 바로 Slave에 데이터를 복제합니다. Slave는 **데이터를 받아 실행 완료** 후에야 Master에 성공 메시지를 리턴합니다. Master는 반드시 Slave의 성공 메시지를 받아야만 애플리케이션에 리턴하여 피드백합니다. 

Master는 Slave에 데이터를 복제할 때 동기화로 진행하며, Master를 업데이트할 때마다 동기로 Slave도 성공적으로 실행되도록 확보해야 합니다. 관련하여 강제 동기화 복제는 마스터/슬레이브 데이터가 일치성을 확보합니다. 하오나 매번 Master 업데이트 요청은 Slave의 리턴을 기반으로 적용하므로, Slave가 1대일 경우 Master의 조작에 큰 영향을 미칩니다. 

TencentDB for MySQL 강제 동기화 복제는 1 마스터 2 슬레이브의 아키텍처를 적용합니다. 그중 Slave 1대만 성공적으로 실행하면 리턴할 수 있으며, 낱개 Slave를 사용 불가할 경우 Master 조작에 영향을 미치지 않습니다. 관련하여 강제 동기화로 클러스터를 복제하는 가용성을 업그레이드하였습니다.
