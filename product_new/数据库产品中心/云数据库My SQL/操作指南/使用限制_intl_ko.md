## 제한 설명

### 데이터량 제한
리소스의 한정성으로 사용자간 성능 영향을 차단하기 위해 TencentDB for MySQL는 다양한 타입의 MySQL 인스턴스 데이터량을 제한하였습니다.

**빅 데이터량 테이블**: 낱개 테이블의 데이터량이 지나치게 클 경우, MySQL에서 낱개 테이블의 리소스를 관리하는 요금(데이터, 인덱스 등)이 변경됩니다. 이는 직접 테이블의 프로세싱 효율에 영향을 미칩니다. 예를 들면 서비스 테이블(InnoDB)의 데이터량은 5GB를 달성하면 업데이트 시 딜레이가 뚜렷이 추가되므로 직접 서비스의 대응시간에 영향을 미칩니다. 심할 경우 마이그레이션, 테이블 샤딩으로 해결해야 합니다.

**빅 데이터량 인스턴스**: 클라우드 데이터베이스의 기본 저장 엔진은 InnoDB입니다. 인스턴스의 데이터 및 인덱스 페이지는 InnoDB의 cache, buffer에 의해 캐시될 경우, MySQL 인스턴스는 대규모 동시 발생 액세스를 지원합니다. 혹 인스턴스의 데이터가 지나치게 클 경우  cache buffer는 데이터를 잦게 스와이프 인/아웃하며 MySQL 병목은 곧 IO에 전이되어 액세스 처리량이 대폭 줄어듭니다(예를 들면, 모 클라우드 데이터베이스 인스턴스는 8000회 액세스할 수 있고, 데이터량이 cache, buffer 사이즈의 두배일 경우 초당 700회만 액세스할 수 있습니다)

>낱개 인스턴스의 테이블 수량은 100만을 초과 시에 백업, 모니터링, 업그레이드에 실패할 수 있습니다. 또한 데이터베이스 모니터링에도 영향을 미칠 수 있으므로 테이블 수량을 합리하게 적용해주시고, 낱개 인스턴스 테이블의 수량은 100만 미만으로 제어해주시기 바랍니다.

### 연결수 제한
MySQL의 연결수 상한은 MySQL의 시스템 변량 max_connections입니다. MySQL 인스턴스 연결수가 max_connections를 초과 시에 신규 연결을 생성할 수 없습니다.
클라우드 데이터베이스 대규모 기본값은 3000이며, 기타 스펙은 800입니다. 사용자는 니즈별로 스스로 max_connections 값을 수정할 수 있습니다. 다만, 연결수가 많아지면 시스템 리소스를 많이 소모합니다. 혹 연결수가 실제 시스템의 로드 수용 범위를 초과할 경우, 시스템의 서비스 퀄리티에 영향을 미칩니다. 
max_connections 관련 사항은 [MySQL 공식 파일](https://dev.mysql.com/doc/)을 참조하십시오.

## 클라우드 데이터베이스를 연결하는 MySQL 클라이언트 버전 제한
CVM 시스템에 적용된 MySQL 클라이언트와 lib 라이브러리를 사용하여 클라우드 데이터베이스 인스턴스를 연결하시기 바랍니다.

### 슬로우 쿼리 설명
- Linux CVM을 사용하는 개발자의 경우, 클라우드 데이터베이스 출력 툴을 이용하여 슬로우 쿼리 로그를 획득할 수 있습니다. 상세내역은 [백업 파일과 로그 다운로드](https://intl.cloud.tencent.com/document/product/236/7274).를 참조하십시오.
- Windows CVM을 사용하는 개발자의 경우, 슬로우 쿼리 로그를 직접 읽어올 수 없습니다. 필요하실 경우 [티켓 제출](https://console.cloud.tencent.com/workorder/category)하여 연락주시면 슬로우 쿼리와 로그 파일을 드립니다.

### 클라우드 데이터베이스의 binlog 저장시간 설명
TencentDB for MySQL binlog 로그 파일은 7일-732일 보류하며, 기본적으로 7일 보류합니다(자동 백업에서 일수를 설정할 수 있습니다). 로그 백업 일수는 반드시 데이터 백업 일수보다 같거나 작아야 합니다. 
binlog를 너무 오래 보류하거나 지나치게 빨리 증가할 경우, 백업 공간이 커집니다. 시스템이 증정한 공간을 초과할 경우 요금이 부과될 수 있습니다.(현재 초과된 백업 공간은 여전히 무료로 사용할 수 있으며, 요금 부과 시간과 모드는 향후 별도로 공지드릴 예정입니다)


### 캐릭터셋 설명

클라우드 데이터베이스의 기본적인 캐릭터셋 코딩 포멧은  MySQL 데이터베이스와 같이 latin1로 적용합니다. 즉 ISO-8859-1 코딩 포멧을 적용합니다.
클라우드 데이터베이스는 기본적으로 캐릭터셋 코딩을 설정합니다만, 테이블을 생성 시에 지정 테이블의 코딩을 명시해주시고, 연결 시에 연결 코딩을 지정해주시기 바랍니다. 이때 애플리케이션을 보다 원활히 포팅할 수 있습니다.
MySQL 캐릭터셋 관련 리소스는 MySQL 공식 매뉴얼을 참조해주세요.

하기 방법으로 클라우드 데이터베이스 캐릭터셋을 수정할 수 있습니다. 
1. 다음 문구를 실행하면 클라우드 데이터베이스 인스턴스의 기본 캐릭터셋 코딩을 수정합니다. 
```
SET @@global.character_set_client = utf8;
SET @@global.character_set_results = utf8;
SET @@global.character_set_connection = utf8;
SET @@global.character_set_server = utf8;
```
그중 @@global.character_set_server는 10분 전후로 로컬 파일에 스스로 동기화하여 지구화(기타 3개 변량은 로컬 파일에 동기화하지 않습니다)합니다. 마이그레이션 혹은 재기동 시에 설정한 값을 유지합니다. 
2. 다음 문구를 실행하면 기존에 연결한 캐릭터셋 코딩을 수정할 수 있습니다.
```
SET @@session.character_set_client = utf8;
SET @@session.character_set_results = utf8;
SET @@session.character_set_connection = utf8;
```
혹은
```
SET names utf8;
```
3. PHP 프로그램의 경우, 다음 함수를 통해 기존에 연결한 캐릭터셋 코딩을 설정할 수 있습니다.
```
bool mysqli::set_charset(string charset);
```
혹은
```
bool mysqli_set_charset(mysqli link, string charset);
```
4. Java 프로그램의 경우, 다음 방법으로 기존에 연결한 캐릭터셋 코딩을 설정할 수 있습니다.
```
jdbc:mysql://localhost:3306/dbname?useUnicode=true&characterEncoding=UTF-8
```

### 조작 제한
1. MySQL 인스턴스 기존 계정의 정보와 권한을 수정하지 말아주세요. 수정 시 일부 클러스터 서비스가 적용되지 않을 수 있습니다.
2. 라이브러리와 테이블을 생성 시에 일괄 InnoDB 엔진을 사용하시기를 권장드립니다. 해당 엔진을 사용하면 인스턴스는 더 뛰어난 성능으로 액세스할 수 있습니다. 
3. master-slave 관계를 수정하거나 종료하지 말아주세요. 이 조작으로 핫 백업이 적용되지 않을 수 있습니다. 

### 데이터베이스 테이블명 제한
테이블명은 중국어로 적용할 수 없으며, 테이블을 생성 시에 잘 확인해주시기 바랍니다. 중국어 테이블명은 롤백하거나 업그레이드 프로세스 실패를 야기할 수 있습니다.

## 주의사항
### 데이터베이스 계정 권한
TencentDB for MySQL는 더이상 사용자에게 인스턴스 super user권한을 제공하지 않습니다. super user 권한으로만 수정 가능한 파라미터는 콘솔 파라미터 설정 기능과 티켓을 제출하는 등 2종 모드로 수정합니다. 참고로 일부 파라미터는 수정할 수 없습니다. 

### 데이터베이스 엔진
성능, 보안을 감안하면 가급적 InnoDB 스토리지 엔진을 적용할것을 권장드립니다. MySQL 5.6이상 버전부터 더이상 MyISAM 엔진을 지원하지 않습니다.

### 네트워크 선택
-VPC와 기본 네트워크의 대조 사항은 [VPC 소개](/doc/product/215#2.-.E7.A7.81.E6.9C.89.E7.BD.91.E7.BB.9C.E4.B8.8E.E5.9F.BA.E7.A1.80.E7.BD.91.E7.BB.9C)를 참조하십시오.
-VPC와 기본 네트워크는 연동할 수 없으며, 각 네트워크별로 인스턴스를 액세스합니다.
