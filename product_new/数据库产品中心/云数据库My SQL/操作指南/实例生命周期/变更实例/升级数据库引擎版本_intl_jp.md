## 操作シナリオ
このドキュメントでは、MySQLエンジンをバージョンアップする場合、コンソールを使ってバージョンアップする方法について説明します。
MySQLは、下記データベースエンジンのバージョンアップをサポートします。
- MySQL 5.5からMySQL 5.6へのバージョンアップ
- MySQL 5.6からMySQL 5.7へのバージョンアップ

<span id="shengjiguize"></span>
## バージョンアップに関するルール
 メジャーバージョン間のアップグレードはサポートされていません。例えば、 MySQL5.5データベースインスタンスをMySQL 5.7 またはそれ以降のバージョンにアップグレードする場合、先にデータベースインスタンスをMySQL 5.6にアップグレードする必要があります。
- 「create table …  as select …」の文法をサポートしません。
-  MySQL 5.6/5.7のマスタースレーブ同期は、 GTIDに基づき実現され、デフォルトでは InnoDBエンジンのみがサポートされています。
-  MySQL5.5バージョンからMySQL 5.6にアップグレードする場合、アップグレード中に、 MyISAMエンジンのテーブルをInnoDBに変換されます。**アップグレードする前にMyISAMを InnoDBに変換することをお勧めします**。
- アップグレードの実行中に、MySQL は slow\_log テーブルをクリアします。ログ情報を保持するには、メジャーバージョンのアップグレードを実行する前にログ内容を保存しておいてください。
- **バージョンアップするインスタンスが他のインスタンス（マスターインスタンス、読取専用インスタンスなど）に関連付けられている場合、データレプリケーションの一致性を確保するために、合わせてバージョンアップします**。
-  MySQLバージョンのアップグレードを実行する場合、データを移行する必要があります。そのために、アップグレードに長い時間がかかるので、しばらくお待ちください。この作業期間中、サービスは中断されることなく継続して利用できます。
- アップグレードが完了する際に、インスタンスの切り替え作業（即ち、MySQLデータベースの接続が数秒間で切断されている）を実行する必要があります。プログラムの自動再接続機能を有効にし、また、インスタンスのメンテナンス実行可能な時間帯に切り替え作業を実行することをお勧めします。メンテナンス時間帯については、 [インスタンスメンテナンス時間帯の設定](https://cloud.tencent.com/document/product/236/10929)をご参照ください。
- 単一インスタンスのテーブル数が100万を超えた場合は、アップグレードのエラーになる恐れがあり、データベースへの監視にも影響を与えます。そのために、単一インスタンスのテーブル数が100万を超えないようにテーブルの数を適切に管理してください。

## 操作手順
1.  [MySQL コンソール](https://console.cloud.tencent.com/cdb/ )にログインします。
2. インスタンスリストでアップグレードするインスタンスを選択し、操作列から【もっと】>【アップグレード】（MySQL 5.7はそれ以上のバージョンにアップグレードできない）を選択します。
![](https://main.qcloudimg.com/raw/ec14ff513f80db6e87338b5a531f6126.png)
3. ホップアップされたダイアログボックスで、アップグレードするデータベースバージョンを選択し、【アップグレード】をクリックします。
データベースのアップグレードを実行する場合、データを移行する必要があります。アップグレードが完了する際に、MySQLデータベースの接続が数秒間で切断されます。アップグレードを実行する場合、切り替え時間を【メンテナンス時間帯】に指定することで、インスタンスのアップグレード完了後の次の【メンテナンス時間帯】に切り替え作業を実行します。
>切り替え時間を【メンテナンス時間帯】に指定した場合、データベース仕様のアップグレードが完了した後にすぐ切り替え作業を実行せず、インスタンスの【メンテナンス時間帯】に切り替え作業を開始するまでに同期を保持します。そのために、インスタンス全体のアップグレードを完了するには、時間がかかる可能性があります。
>
![](https://main.qcloudimg.com/raw/8a27b736891296d8c64077cf01409f08.png)

