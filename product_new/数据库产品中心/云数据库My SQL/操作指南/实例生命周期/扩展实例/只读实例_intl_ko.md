## 작업 시나리오
TencentDB for MySQL는 사용자가 읽기 전용 인스턴스를 1개 혹은 여러 개 생성하도록 지원합니다. 사용자의 읽기 쓰기를 분리하고, 1 마스터 멀티 슬레이어 솔루션을 지원하며 데이터베이스를 읽는 부하 성능을 대폭 업그레이드합니다. 
현재 읽기 쓰기 분리 주소를 통합할 수 없습니다. 즉 읽기 요청과 쓰기 요청은 자동으로 분리합니다. 읽기 전용 인스턴스는 별도의 IP,  PORT를 통해 액세스합니다.

**용어**
- **RO그룹**: Cloud Load Balace(CLB)가 적용된 읽기 전용 인스턴스 그룹입니다. 혹 RO그룹에 멀티 읽기 전용 인스턴스가 있을 경우, 사용자의 읽기 요청량을 그룹내 각 읽기 전용 인스턴스 균등하게 할당할 수 있습니다. RO그룹은 외부에 IP, PORT를 제공하여 데이터베이스를 액세스합니다.
- **읽기 전용 인스턴스**: 요청을 읽는 싱글 노드(슬레이어 서버가 없습니다) 인스턴스를 지원합니다. 읽기 전용 인스턴스는 독립적으로 존재할 수 없으며, 각 읽기 전용 인스턴스는 모두 임의 RO그룹에 포함됩니다. 

## 기초 아키텍처
읽기 전용 인스턴스는 MySQL binlog 마스터 슬레이어 동기화 성능을 적용합니다. 마스터 인스턴스(소스 데이터베이스)를 변경 시 전체 읽기 전용 인스턴스에 동기화합니다. 전체 읽기 전용 인스턴스는 싱글 노드（슬레이어 서버 불포함）아키텍처를 적용합니다. 혹 읽기 전용 인스턴스가 다운될 경우, 끊임없이 복구를 시도합니다. 혹 더 뛰어난 고가용성을 원하시면 RO 그룹을 적용하시기 바랍니다.
![](https://mc.qcloudimg.com/static/img/3f2a163d690deda5978474f8db4b8738/image.png)

## 기능 제한
- 마스터 인스턴스당 읽기 전용 인스턴스를 최대 5개 생성합니다.
- 오직 *디스크 용량 50GB, 메모리 1000MB**이상 스펙의 마스터 인스턴스만 읽기 전용 인스턴스를 구매할 수 있습니다. 혹 마스터 인스턴스의 스펙이 이보다 낮을 경우 우선 마스터 인스턴스의 스펙을 업그레이드하시기 바랍니다.
- 사용자가 로드 상황에 따라 업그레이드하는데 편의를 드리고자 읽기 전용 인스턴스의 인스턴스 스펙은 마스터 인스턴스와 다를 수 있습니다.
-원활한 동기화 작업을 위해 읽기 전용 인스턴스의 디스크 용량은 **마스터 인스턴스 기존 데이터량의 1.1배 이상(포함)이어야 합니다**.
- 백업, 롤백을 지원하지 않습니다.
- 데이터터를 읽기 전용 인스턴스에 마이그레이션할 수 없습니다.
- 데이터베이스를 생성/삭제할 수 없으며, phpMyAdmin(PMA)를 지원하지 않습니다. 
- 계정을 생성/삭제할 수 없으며, 계정에 계정과 비밀번호를 수정하는 권한이 없습니다.

## 주의사항
- 읽기 전용 인스턴스는 계정과 데이터베이스를 점검하지 않고, 마스터 인스턴스로부터 동기화합니다.
- 오직 MySQL 5.6(GTID) 혹은 이상 버전의 마스터 데이터베이스만 읽기 전용 인스턴스를 오픈할 수 있습니다. 혹 MySQL의 버전은 5.6 이하일 경우, 데이터베이스 버전을 MySQL 5.6으로 업그레이드할 수 있으며, 인스턴스 스펙은 반드시 메모리 4GB, 디스크 100GB 이상을 충족해야 합니다. GTID를 오픈 시 읽기 전용 인스턴스를 구매할 수 있습니다.
- 혹 MySQL 버전은 5.6이오나 GTID를 오픈하지 않았을 경우, 콘솔에서 GTID를 오픈할 수 있으며, 읽기 전용 인스턴스를 추가할 수 있습니다.
GTID를 오픈 시 많은 시간을 소모하며, 인스턴스는 몇초간 플래시합니다. 관련하여 서비스의 낮은 피크타임에 작업하며, 데이터베이스를 액세스하는 프로그램에 재연결 메커니즘을 추가하기를 권장드립니다.
- 읽기 전용 인스턴스는 InnoDB 엔진만 지원하며, InnoDB 엔진의 마스터 인스턴스에만 읽기 전용 인스턴스를 생성할 수 있습니다.
- 데이터 동기화에 딜레이가 있으므로 멀티 읽기 전용 인스턴스간 소량의 데이터가 일치하지 않을 수 있습니다. 각 읽기 전용 인스턴스와 마스터 인스턴스의 동기화 딜레이는 콘솔에서 확인할 수 있습니다.
- 같은 RO그룹에서 읽기 전용 인스턴스 스펙은 일괄 같은 스펙으로 적용해주시기 바랍니다.

## 조작 프로세스
1. [TencentDB for MySQL 콘솔](https://console.cloud.tencent.com/cdb/)에 로그인합니다.
2. 인스턴스 리스트에서 읽기 전용 인스턴스를 생성하려는 클라우드 데이터베이스를 선택합니다. 조작 리스트에서 [관리]를 클릭합니다.
3. [인스턴스 상세내역] 태그에서 인스턴스 아키텍처 이미지의 [읽기 전용 인스턴스 추가]를 클릭하여 읽기 전용 인스턴스 관리 웹페이지에 접속합니다. 
![](https://main.qcloudimg.com/raw/09902e5af5ef3530bd2ade5a5dc0e616.png)
4. [읽기 전용 인스턴스] 태그에서 [생성]을 클릭하면 읽기 전용 인스턴스를 생성합니다.
5. 구매 웹페이지에 접속하여 읽기 전용 인스턴스에 대응하는 사양을 선택합니다. 확인 완료 시[바로 구매하기]를 클릭하여 읽기 전용 인스턴스를 구매합니다.
![](https://main.qcloudimg.com/raw/5c002d37fdeb72a5396a394133672338.png)

