CDN은 DNS 확인, 링크 품질, 사이트 가용성 및 도메인 이름에 연결되는 데이터 액세스 일관성과 같은 일련의 진단을 포함하여 URL 중 하나에 대한 액세스 이상이 나타날 때 셀프 문제 해결 도구를 제공합니다. 또, 문제를 해결 방법도 제공합니다.

> **주의** 
> 진단된 리소스 URL은 사용자 계정에서 액세스한 **활성화 중** 상태의 도메인 이름이어야 합니다. 진단 중 생성 된 대역폭은 청구 대역폭에 포함되며 해당 리소스를 200MBytes 이하로 진단하는 것을 권장합니다.

## 사용 설명
### 로컬 액세스 진단
리소스 액세스 중 하나가 비정상임을 발견하면 **로컬 액세스 진단**을 통해 진단을 시작할 수 있습니다. 단계는 다음과 같습니다.
1. [CDN 콘솔](https://console.cloud.tencent.com/cdn)에 로그인하고 왼쪽의 [진단 도구] 메뉴에서 [셀프 장애 진단]을 선택하십시오.
2. [로컬 액세스 진단] 페이지로 이동하여 진단해야 하는 비정상적인 URL을 입력하십시오. URL 앞에는``http://``가 붙어야 하며, 현재 HTTPS 진단은 지원되지 않습니다.
3. URL을 올바르게 입력한 후 [검사 주소 획득]을 클릭하면 페이지에 검사 주소가 생성됩니다. 주소 링크를 클릭하여 탐지 페이지를 열고 진단 정보 수집을 시작하십시오. 진단 과정에서 페이지를 닫지 마십시오. 진단이 완료된 후 페이지가 자동으로 닫힙니다.
4. 진단이 완료되면 [진단 보고서] 페이지로 이동하여 진단 결과를 볼 수 있습니다.

![기기 진단](https://mc.qcloudimg.com/static/img/30d52a0a7b01e4b9f802177ceda62bb0/1.png)
### 사용자 액세스 진단 
사용자가 응답 리소스에 비정상적으로 액세스 한 경우 **사용자 액세스 진단**을 통해 문제를 해결하고 Tencent Cloud에서 제공하는 해결 방법을 통해 문제를 해결할 수 있습니다. 단계는 다음과 같습니다.
1. [CDN 콘솔](https://console.cloud.tencent.com/cdn)에 로그인하고 왼쪽의 [진단 도구] 메뉴에서 [셀프 장애 진단]을 선택하십시오.
2. [사용자 액세스 진단] 페이지로 이동하여 진단해야 하는 비정상 URL을 입력하십시오. URL 앞에는``http://````가 붙어야 하며, 현재 HTTPS 진단은 지원되지 않습니다.
3. URL을 올바르게 입력한 후 [검사 주소 획득]을 클릭하면 페이지에 검사 주소가 생성됩니다. 진단 주소를 사용자에게 보내십시오. 사용자가 진단 URL을 열면 진단 정보가 수집되므로 진단 프로세스 중 페이지를 닫지 않도록 공지 해 주십시오.
4. 진단이 완료되면 [진단 보고서] 페이지로 이동하여 사용자로부터 수집 한 진단 결과를 볼 수 있습니다.

![사용자 진단](https://mc.qcloudimg.com/static/img/215ff9302a2e2f5026140d6dff9ac794/2.png)
### 진단 보고서 보기
[CDN 콘솔](https://console.cloud.tencent.com/cdn)에 로그인하고 왼쪽의 [진단 도구] 메뉴에서 [셀프 장애 진단]을 선택하십시오. [진단 보고] 페이지로 이동하면 생성된 진단 보고서가 시간 순서대로 표에 표시됩니다.
![진단 보고 목록](https://mc.qcloudimg.com/static/img/fd6eeaf8759acbe844d90bef5da29003/3.png)
진단 보고서의 오른쪽에서 [보기]를 클릭하면 진단 보고서의 세부 정보를 볼 수 있습니다. 
![보고 세부 사항](https://mc.qcloudimg.com/static/img/ad105416d8677a8d37faa252bef7489d/4.png)
보고서 세부 사항 페이지는 **진단 대상** 과 **진단 보고서** 두 부분으로 나누어 집니다.
**진단 대상: **진단 ID, 비정상 URL, 비정상 도메인 이름, 원본 서버 유형, 진단 시간을 포함합니다.
**진단 보고서: **CNAME, DNS 확인, 사이트 가용성, 링크 품질 및 데이터 액세스 일관성에 대한 진단 결과가 포함되어 있습니다. 각 진단 항목에 출현할 수 있는 진단 결과는 다음과 같습니다.
**첫 번째 항목: CNAME**

1. 정상: 진단 도메인 이름이 실제 분석 CNAME과 해당 구성 분석의 CNAME과 같은 경우 진단 결과는 "정상"입니다.
2. 비정상: 진단 도메인 이름이 실제 분석 CNAME 과 해당 구성 분석의 CHAME 과 일치하지 않으면 진단 결과는 "비정상"입니다. [상세 정보 보기]를 클릭하면 해결을 위해 구성해야 하는 실제 분석된 CNAME 및 CDN 공급 업체와 CNAME 및 CDN 공급 업체를 볼 수 있습니다. 진단 도메인 이름이 실제로 여러 CNAME을 분석하는 경우 세부 사항에 하나만 표시됩니다. 이 때 DNS 서비스 공급처에서 CNAME 구성을 수정하는 것을 추천 합니다. 만약 CNAME 구성이 비정상이면 다른 항목의 진단은 계속되지 않습니다.

**두 번째 항목: DNS 분석**
1. 정상: 도메인 이름 액세스의 실제 노드와 최적 노드가 동일한 경우 진단 결과는 "정상"입니다. [상제 정보 보기]를 클릭하여 클라이언트 IP, 로컬 DNS, 실제 노드 및 최적 노드 IP, 구역 및 ISP를 볼 수 있습니다.
2. 현재 분석 경로가 최적이 아닐 때: 만약 진단 도메인 이름 액세스의 실제 노드와 최적 노드가 일치하지 않는 경우 진단 결과는 "현재 분석 경로는 최적이 아닙니다 "라는 진단 결과가 나오며, Tencent Cloud 기술자에게 문의하여 문제를 확인하는 것을 권장합니다.
3. 노드 IP 획득 실패: 만약 도메인 이름 IP 진단이 하이재킹 되거나 액세스 노드 연결에 실패한 경우 진단 결과는 "노드 IP 획득 실패"로 나옵니다. 이 때 Tencent Cloud 기술자에게 문의하여 문제를 해결하는 것을 권장합니다.

**세번째 항목: 각 사이트의 가용성**
1. 정상: 만약 노드와 원본 서버 연결이 정상이면 진단 결과는 "노드 원본 서버 연결이 정상입니다" 입니다.
2. 비정상: 노드 또는 원본 서버 사이의 연결이 비정상인 경우 진단 결과는 "노드 연결 이상" 또는 "원본 서버 연결 이상"또는 "노드 및 원본 서버 연결 이상" 입니다.이 때 Tencent Cloud 기술자에게 문의하여 문제를 해결하는 것을 권장합니다.

**네 번째 항목: 링크 품질**
1. 정상: 만약 도메인 이름 액세스 진단이 정상인 경우 진단 결과는 "정상"이며 리소스 액세스의 총 지연 시간을 보여줍니다 [세부 사항보기]를 클릭하면 상세 링크의 각 링크에 소요된 시간을 추가로 확인할 수 있습니다.
2. 비정상: 만약 도메인 이름 액세스 진단이 실패하면 진단 결과가 "비정상"이며, 현재 Tencent Cloud 기술자에게 문의하여 문제를 확인하는 것을 권장합니다. 만약 링크 품질이 비정상이면 데이터 액세스 일관성 진단이 계속되지 않습니다.

**다섯 번째 항목: 데이터 액세스 일관성**
1. 정상:원본 서버와 노드에서 진단 리소스가 정상이고 MD5가 일치하면 진단 결과는 "정상"입니다. [상세 정보 보기]를 클릭하면 원본 서버와 노드의 리소스 상황을 볼 수 있습니다.
2. 원본 서버 리소스 비정상: 만약 원본 서버 리소스 리턴 코드가 4XX 또는 5XX이거나 여러 원본 서버의 리소스가 MD5 일치하지 않으면 진단 결과는 "원본 서버 리소스 비정상" 이므로 원본 서버 리소스를 확인하는 것을 권장합니다. [상세 정보 보기]를 클릭하면 원본 서버와 노드의 리소스 상황을 볼 수 있습니다.
3. CDN 리소스 비정상: 만약 원본 서버 리소스는 정상이지만 노드 리소스 리턴 코드가 4XX 또는 5XX이거나 노드 리소스가 원본 서버 리소스 MD5와 일치하지 않는 경우 진단 결과는 "CDN 리소스 비정상"입니다. 이 경우 Tencent Cloud 기술자에게 문제 해결을 요청하는 것이 좋습니다. [상세 정보보기]를 클릭하면 원본 서버 및 노드의 리소스를 더 볼 수 있습니다.

진단 보고서로 문제가 해결되지 않으면 [티켓 제출](https://console.cloud.tencent.com/workorder/category)을 진행하거나 Tencent Cloud 기술자에게 문의하여 문제를 해결하는 것을 권장합니다.

