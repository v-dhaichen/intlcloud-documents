CDN은 Tencent Cloud 리소스 액세스 관리(Cloud Access Management) 시스템에 연결되어 있으며 [액세스 관리](https://console.cloud.tencent.com/cam/overview) 콘솔에서 사용자 그룹, 사용자, 역할 및 정책과 같은 일련의 관리 작업을 수행할 수 있습니다.

CDN은 현재 권한 시스템 업그레이드 전환 단계에 있기 때문에 다음 몇 가지 방법을 통해 서브 사용자 및 역할에 대한 CDN 관리 권한을 할당할 수 있습니다.

## 사전 설정 정책
현재 CDN에 적용할 수 있는 사전 설정 정책은 다음과 같습니다.
- AdministratorAccess: 이 정책에 연관된 서브 사용자는 계정에서 CDN 서비스를 포함한 모든 클라우드 서비스 자산, 재무 관련 정보, 사용자 및 권한을 관리할 수 있습니다.
- QcloudResourceFullAccess: 이 정책에 연관된 서브 사용자는 계정에서 CDN 서비스를 포함한 모든 클라우드 서비스 자산을 관리할 수 있습니다.

서브 사용자가 위의 두 가지 유형의 정책과 연결된 경우 CDN의 모든 도메인 이름에 대한 읽기 및 쓰기 권한을 갖습니다.

## 프로젝트 전략
이미 할당된 프로젝트에 따라 서브 사용자에게 프로젝트 서브 도메인 이름에 대한 완전한 읽기 및 쓰기 권한을 부여하려면 프로젝트 정책 생성을 통해 실행할 수 있습니다.
1. [액세스 관리 콘솔](https://console.cloud.tencent.com/cam/overview)에 로그인하고 왼쪽 디렉터리에서 [정책]을 클릭합니다.
2. [사용자 정의 정책 생성]을 클릭한 후 [제품 기능 또는 프로젝트에 따른 권한 생성]을 선택하십시오.
3. 수요에 따라 정책 이름을 입력하고 아래 서비스 유형에서 [프로젝트 관리]를 선택하십시오.
4. [CDN 서비스 프로젝트에서 클라우드 리소스 관리]를 시작한 후 권한 부여가 필요한 프로젝트에 연결하면 프로젝트 관리자 정책 생성을 완료할 수 있습니다.

## 기능 그룹 정책
프로젝트 레벨의 라이선스 작업을 세분화하고 데이터 조회, 퍼지와 프리패치 및 도메인 이름 관리를 각각 다른 서브 계정에 인증하려면 다음 절차를 통해 정책을 생성할 수 있습니다.
1. [액세스 관리 콘솔](https://console.cloud.tencent.com/cam/overview)에 로그인하고 왼쪽 디렉터리에서 [정책]을 클릭합니다.
2. [사용자 정의 정책 생성]을 클릭한 후 [제품 기능 또는 프로젝트에 따른 권한 생성]을 선택하십시오.
3. 수요에 따라 정책 이름을 입력하고 아래 서비스 유형에서 [CDN]를 선택하십시오.
4. 인증이 필요한 작업 그룹을 수요에 따라 활성화하고 프로젝트(기본 프로젝트에 권한을 부여하지 않음)에 연결한 후 서브 사용자와 연결하면 됩니다.

현재 작업 그룹 분류 및 대응되는 OPEN API 2.0 및 OPEN API 3.0 인터페이스는 다음과 같이 조작 그룹 권한을 가진 서브 사용자가 권한이 있는 프로젝트의 하나의 도메인에 대해서 다음의 인터페이스를 호출할 수 있습니다.

| 권한그룹              | API2.0                                                       | API3.0                                                       | 권한 필요 여부 |
| :-------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- | :----------- |
| 소모 데이터 및 통계량 조회  | DescribeCdnHostInfo <br/>DescribeCdnHostDetailedInfo<br/>GetCdnStatusCode<br/> GetCdnStatTop<br/> GetCdnProvIspDetailStat | DescribeCdnData<br/> DescribeOriginData<br/> ListTopData<br/>DescribeIpVisit |            |
| 도메인 이름 정보 조회          | GetHostInfoById<br/>GetHostInfoByHost                        | 비활성화                                                     |            |
| CDN 로그 다운로드 링크 조회 | GenerateLogList<br/>GetCdnLogList                            | 비활성화                                                     |           |
| 도메인 추가              | AddCdnHost<br/>                                              | 비활성화                                                     |            |
| 활성화/비활성화 도메인 이름         | OnlineHost<br/>OfflineHost                                   | 비활성화                                                    |            |
| 도메인 이름 삭제              | DeleteCdnHost                                                | 비활성화                                                    |          |
| 도메인 이름 구성 수정          | UpdateCdnConfig                                              | 비활성호                                                    |            |
| 퍼지와 프리패치              | RefreshCdnDir<br/>RefreshCdnUrl<br/>GetCdnRefreshLog<br/>CdnPusherV2<br/>GetPushLogs<br/>CdnOverseaPushser | PurgeUrlsCache<br/>PurgePathCache<br/>DescribePurgeTasks<br/>PushUrlsCache<br/>DescribePushTasks |          |
| 서비스 조회              | QueryCdnIp(인증 필요 없음)                                       | DescribeCdnIp                                                |           |

#### 콘솔 페이지 권한 설명
- 소모 데이터 및 통계량 조회: 정책에서 [소모 데이터 및 통계량 보기]를 열고 프로젝트를 연결하면 콘솔에서 다음 모듈 정보를 조회할 수 있습니다.
  - 개요 페이지
  - 통계 분석: 실시간 모니터링
  - 통계 분석: 데이터 분석
  - 전체 네트워크 데이터 모니터링
- 도메인 이름 정보 조회: 정책에서 [도메인 이름 정보 조회]를 활성화하고 프로젝트를 연결하면 콘솔 [도메인 이름 관리] 페이지에서 권한을 가진 프로젝트의 도메인 이름 목록 및 세부 구성 정보를 확인할 수 있습니다.
- CDN 로그 다운로드 링크 조회: 정책에서 [CDN 로그 다운로드 링크 조회]를 활성화하고 프로젝트를 연결하면 콘솔 [로그 관리] 페이지에서 액세스 로그 다운로드 링크를 조회할 수 있습니다.
- 도메인 이름 추가: 정책에서 [도메인 이름 추가]를 활성화하고 프로젝트를 연결하면 지정된 프로젝트에 도메인 이름을 추가할 수 있습니다.
- 활성화/비활성화 도메인 이름: 정책에서 [활성화/비활성화 도메인 이름]을 시작하고 프로젝트를 연결하면 프로젝트에 가속 도메인 이름을 지정하여 활성화/비활성화할 수 있습니다.
- 도메인 이름 삭제: 정책에서 [도메인 이름 삭제]를 활성화하고 프로젝트를 연결하면 지정된 프로젝트에서 가속 도메인 이름을 삭제할 수 있습니다. 도메인 이름을 삭제하려면 비활성화 상태가 필요하므로 1개의 활성화 상태인 도메인 이름을 삭제하려면 [활성화/비활성화 도메인 이름]에 권한을 주어야 합니다.
- 도메인 이름 구성 수정: 정책에서 [도메인 이름 구성 수정]을 활성화하고 프로젝트를 연결하면 지정된 프로젝트에서 가속 도메인 이름 구성을 수정할 수 있습니다.
- 퍼지와 프리패치: 정책에서 [퍼지와 프리패치]를 활성화하고 프로젝트를 연결하면 [캐시 새로고침] 페이지에서 대응하는 퍼지, 프리패치(화이트리스트) 작업을 제출할 수 있고 퍼지와 프리패치 작업의 실행 상태를 조회할 수 있습니다.

## 리소스 권한

사용자가 더 세밀하게 도메인 이름 조회 및 관리 권한을 구성할 수 있도록 CDN 시스템은 현재 권한 정책을 업그레이드하고 있으며, 정책 구문 기능은 사용자 정의 정책 구문을 통해 도메인 이름 레벨의 권한 할당을 구현할 수 있도록 지원합니다.

새로 추가한 API3.0 인터페이스와 새 버전의 통계 분석 콘솔은 전면적으로 정책 구문을 지원하고 있으며, 대응하는 Action은 다음과 같습니다.
- DescribeCdnData
- DescribeOriginData
- ListTopData
- DescribeIpVisit
- PurgeUrlsCache
- PurgePathCache
- DescribePurgeTasks
- PushUrlsCache
- DescribePushTasks
- DescribeCdnIp

정책 구문 예시:
```
{
    "version": "2.0",
    "statement": [
        {
            "action": [
                "*"
            ],
            "resource": [
                "qcs::cdn::uin/루트 계정UIN:domain/www.test.com"
            ],
            "effect": "allow"
        }
    ]
}
```

> 
- 정책 구문은 위에서 설명한 3.0 API 인터페이스에만 권한을 지원하므로 Action 구성이 `*`이면 10개 인터페이스만 나타납니다.
- 프로젝트 권한 및 정책 구문에 따라 도메인 이름 레벨의 권한 부여를 동시에 허용합니다. 프로젝트 A의 데이터 액세스 권한은 승인하고 정책 구문에서 프로젝트 A의 도메인 이름에 대한 데이터 조회 권한을 거부하면, 프로젝트 A의 권한은 없고 다른 도메인 이름 권한은 있습니다.
