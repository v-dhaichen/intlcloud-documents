원본 서버 구성 모듈에서 도메인 이름의 원본 가져오기 구성을 수정할 수 있습니다. CDN은 다음과 같은 원본 가져오기 모드를 지원합니다.
- 멀티 사이트 활성화 IP
  여러 개의 IP가 원본 서버로 구성된 경우, 원본 가져오기는 폴링 정책을 취하고 임의로 IP를 선택하여 원본 가져오기를 진행합니다. 동시에 CDN은 원본 서버의 수동 감지를 수행하지만 IP 주소가 일정 시간 동안 증가하지 않으면 실패율이 증가합니다. 또, 특정 기간 동안 자동으로 마스킹합니다(기본값은 60 초). 폴링 중에 차단된 원본 서버 IP는 건너 뜁니다.
- 도메인 이름 원본 서버
  지정된 도메인 이름을 원본 서버로 설정하는 것을 지원합니다. 원본 서버로 설정된 도메인 이름은 가속 도메인 이름과 일치하지 않아야 합니다.
- COS 버킷 원본 서버
  기존 COS 버킷은 원본 가져오기의 원본 서버로 선택되며 COS V5 버전 버킷만 지원됩니다.
- 대기 서버 구성
  외부 원본 도메인 이름이 설정된 핫 백업 원본 서버를 지원합니다. 원본 가져오기 요청을 주요 원본 서버 오류(4XX, 5XX 에러코드 및 TCP 연결 오류 포함)에서 진행하면, 원본 서버에서 핫 백업 원본 서버로 직접 가져옵니다. 핫 백업 원본 서버를 구성하면 원본 가져오기의 실패율을 효과적으로 줄이고 서비스 품질을 향상시킬 수 있습니다. 현재 핫 백업 원본 서버는 HTTPS 원본 가져오기를 지원하지 않습니다. 핫 백업 원본 서버의 도메인 인증서를 구성할 때 HTTPS 원본 서버 가져오기를 선택하지 마십시오.

>
> - 사용자가 액세스하는 도메인 이름의 원본 서버만 지원하며 [COS](https://cloud.tencent.com/product/cos)에서 버킷이 자동으로 생성한 file.myqcloud.com 의 접미사 수정은 지원하지 않습니다.
> - 관련 부서의 규정에 따라 원본 서버는 Tencent Cloud CVM의 가속 도메인 이름이며 호스트 헤더로 구성된 도메인 이름은 Tencent Cloud ICP비안에서 제출해야 합니다. 그렇지 않으면 차단 될 수 있습니다.

## 구성 안내

### 구성 보기

1. [CDN 콘솔](https://console.cloud.tencent.com/cdn)에 로그인하여 왼쪽 디렉터리 [도메인 관리]를 클릭합니다. 관리 페이지로 이동하여 목록에서 편집해야 하는 도메인 이름을 찾아 작업표시줄에서 [관리]를 클릭하십시오.
   ![img](https://main.qcloudimg.com/raw/4e3c48f2ce14d2c9e3faf91597b1855d.jpg)
2. "기본 구성" 페이지에서 **원본 서버 정보** 모듈을 통해 현재 원본 서버의 도메인 이름을 볼 수 있습니다.
   ![img](https://main.qcloudimg.com/raw/e547a4f48a0012d596be7de37694068d.jpg)

### 원본 서버 수정
원본 서버 정보-주요 원본 서버의 오른쪽 상단 모서리에 있는 [편집] 아이콘을 클릭하여 원본 서버의 서버 유형 및 서버 주소를 수정할 수 있습니다.
![](https://main.qcloudimg.com/raw/0442fbc0938c8182b81b83c77afa0d09.jpg)

**외부 원본 서버** : 원본 서버 주소는 여러 개의 IP 모드 또는 한 개의 도메인 이름 모드를 구성할 수 있습니다. 지정된 포트의 원본 가져오기가 지원되며 형식은 "도메인 이름 : PORT/IP : PORT"이며 포트 범위는 0-65535입니다.
- 원본 서버 주소가 IP 모드인 경우 원본 서버의 가중치가 지원되며 형식은 IP : PORT : WEIGHT이며 가중치 범위는 0~1000입니다.
	- 싱글 원본 서버는 가중치를 설정할 수 없습니다.
	- 원본 서버가 여러 개의 IP인 경우, 부분 IP 설정만을 위해 원본 가져오기 가중치를 허가하지 않습니다.
	- 원본 서버가 도메인 이름 형식인 경우 가중치를 설정할 수 없고, 원본 서버가 IP 만을 위해 가중치를 설정할 수 있습니다.
	- 가중치 형식의 설정은 IP:PORT:WEIGHT이며, 그 중 PORT는 생략 가능하고, 형식은 IP::WEIGHT입니다.
	- 현재 IPV4 주소의 가중치 설정만을 지원하며 IPV6은 지원하지 않습니다.

**COS 원본 서버**：COS 버킷을 원본 서버로 지정합니다.

### 대기 서버 추가

1. 원본 서버의 도메인 이름이 [외부 서버]인 유형에 대해, 원본 서버 백업 구성을 추가할 수 있습니다. 백 서버 요청을 주요 원본 서버 오류(4XX, 5XX 에러코드 및 TCP 연결 오류 포함)에 진행할 때, 원본 가져오기가 핫 백업 원본 서버까지 직접 진행됩니다.
   ![img](https://main.qcloudimg.com/raw/cacaa282099503853d960bcd69482351.jpg)
2. 대기 서버는 원본 서버 유형만 추가 가능: 원본 서버 주소는 여러 개의 IP 모드 또는 1개의 도메인 이름으로 설정할 수 있습니다. 포트 원본 가져오기를 지원하고 포트 번호는 0 - 65535 사이입니다.
   ![img](https://main.qcloudimg.com/raw/08dc5e26f2a7c36eca385375e3290c41.jpg)

### 대기 서버 수정

대기 서버를 추가한 후 콘솔에서 원본/대기 전환이 가능하고 정책을 조정하며 수정 또는 삭제할 수 있습니다.
![img](https://main.qcloudimg.com/raw/08756e81a68f7e04f079289c95d33cd1.jpg)

## 구성 사례
사용자 요청: `http : // www.test.com/1.jpg`는 노드에 도달되지 않고 원본 서버 가져오기로 획득합니다.
1. 원본 서버 구성이 다음과 같은 경우
![img](https://main.qcloudimg.com/raw/cacaa282099503853d960bcd69482351.jpg)
   서버 '1.1.1.1'에 해당 리소스가 없으면 404로 바로 리턴됩니다. 이 때 원본 서버 레이어의 CDN 노드가 응답 받은 후, 요청한 클라이언트에게 직접 리턴되며 클라이언트는 이미지를 받을 수 없습니다.
2. 원본 서버 구성이 다음과 같은 경우
![img](https://main.qcloudimg.com/raw/08756e81a68f7e04f079289c95d33cd1.jpg)
   서버 '1.1.1.1'에 해당 리소스가 없으면 404로 바로 리턴됩니다. 이 때 원본 서버 레이어의 CDN 노드가 응답 받은 후, 예비 원본 서버 2.2.2.2로 리소스를 다시 요청하게 됩니다. 만약 '2.2.2.2'에서 200으로 리턴되면, 노드는 성공적으로 획득된 콘텐츠를 요청한 클라이언트에게 제공하며, 클라이언트는 이미지를 성공적으로 획득할 수 있습니다.

