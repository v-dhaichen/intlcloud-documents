>  CDNサービスはお客様のために「back to origin の301/302設定」機能を提供しています。ノードのback to originリクエストに301/302ステータスコードを戻す場合、CDNノードは直接にリダイレクトアドレスにリソースをリクエストし、ユーザーに301/302ステータスコードを戻しません。

## 設定ガイド
1. [CDNコンソール](https://console.cloud.tencent.com/cdn)にログインし、左側のメニュー欄の【Domain Management】を選択し管理画面に入り、表示されるドメインリストの中で編集したいドメインをクリックします。

2. 【back to origin設定】をクリックすると、**「back to origin の301/302設定」**モジュールが表示されます。デフォルトでは非アクティブ状態です。

## 設定ケース
- ドメイン名が`www.test.com`である場合、back to origin の301/302設定が下記の通りです。

ユーザーAはリソース`http://www.test.com/1.jpg`をリクエストするが、ノードのキャッシュに命中されなかった場合は、ノードはオリジンサーバーにリクエストを送信して必要なリソースを取得します。オリジンサーバーから戻った HTTP Response ステータスコードが301/302であり、リダイレクト指向のアドレスが`http://www.abc.com/1.jpg `である場合は、


1. ノードは当該 HTTP Response情報を直接にユーザーに戻します。
  2. ユーザーは`http://www.abc.com/1.jpg`にリクエストを送信し、当該ドメイン名がCDNサービスにアクセスしていない場合、加速の効果がありません。
  3. この時点で、ユーザーBも`http://www.test.com/1.jpg` に対しリクエストを送信すると、上記プロセスが繰り返されます。

- ドメイン名が`www.test.com`である場合、back to origin の301/302設定が下記の通りです。
ユーザーAがリソース`http://www.test.com/1.jpg`をリクエストするが、ノードのキャッシュに命中されなかった場合は、ノードはオリジンサーバーにリクエストを送信して必要なリソースを取得します。オリジンサーバーから戻った HTTP Response ステータスコードが302であり、リダイレクト指向のアドレスが`http://www.abc.com/1.jpg `である場合は、

1. back to origin の301/302設定をアクティブにした後に、ノードはステータスコードが301/302のHTTP Response を受信した後、リダイレクト指向アドレスへ直接にリクエストを送信します。
  2. 必要なリソースを取得し、ノードにキャッシュしてから、ユーザーに戻します。


  3. この時点で、ユーザーBも`http://www.test.com/1.jpg`にリクエストを送信すると、ノードで直接に命中されてからユーザーに戻します。
  4. back to origin の301/302設定をアクテイブにした後に、最大3回までのリダイレクトをフォローします。制限を超えると、直接にお客様に301/302を戻します。
