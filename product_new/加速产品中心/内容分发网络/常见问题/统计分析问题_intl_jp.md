### アクセスモニタリングの帯域幅データはどのように統計されていますか。
各CDNノードはリアルタイムでトラフィックデータを収集し、コンピューティングセンターに報告してドメイン名の総トラフィックデータにまとめます。時間の周期によって、トラフィック/時間を使用し、帯域幅データに換算して表示します。
**たとえば：**
- 1分間に生成されるトラフィックの合計は6MBである場合、対応する帯域幅は（6 * 8）/ 60 = 0.8Mbpsとなります。
- 帯域幅の課金には5分の粒度データで決済すると、対応する帯域幅の値=5分の粒度の総トラフィック÷300秒となります。

### モニタリングトラフィックとログコンピューティングトラフィックに違いがあるのはなぜですか、違いは何ですか。
加速ドメイン名ログに記録されている下りバイト数によってカウントされたトラフィックデータは、アプリケーション層データです。実際のネットワーク転送において生成するネットワークトラフィックは純粋なアプリケーション層のトラフィックより5%〜15%多くなります。
- TCP/IPヘッダーの消費：TCP/IPプロトコルに基づくHTTPリクエストでは、各パケットのサイズは最大1500バイトであり、TCPとIPプロトコルの40バイトのヘッダーが含まれます。ヘッダー部分にトラフィックが生成しますが、アプリケーション層にカウントされません。この部分のオーバーヘッドは約3%です。
- TCP再送信：通常のネットワーク転送中、送信されるネットワークパケットは3%～10%ぐらいがインターネットによって廃棄されます。サーバーは廃棄された部分を再送信しますが、アプリケーション層はこの部分にかかったトラフィックをカウントできません。比率は約3%～7%です。

業界標準では、課金用トラフィックは、一般的にアプリケーション層がカウントしたトラフィックに上記のオーバーヘッドを加えます。Tencent Cloud CDNは10%を取りますので、モニタリングトラフィックがログコンピューティングトラフィックの110%程度となります。

### トラフィックの命中率はどのように計算しますか。
CDNはデフォルトではユーザーに2レベルのキャッシュ(エッジレイヤー、ミドルレイヤー)をオンにし、CDNのいずれかのレベルのレイヤーに命中され、リクエストに応答すると、CDNノードに命中していることとしてカウントされます。
トラフィック命中率=（総下りトラフィック-オリジンプルトラフィック）/総下りトラフィック

### より低いトラフィック命中率に対処する方法は？
- キャッシュ更新が実行されたかどうかを確認します。キャッシュ更新により、ノードで指定された内容がクリアされ、命中率が短時間で下がる場合があります。
- オリジンサーバーに新しいリソースが追加されたかどうかを確認します。オリジンサーバーに新しいリソースが多く追加されると、CDNノードのオリジンプルが引き起こされ、トラフィックの命中率が低下傾向になります。
- オリジンサーバーに異常がないかどうかを確認します。オリジンサーバーが故障し、5XXまたは4XXが多くなった場合、トラフィックの命中率に影響を与えます。
- キャッシュの期限切れポリシーが正しく構成されているかどうかを確認します。コンソールでキャッシュ構成の「キャッシュ期限切れ構成」部分を確認します。キャッシュ期限切れルールの優先度は上から下へ、低から高へであり、即ち、下部のキャッシュポリシーが上部のキャッシュポリシーをカバーします。
- Rangeオリジンプルがオンになっているかどうかを確認します。コンソールでオリジンプル構成の「Rangeオリジンプル」部分を確認します。Rangeオリジンプルがオフにされている場合、リクエスト通りにマルチパートで引き出すことではなく、オリジンプル通りに大きなファイル全体を引き出しますため、オリジンプルのトラフィックが高くなり、トラフィックの命中率に影響を与えます。
- フィルタリングパラメータがオンになっているかどうかを確認します。コンソールでアクセス構成の「フィルタリングパラメータ」部分を確認します。フィルタリングパラメータがオフにされている場合、フルパスに従ってキャッシュされます。同じリソースの異なるパラメータからのリクエストの場合、マッチングできないと複数部がキャッシュされますため、トラフィックの命中率に影響を与えます。

### 状態コード統計では、生成されたすべての状態コードを統計しますか。

統計します。CDN統計分析の新しいバージョンが打ち上げた後、オリジンサーバーで生成された状態コードさえあれば、対応するモニタリング曲線が生成されます。ユーザーの異常問題を調べるのに便利です。

### 省、キャリアごとの統計データはどのように計算しますか。
省、キャリアごとの統計データは、アクセスログからclient IP情報を使用して計算されます。純粋なログを採用して計算しているので、それらのデータを加算することと「すべての省」、「すべてのキャリア」を選択することと使用される課金データには差があります。具体的な原因については、上記の2番目の質問を参照してください。




