### アクセス監視の帯域幅データはどのように統計されていますか。
各CDNノードはリアルタイムでトラフィックデータを収集し、コンピューティングセンターに報告してドメイン名の総トラフィックデータに集計します。期間によって、トラフィック/時間を使用し、帯域幅データに換算して表示します。
**たとえば：**

- 1分間に生成されたトラフィックの合計は6MBである場合、対応する帯域幅は（6 * 8）/ 60 = 0.8Mbpsとなります。
- 帯域幅の課金には5分間の粒度データで決済すると、対応する帯域幅の値=5分間の粒度の総トラフィック÷300秒となります。

### 監視トラフィックとログコンピューティングトラフィックが一致しないのはなぜですか、違いは何ですか。
加速ドメイン名ログに記録されている下りバイト数によって集計されたトラフィックデータは、アプリケーション層データです。実際のネットワーク転送において生成するネットワークトラフィックは純粋なアプリケーション層のトラフィックより5%〜15%多くなります。
- TCP/IPヘッダーの消費：TCP/IPプロトコルに基づくHTTPリクエストでは、各パケットのサイズは最大1500バイトであり、TCPとIPプロトコルの40バイトのヘッダーが含まれます。ヘッダー部分にトラフィックが発生しますが、アプリケーション層に集計されません。この部分のオーバーヘッドは約3%です。
- TCP再送信：通常のネットワーク転送中に送信されるネットワークパケットは3%～10%位がインターネットによって廃棄されます。サーバーは廃棄された部分を再送信しますが、アプリケーション層はこの部分に発生したトラフィックを集計することはできません。比率は約3%～7%です。

業界標準では、課金用トラフィックは、一般的にアプリケーション層のトラフィックに上記のオーバーヘッドを加算します。Tencent Cloud CDNは10%を取りますので、監視トラフィックがログコンピューティングトラフィックの110%程度となります。

### トラフィックの命中率はどのように計算しますか。
CDNはデフォルトではユーザーに2レベルのキャッシュ(エッジレイヤー、ミドルレイヤー)をオンにし、CDNのいずれかのレベルのレイヤーに命中され、リクエストに応答すると、CDNノードに命中していると見なされます。
トラフィック命中率=（総下りトラフィック-back to originトラフィック）/総下りトラフィック

### トラフィック命中率が異常に低い問題を対処する方法は？
- キャッシュ更新が実行されたかどうかを確認します。キャッシュ更新により、ノードで指定された内容がクリアされ、命中率が短時間で下がる場合があります。
- オリジンサーバーに新しいリソースが追加されたかどうかを確認します。オリジンサーバーに新しいリソースが多く追加されると、CDNノードのback to originが引き起こされ、トラフィックの命中率が低下する傾向があります。
- オリジンサーバーに異常がないかどうかを確認します。オリジンサーバーに障害が発生して、5XXまたは4XXが多くなった場合、トラフィックの命中率に影響を与えます。
- キャッシュの期限切れポリシーが正しく構成されているかどうかを確認します。コンソールでキャッシュ構成の「キャッシュ期限切れ構成」部分を確認します。キャッシュ期限切れルールの優先度は上から下へ、低から高へであり、即ち、下部のキャッシュポリシーが上部のキャッシュポリシーを上書きします。
- Range back to originがオンになっているかどうかを確認します。コンソールでback to origin構成の「Range back to origin」部分を確認します。Range back to originがオフにされている場合、リクエスト通りにパートで引き出すことではなく、back to origin時に大きなファイル全体を引き出しますため、back to originのトラフィックが高くなり、トラフィックの命中率に影響を与えます。
- フィルタリングパラメータがオンになっているかどうかを確認します。コンソールでアクセス構成の「フィルタリングパラメータ」部分を確認します。フィルタリングパラメータがオフにされている場合、フルパスに従ってキャッシュされます。同じリソースの異なるパラメータからのリクエストの場合、マッチングできないと複数部がキャッシュされるため、トラフィックの命中率に影響を与えます。

### 状態コード統計では、生成されたすべての状態コードが統計されますか。

統計します。CDN統計分析の新しいバージョンが打ち上げた後、オリジンサーバーで生成された状態コードさえあれば、対応する監視曲線が生成されます。ユーザーの異常問題を調べやすくするようにしています。

### 省別、キャリア別の統計データはどのように計算しますか。
省別、キャリア別の統計データは、アクセスログからclient IP情報を使用して計算されます。純粋なログを採用して計算しているので、それらのデータを加算することと「すべての省」、「すべてのキャリア」を選択することと使用される課金データには差があります。具体的な原因については、上記の2番目の質問を参照してください。




