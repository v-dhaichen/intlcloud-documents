### キャッシュ期限切れコンフィグレーションとは何ですか。
キャッシュ期限切れコンフィグレーションとは、CDN加速ノードがユーザーのサービスコンテンツをキャッシュするように構成する時に準拠する一連の期限切れルールのセットです。
CDNノードにキャッシュされたユーザーリソースは、いずれも「期限切れ」の問題に直面しています。リソースが期限切れではない状態にある場合、ユーザーリクエストがノードに到達すると、ノードは該当のリソースをユーザーに直接返し、取得スピードを向上させます。リソースが期限切れの状態になっている場合（即ち、構成されている有効時間を超えた場合）、ユーザーリクエストはノードにオリジンサーバーに発送され、内容を再取得してノードにキャッシュする同時に、ユーザーに返します。キャッシュ時間を適切に構成することは、命中率を効果的に向上させ、オリジンプル率を低下させ、ユーザーの帯域幅を節約することができます。

### 高度なキャッシュ構成とは何ですか。
1. [CDNコンソール](https://console.cloud.tencent.com/cdn)にログインし、左側のメニューで[ドメイン名管理]をクリックすると、管理ページがアクセスします。
2. 編集するドメイン名の行を見つけて操作バーの[管理]をクリックします。

3. キャッシュ期限切れ構成モジュールから**高度なキャッシュ期限切れ構成**スイッチを特定し、クリックして開きます。
4. 高度なキャッシュ期限切れ構成スイッチをオンにすると、次の効果が得られます。
ユーザーがオリジンサーバーのあるリソースをリクエストする場合、Response HTTP Header にCache-Controlフィールドが付き、その値がmax-age=xxxxです。この時、ノードは構成されている有効期限時間とmax-ageの中の最小値を該当リソースのキャッシュ時間として取ります。
- ユーザーのオリジンサーバーで/index.htmlのmax-ageが200秒、CDNに対応するキャッシュ時間が600秒に構成されている場合、ファイルの実際の期限切れ時間は200秒となります。
- ユーザーのオリジンサーバーで/index.htmlのmax-ageが800秒、CDNに対応するキャッシュ時間が600秒に構成されている場合、ファイルの実際の期限切れ時間は600秒となります。
>ユーザーのオリジンサーバーResponse HeaderにCache-Coontrolフィールドがない場合、CDNはデフォルトではCache-Control: max-age=600ヘッダーを追加します。

### ブラウザーでのファイルキャッシュ時間はどう制御しますか。
Tencent Cloud CDNは、デフォルトではオリジンサーバーのCache-Coontrol構成をサポートします。現在、Cache-Coontrolヘッダーの構成がまだサポートされていませんので、CDNノードでmax-ageを構成することはできません。ただし、CDNノードはオリジンサーバーのmax-ageを継承しますため、オリジンサーバーでのみ構成すればいいです。

### キャッシュコンフィグレーションの優先度をどう調整しますか。
 [優先度調整](https://intl.cloud.tencent.com/document/product/228/6290#.E4.BC.98.E5.85.88.E7.BA.A7)ドキュメントの操作説明を参照してください。

### CDNの自己オリジンは特定のファイルをキャッシュしないように構成できますか？キャッシュ時間を0に構成するとは、キャッシュしないという意味ですか。
ユーザーは、ディレクトリとファイルのタイプに応じて対応するキャッシュ時間を構成することができます。キャッシュ時間が0に構成されている場合、即ち、CDNノードが該当リソースをキャッシュしないように構成する場合、ユーザーがCDNノードにアクセスリクエストを送信するたびに、CDNノードはオリジンサーバーに戻って対応するリソースを引き取る必要があります。関連するキャッシュ構成は、[キャッシュ期限切れコンフィグレーションの構成](https://intl.cloud.tencent.com/doc/product/228/6290)を参照してください。

### Tencent Cloudはどのようなキャッシュ期限切れコンフィグレーションをサポートしますか。
Tencent Cloud CDNは、各次元のキャッシュ時間構成、カスタマイズの優先度調整、cache継承ポリシー（高度なキャッシュ構成）をサポートします。 キャッシュ時間を適切に構成することは、命中率を効果的に向上させ、オリジンプル率を低下させ、ユーザーの帯域幅を節約することができます。

### CDNのデフォルトのキャッシュ構成は何ですか。
ドメイン名はアクセス時、デフォルトの構成は次の通りです。
- ユーザー保有のオリジンドメイン名のアクセス：すべてのファイルはデフォルトで30日のキャッシュ有効期限ですが、通常の動的ファイル（例えば、.php .jsp .asp .aspxなど）のキャッシュ有効期限はデフォルトで0であるため、このような動的ファイルリクエストに対しては直接オリジンプルします。
- COSオリジンドメイン名のアクセス：すべてのファイルはデフォルトで30日のキャッシュ有効期限です。
-デフォルトで高度なキャッシュ期限切れ構成をオフにしています。

### キャッシュ引継のポリシーは何ですか。
ユーザーがある業務リソースをリクエストし、オリジンサーバーに対応するResponse HTTP HeaderにCache-Coontrolフィールドが存在している場合。この時、デフォルトのポリシーは次の通りです。
- Cache-Coontrolフィールドはmax-ageである場合、このリソースに対するキャッシュ時間は構成されたキャッシュ時間に準ず、max-ageで指定された時間の引継はしません。
- Cache-Coontrolフィールドはno-cacheまたはno-storeである場合、CDNノードはこのリソースをキャッシュしません。

### キャッシュのマッチング方法は何ですか。
複数のキャッシュポリシーが構成されている場合、互いに重複することがあるため、構成項目リストの下部の項目が上部の項目に優先します。あるドメイン名が次のキャッシュ構成で構成されていると仮定します：
```
すべてのファイルは30日
.php .jsp .aspx 0秒
.jpg .png .gif 300秒
/test/*.jpg 400秒
/test/*.jpg 400秒
```

ドメイン名が `www.test.com`で、リソースが`www.test.com/test/abc.jpg`であるとすると、そのマッチング方法は次の通りです。
1.一番目のすべてのファイルにマッチし、命中しました。この時、キャッシュ時間は30日です。
2.二番目にマッチし、命中していません。
3.三番目にマッチし、命中しました。この時、キャッシュ時間は300秒です。
4.四番目にマッチし、命中しました。この時、キャッシュ時間は400秒です。
5.五番目にマッチし、命中しました。この時、キャッシュ時間は200秒です。

だから、最終のキャッシュ時間は200秒で、最後のマッチングで有効となります。
