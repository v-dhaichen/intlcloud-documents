### 캐시 만료 사양이란 무엇입니까?
캐시 만료 사양은 CDN 캐시 노드가 서비스 콘텐츠를 캐시할 때, 한 세트의 기간 만료 규칙을 설정하는 것을 가리킵니다.
CDN 노드에 캐시된 사용자 리소스에는 "기간 만료" 문제가 있습니다. 만약 리소스가 만료 상태가 아닌 경우, 사용자가 노드를 요청한 후에 노드는 해당 리소스를 사용자에게 리턴해 속도를 높이게 됩니다.; 리소스가 만료 상태인 경우이면(즉, 이미 설정된 유효기간 지난 경우), 사용자는 노드가 원본 서버에 전송하여 요청하고 다시 콘텐츠를 받아야 하며 노드를 캐시해야 합니다. 또 동시에 사용자에게 리턴됩니다. 합리적으로 캐시 시간을 구성하고, 유효한 명중율을 높이고, 리턴률을 낮추어 사용자의 대역폭을 절약합니다.

### 고급 캐시 설정이란 무엇입니까?
1. [CDN 콘솔](https://console.cloud.tencent.com/cdn)에 로그인한 다음 왼쪽 메뉴에서 [도메인 관리]를 클릭하여 관리 페이지로 진입합니다.
2. 사용자가 편집해야 하는 도메인 이름이 있는 줄에서 메뉴에서 [관리]를 클릭합니다.

3. 캐시 만료 설정 모듈에서 **고급 캐시 만료 설정**을 찾아 클릭하여 활성화합니다.

4. 사용자가 고급 캐시 만료 설정 스위치를 활성화한 후, 다음의 효과를 볼 수 있습니다.
사용자가 원본 서버에 리소스를 요청할 때, Response HTTP Header에 Cache-Control 필드가 있습니다. 이 때 값이 `max-age = xxxx`일 때, 노드는 해당 리소스의 캐시 시간이 매칭된 만료 시간과 max-age 중 제일 최솟값을 사용합니다.
 - 만약 사용자 원본 서버 구성`/index.html`의 max-age는 200초이고, CDN이 매칭한 캐시 시간 600초면, 파일 실제 만료 시간은 200초입니다.
 - 만약 사용자의 원본 서버 구성/index.html 의 max-age가 800초이고, CDN이 설정한 캐시 시간이 600초면, 파일의 실제 만료 시간은 600초입니다.
>만약 사용자의 원본 서버가 Response Header 에서 Cache-Control 필드가 없으면, CDN은 기본으로 Cache-Control: max-age = 600 헤더를 추가합니다.

### 브라우저에서 파일의 캐시 시간을 어떻게 제어합니까?
Tencent Cloud CDN은 일반적으로 원본 서버의 Cache-Control 설정을 지원합니다. 현재 Cache-Control 헤더 구성을 지원하지 않기 때문에 CDN 노드에서의 max-age를 구성할 수 없습니다. 하지만 CDN 노드는 원본 서버의 max-age를 상속해야 하므로 원본 서버에서의 서버와 매칭이 되기만 하면 됩니다.

###  캐시 설정의 우선순위를 조정하는 방법은 무엇입니까?
[우선순위 조정](https://intl.cloud.tencent.com/document/product/228/6290#.E4.BC.98.E5.85.88.E7.BA.A7)을 참조하십시오.

### CDN 원본 서버는 어떤 파일을 캐시 하지 않도록 설정이 가능합니까? 캐시 시간을 0으로 설정하면 캐싱이 안 됩니까?
사용자는 디렉터리 및 파일 유형별로 해당 캐시 시간을 설정할 수 있습니다. 만약 캐시 시간을 0으로 설정하면 CDN 노드는 해당 리소스를 캐시 하지 않습니다. 사용자가 CDN 노드로 액세스 요청을 발송할 때마다 CDN 노드는 원본 서버에 해당하는 리소스를 불러와야 합니다. 캐시 설정과 관련된 내용은 [캐시 만료 설정](https://intl.cloud.tencent.com/doc/product/228/6290)을 참조하십시오.

###  Tencent Cloud는 어떤 캐시 만료 설정을 지원합니까?
Tencent Cloud CDN 은 모든 차원의 캐시 시간 설정, 사용자 정의 우선순위 조정, Cache 상속 정책(고급 캐시 구성)을 지원합니다. 합리적으로 캐시 시간을 설정하고, 유효 히트율을 상승시키고, 리턴율 낮추고, 사용자의 대역폭을 절약합니다.

### CDN의 일반적인 캐시 사양은 무엇입니까?
도메인 이름 엑세스 시, 일반적으로 아래의 구성이 있습니다.
- 외부 원본 도메인 이름 액세스: 모든 파일의 캐시 만료 시간 기본값은 30일이지만 동적 파일(예 .php .jsp .asp .aspx) 의 기본값은 0으로 이러한 동적 파일은 요청을 받으면 직접 원본 가져오기를 진행합니다.
- COS 원본 도메인 이름 액세스: 모든 파일의 캐시 만료 시간 기본값은 30일입니다.
- 고급 캐시 만료 설정은 기본적으로 비활성화 되었습니다.

### 캐시 상속 정책은 무엇입니까?
사용자가 당신에게 어떤 비지니스 리소스를 요청 했을 때, 원본 서버에 대응하는 Response HTTP Header 중 Cache-Control 필드가 존재할 때 기본 정책은 다음과 같습니다.
- Cache-Control 필드는 max-age로, 해당 리소스의 캐시 시간은 설정한 캐시 시간을 기준으로 합니다. Max-age 지정 시간은 상속하지 않습니다.
- Cache-Control 필드는 no-Cache 혹은 no-store로써, 이때 CDN 노드는 해당 리소스에 캐시 하지 않습니다.

### 캐시의 매칭 방식은 무엇입니까?
많은 캐시 전략을 설정했을 때, 서로 간에 중복이 있을 수 있습니다. 항목 나열표의 설정은 낮은 부분의 우선순위가 높은 부분의 우선순위 보다 높게 되어 있습니다. 어떤 도메인 이름이 아래의 캐시 설정을 설정했다고 가정합니다.
```
모든 파일은 30일입니다.
.php .jsp .aspx 0초
.jpg .png .gif 300초
/test/*.jpg 400초
/test/abc.jpg 200초
```

도메인 이름을 `www.test.com`로 가정하면, 리소스는 `www.test.com/test/abc.jpg`이고 매칭 방식은 아래와 같습니다.
1. 첫 번째 모든 파일과 매칭, 명중, 이 때 캐시 시간 30일
2. 두 번째와 매칭, 명중하지 못함
3. 세 번째와 매칭, 명중, 이 때 캐시 시간 300초
4. 네 번째와 매칭, 명중, 이 때 캐시 시간 400초
5. 다섯 번째와 매칭, 명중, 이 때 캐시 시간 200초

따라서 최종 캐시 시간은 200초이며, 마지막 1회 매칭이 유효합니다.
