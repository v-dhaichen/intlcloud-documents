

## 1. CVM 인스턴스 생성과 구성
파일 시스템에 접근하려면 파일 시스템을 Linux 또는 Windows를 기반으로 한 Tencent Cloud CVM 인스턴스에 탑재해야 합니다. 이 절차에서 Linux에 기반한 Tencent Cloud CVM 인스턴스를 생성 및 구성하게 됩니다. Windows에 기반한 CVM을 사용하고 싶다면 문서 [CFS로 네트워크 파일 시스템 생성(Windows)](/doc/product/582/11524)을 참조하십시오. 이미 CVM 인스턴스를 생성하였다면 단계 2 [파일 시스템 및 탑재 지점 생성](#1)으로 점프하십시오.

Tencent Cloud 홈페이지에 로그인하여 [클라우드 제품]>[컴퓨팅과 네트워크]>[CVM]을 선택하고 [바로 구매]를 클릭해 [CVM 구매 페이지](https://buy.cloud.tencent.com/buy/cvm)에 진입합니다.
### 1. 지역과 모델 선택
![](//mc.qcloudimg.com/static/img/3ed8bab8cce3dde578a6e3fb14267ea5/image.png)
- 연/월정액 또는 사용량 기반 요금제 모드를 선택합니다. 사용량 기반 요금제 CVM을 구입할 수 없는 사용자는 우선 [실명 인증](https://console.cloud.tencent.com/developer/auth)을 완성하십시오. 더 많은 정보는 [요금제 설명](/doc/product/213/2180)을 참조하십시오.
- 지역과 가용 영역을 선택합니다. 여러 대의 CVM이 필요할 경우, 다른 가용 영역을 선택하면 재해 복구를 실현할 수 있습니다.
- 모델과 구성을 선택합니다. 인스턴스 유형에 대한 상세한 설명은 [인스턴스 유형 개요](/doc/product/213/7153)를 참조하십시오.


### 2. 이미지 선택
![](//mc.qcloudimg.com/static/img/fd40922e47525453a58de73d0ffa266c/image.png)
- 이미지 제공업체를 선택합니다. Tencent Cloud는 공공 이미지, 사용자 지정 이미지, 공유 이미지, 서비스 시장을 제공합니다. [이미지 유형](/doc/product/213/4941)을 참조하여 선택할 수 있습니다. 이제 막 Tencent Cloud 사용을 시작한 사용자는 공공 이미지를 선택하길 추천합니다.
- 운영체제를 선택합니다. Tencent Cloud는 CentOS, CoreOS, Debian, FreeBSD, OpenSUSE, SUSE, Ubuntu 등 운영체제를 제공합니다. 후속 실행 환경은 스스로 구축하십시오.
- 시스템 버전을 선택합니다. 

### 3. 저장과 네트워크 선택
![](//mc.qcloudimg.com/static/img/e95a5bf7bf47c60f43dd0ee62946b67a/image.png)
- 디스크 유형과 데이터 디스크 크기를 선택합니다.
Tencent Cloud는 클러우드 디스크와 로컬 디스크 두 가지 유형(모두 기본적으로 50GB 시스템 디스크이며, 시스템 디스크 크기는 임의 선택)을 제공합니다.
  - 클라우드 디스크: 디스크 1개당 백업 3개의 분산식 저장 방식으로 데이터 신뢰성이 높습니다.
  - 로컬 디스크: CVM 소재 물리적 컴퓨터의 저장 장치로 지연이 낮지만 단일 실패 지점 리스크가 존재합니다. 구체적인 비교는 [제품 분류](/doc/product/362/2353)를 참조하십시오.
- 네트워크 유형을 선택합니다.
Tencent Cloud는 기본 네트워크 또는 VPC 두 가지 옵션을 제공합니다.
 - 기본 네트워크: 초보자에게 적합하며 동일한 사용자의 CVM은 사설망을 통해 상호 연결됩니다.
 - VPC: 고급 사용자에게 적합하며 다른 VPC 사이의 로직은 격리됩니다.
- 공중망 대역폭을 선택합니다
Tencent Cloud는 대역폭 기반 요금제 또는 트래픽 기반 요금제 두 가지를 제공합니다.
 - 대역폭 기반 요금제: 고정 대역폭을 선택하며 이를 초과할 시 패킷이 손실됩니다. 네트워크 파동이 작은 환경에 적합합니다.
 - 트래픽 기반 요금제: 실제 사용한 트래픽에 따라 비용을 받습니다. 대역폭 피크값을 제한하여 의외 트래픽으로 인한 비용 발생을 피할 수 있으며, 일시적으로 대역폭이 해당 값을 초과하면 패킷이 손실됩니다. 네트워크 파동이 큰 환경에 적합합니다.
- 서버 수량을 선택합니다.
- 구매 시간과 갱신 방식을 선택합니다(연/월정액 요금제 CVM만 해당).

### 4. 정보 구성
![](//mc.qcloudimg.com/static/img/1c463db6e3b31abd6c1d3163f1c3108f/image.png)
- CVM 서버 명명: 생성 후 명명하거나 즉시 명명할 수 있습니다.
- 로그인 정보 설정:
 - 비밀번호 설정: CVM 서버 비밀번호를 입력하십시오.
 - 즉시 키 연결: SSH 키를 연결합니다. 키가 없거나 현재 키가 올바르지 않은 경우, [바로 생성] 버튼을 클릭하여 생성할 수 있습니다. [키 생성](/doc/product/213/516#1) 가이드를 참조하십시오. SSH 키에 대한 더 많은 설명은 [SSH 키](/doc/product/213/503)를 참조하십시오.
 - 비밀번호 자동 생성: 자동 생성한 비밀번호는 내부 메시지 방식으로 발송됩니다.
- 보안 그룹 선택(**로그인 포트 22 개방 확보**, 더 많은 정보는 [보안 그룹](/doc/product/213/5221))을 참조하십시오.

[바로 구매] 버튼을 클릭하여 지불을 완료하면 [콘솔](https://console.cloud.tencent.com/cvm/)로 이동해 CVM을 수령할 수 있습니다.
CVM을 생성하면 내부 메시지를 받게 되며, 인스턴스 이름, 공인 IP 주소, 사설 IP 주소, 로그인 이름, 초기 로그인 비밀번호 등 정보가 포함되어 있습니다. 이 정보를 사용하여 인스턴스 로그인 및 관리할 수 있습니다.
 

<span id="1"></span>
## 2. 파일 시스템 및 탑재 지점 생성

1. Tencent Cloud [콘솔](https://console.cloud.tencent.com/)에 진입하여 [클라우드 제품]>[스토리지]>[CFS]를 클릭하면 CFS 콘솔에 진입할 수 있습니다.
![](//mc.qcloudimg.com/static/img/4fee6ea61cfba11927f6891527237610/image.png)

2. Tencent Cloud CFS 콘솔에서 [생성]을 클릭하면 파일 시스템 생성 팝업창이 표시됩니다. 파일 시스템 생성 팝업창에 관련 정보를 입력하고 오류가 없음을 확인한 뒤 [확인]을 클릭하면 파일 시스템이 생성됩니다.
![](https://main.qcloudimg.com/raw/3797c04469bf0da994d2e2876a2a39ad.png)
 - 이름: 생성한 파일 시스템을 명명할 수 있습니다.
 - 지역과 가용 영역: 클라이언트와 가까운 지역은 접근 지연 현상을 줄여 다운로드 속도를 향상시킬 수 있습니다.
 - 파일 프로토콜: NFS(Linux, Unix 클라이언트에 더욱 적합함), CIFS/SMB(Windows 클라이언트에 더욱 적합함)
 - 네트워크 유형: Tencent Cloud는 기본 네트워크와 VPC 두 가지를 제공합니다. 기본 네트워크는 초보자에게 적합하며 동일 사용자의 CVM은 사설망을 통해 상호 연결됩니다. VPC는 고급 사용자에게 적합하며 다른 VPC 사이의 로직은 격리됩니다.
  	
 > **주의:**
 > 자신의 CVM 인스턴스 소재 네트워크에 따라 파일 시스템을 생성 및 탑재합니다.
 > - VPC의 CVM에서 파일 시스템을 공유하려면 파일 시스템을 생성할 때 VPC를 선택해야 합니다. 파일 시스템이 VPC에 속할 경우, 특별한 네트워크 설정을 진행하지 않았다면 동일 VPC 내 CVM 인스턴스만 탑재할 수 있습니다.
 > - 기본 네트워크의 CVM에서 파일 시스템을 공유하려면 파일 시스템을 생성할 때 기본 네트워크를 선택해야 합니다. 파일 시스템이 기본 네트워크에 속할 경우, 특별한 네트워크 설정을 진행하지 않았다면 동일 기본 네트워크 내 CVM 인스턴스만 탑재할 수 있습니다.
 > - 여러 네트워크에서 파일 시스템을 공유하려면 [가영 영역 간/네트워크 간 접근 가이드](/doc/product/582/9764)를 참조하십시오.

3. 탑재 지점 정보를 획득합니다. 파일 시스템 및 탑재 지점 생성 완료 후, 인스턴스 ID를 클릭하고 파일 시스템 세부 정보에 진입하여 [탑재 지점 정보]를 클릭하면 Linux의 탑재 명령을 획득합니다.

NFS 파일 시스템 탑재 지점 정보는 다음과 같습니다.
![](https://mc.qcloudimg.com/static/img/f50435216defb4083874bc78d568001e/image.png)

CIFS/SMB 파일 시스템 탑재 지점 정보는 다음과 같습니다. 
![](https://main.qcloudimg.com/raw/939aafe4bca9907bc391d41e8798c4a6.png)



## 3. 인스턴스 연결
이제 일반적인 Linux CVM 로그인 방법을 소개합니다. 상황에 따라 다른 로그인 방식을 사용할 수 있으며 여기에서는 콘솔을 통한 로그인을 소개합니다. 더 많은 로그인 방식은 [Linux 인스턴스 로그인](/doc/product/213/5436)을 참조하십시오.

**전제 조건**
CVM에 로그인하려면 관리자 계정과 비밀번호를 사용해야 합니다.
 - 관리자 계정: Linux 유형의 인스턴스에 대해 관리자 계정은 root(Ubuntu 시스템 사용자는 ubuntu)로 통일됩니다.
 - 비밀번호: 비밀번호는 CVM 구매 시 설정한 비밀번호입니다.

**콘솔을 통한 CVM 로그인**
- CVM 목록의 작업열에서 [로그인] 버튼을 클릭하면 VNC을 통해 Linux CVM에 연결할 수 있습니다.
![](//mc.qcloudimg.com/static/img/73cc4f9f702f80d95717c7a35063ab41/image.png)
- 계정(root, Ubuntu 시스템 사용자는 ubuntu)과 비밀번호를 입력하면 바로 로그인할 수 있습니다.

> **주의:**
>해당 터미널은 독점적이며 동일한 시간에 한 명의 사용자만 콘솔을 사용하여 로그인할 수 있습니다.


**네트워크 통신 확인**
탑재 전, 클라이언트와 파일 시스템의 네트워크 연결을 확인해야 합니다. telnet 명령을 통해 확인할 수 있습니다. 각 프로토콜 및 클라이언트의 개방 포트 정보는 다음과 같습니다.

파일 시스템 프로토콜 | 클라이언트 개방 포트 | 네트워크 연결 확인
------- | ------- | ---------
NFS 3.0 | 111, 892, 2049 |  telnet 111 또는 892 또는 2049
NFS 4.0 | 2049 |  telnet 2049
CIFS/SMB | 445 |  telnet 445 

참고: CFS는 ping을 지원하지 않습니다.

## 4. 파일 시스템 탑재
### NFS 파일 시스템 탑재

#### 1. NFS 클라이언트 시작
탑재 전 시스템에 `nfs-utils` 또는 `nfs-common`이 설치되어 있는지 확인하십시오. 설치 방법은 다음과 같습니다.
- CentOS: 
```
sudo yum install nfs-utils
```
- Ubuntu 또는 Debian: 
```
sudo apt-get install nfs-common
```

#### 2. 탑재 대기 대상 디렉터리 생성
아래 명령을 사용하여 탑재 대기 대상 디렉터리를 생성합니다.
```
mkdir <탑재 대기 대상 디렉터리>
```
예시:
```
mkdir /local/
mkdir /local/test
```

#### 3. 탑재
**NFS v4.0 탑재**
아래 명령을 사용하여 NFS v4.0을 탑재합니다.
```
sudo mount -t nfs -o vers=4 <탑재 지점 IP>:/ <탑재 예정 대상 디렉터리>
```
- 탑재 지점 IP: 파일 시스템을 생성할 때 자동 생성된 탑재 지점 IP를 가리킵니다.
- 현재 기본적으로 파일 시스템의 루트 디렉터리 "/"으로 탑재됩니다. 파일 시스템에 서브 디렉터리를 생성하면 해당 서브 디렉터리로 탑재할 수 있습니다.
- 탑재 대기 대상 디렉터리: 현재 서버에서 탑재해야 할 대상 디렉터리로 사용자가 사전에 생성해야 합니다.

> **주의:**
> `<탑재 지점 IP>:/`와`<탑재 대기 대상 디렉터리>` 사이에 한 칸 띄어써야 합니다.


예시:
- CFS 루트 디렉터리 탑재:
```
sudo mount -t nfs -o vers=4 10.0.0.1:/ /local/test
```
- CFS 서브 디렉터리 subfolder 탑재:
```
sudo mount -t nfs -o vers=4 10.10.19.12:/subfolder /local/test
```

 ![](https://mc.qcloudimg.com/static/img/03550214c0499438e86cfd64b3c377b8/image.png)

**NFS v3.0 탑재**
아래 명령을 사용하여 NFS v3.0을 탑재합니다.
```
sudo mount -t nfs -o vers=3,nolock,proto=tcp <탑재 지점 IP>:/<FSID> <탑재 예정 대상 디렉터리>
```
- 탑재 지점 IP: 파일 시스템을 생성할 때 자동 생성된 탑재 지점 IP를 가리킵니다.
- NFS v3.0은 서브 디렉터리 탑재만 지원하며 디폴트 파일 시스템 서브 디렉터리는 FSID입니다.
- 탑재 대기 대상 디렉터리: 현재 서버에서 탑재해야 할 대상 디렉터리로 사용자가 사전에 생성해야 합니다.
예시

> **주의:**
> `<탑재 지점 IP>:/<FSID>`와 `<탑재 대기 대상 디렉터리>` 사이에 한 칸 띄어써야 합니다.


예시:
- CFS 서브 디렉터리 subfolder 탑재:
```
mount -t nfs -o vers=3,nolock,proto=tcp 10.10.19.12:/z3r6k95r /local/test
```
![](https://mc.qcloudimg.com/static/img/03550214c0499438e86cfd64b3c377b8/image.png)

#### 4. 탑재 지점 정보 보기
탑재 완료 후 다음 명령을 사용하여 이미 탑재한 파일 시스템을 확인하십시오.
```
mount -l
```
다음 명령을 사용하여 해당 파일 시스템의 용량 정보를 확인할 수도 있습니다.
```
df -h
```
### CIFS/SMB 파일 시스템 탑재
#### 1. CIFS 클라이언트 시작
탑재 전 시스템에 `cifs-utils`가 설치되어 있는지 확인하십시오. 설치 방법은 다음과 같습니다.
CentOS:
```
sudo yum install cifs-utils.x86_64 –y
```


#### 2. 탑재 대기 대상 디렉터리 생성
아래 명령을 사용하여 탑재 대기 대상 디렉터리를 생성합니다.
```
mkdir <탑재 대기 대상 디렉터리>
```
예시:
```
mkdir /local/
mkdir /local/test
```

#### 3. 탑재
아래 명령을 사용하여 CIFS를 탑재합니다.
```
mount -t cifs -o guest //<탑재 지점 IP>/<FSID> /<탑재 대기 대상 디렉터리>
```
- 탑재 지점 IP: 파일 시스템을 생성할 때 자동 생성된 탑재 지점 IP를 가리킵니다.
- 현재 기본적으로 파일 시스템의 FSID를 사용하여 탑재합니다. 
- 탑재 대기 대상 디렉터리: 현재 서버에서 탑재해야 할 대상 디렉터리로 사용자가 사전에 생성해야 합니다.

> **주의:**
> `<FSID>`와 `/<탑재 대기 대상 디렉터리>` 사이에 한 칸 띄어써야 합니다.

예시:

```
mount -t cifs -o guest //10.66.168.75/vj3i1135  /local/test
```

 ![](https://main.qcloudimg.com/raw/939aafe4bca9907bc391d41e8798c4a6.png)

#### 4. 탑재 지점 정보 보기
탑재 완료 후 다음 명령을 사용하여 이미 탑재한 파일 시스템을 확인하십시오.
```
mount -l
```
다음 명령을 사용하여 해당 파일 시스템의 용량 정보를 확인할 수도 있습니다.
```
df -h
```

### 5. 공유 디렉터리 탑재 해제
상황에 따라 공유 디렉터리를 탑재 해제하려면 다음 명령을 사용하십시오. 그 중 '디렉터리 이름'은 루트 디렉터리 또는 파일 시스템의 완전 경로가 됩니다.
```
umount <디렉터리 이름>
```

예시: 
```
umount /local/test
```


## 5. 리소스 중지
Tencent Cloud 콘솔로 손쉽게 CVM 인스턴스와 파일 시스템을 중지할 수 있습니다. 비용이 계속 발생되지 않도록 사용하지 않는 리소스는 중지하는 것이 가장 좋습니다.
1. Tencent Cloud 인스턴스를 중지합니다. Tencent Cloud CVM [콘솔](https://console.cloud.tencent.com/cvm/index)에 진입해 중지해야 할 인스턴스를 선택하고 [더 보기]>[CVM 상태]를 클릭하여 [폐기]를 선택해 CVM 인스턴스를 중지할 수 있습니다.
![](//mc.qcloudimg.com/static/img/76c588284e3b525702d748b5cd7b8b00/image.png)
2. 파일 시스템을 중지합니다. Tencent Cloud CFS [콘솔](https://console.cloud.tencent.com/cfs)에 진입해 중지할 파일 시스템을 선택하고 [삭제] 클릭 후 [확인]하면 파일 시스템을 삭제할 수 있습니다.
![](//mc.qcloudimg.com/static/img/28cade4807a283ffdcb1fc2a39a7ad88/image.png)



