## 작업 시나리오

CVM를 처음 구성할 경우 보안 그룹을 생성하거나 콘솔의 보안 그룹 페이지에서 보안 그룹 생성, 조회, 업데이트 및 삭제 등의 작업을 진행할 수 있습니다. 이와 동시에, 보안 그룹 및 보안 그룹 규칙 관리도 할 수 ​있습니다. 본 문서는 콘솔에서 보안 그룹 작업을 진행하는 방법에 대해 소개합니다.

## 전제 조건

[Tencent CVM 콘솔](https://console.cloud.tencent.com/cvm/index)에 로그인되어 있어야 합니다.

## 작업 순서

### 보안 그룹 생성
> 보안 그룹을 생성할 경우 Tencent Cloud에서 제공하는 "**모든 포트 개방**" 및 "**22, 80, 443, 3389 포트와 ICMP 프로토콜 개방**" 템플릿 두 가지 중 선택하여 생성할 수 있습니다. 사용자 정의 템플릿을 선택하여 생성할 수도 있습니다.
>
#### Tencent Cloud 템플릿을 통해 생성할 경우
1. 왼쪽 사이드바에서 [[보안 그룹](https://console.cloud.tencent.com/cvm/securitygroup)]을 선택하여 [+생성]을 클릭하십시오.
2. 팝업된 "보안 그룹 생성" 창에서 실제 필요에 따라 "**모든 포트 개방**" 또는 "**22, 80, 443, 3389 포트와 ICMP 프로토콜 개방**" 템플릿 중 하나를 선택한 뒤, 보안 그룹 이름을 입력하고 세부 항목을 설정하십시오
3. [확인]을 클릭하여 생성을 완료하십시오.

#### 사용자 정의 템플릿을 통해 생성할 경우
1. 왼쪽 사이드바에서 [[보안 그룹](https://console.cloud.tencent.com/cvm/securitygroup)]을 선택하여 [+생성]을 클릭하십시오.
2. 팝업된 "보안 그룹 생성" 창에서 "사용자 정의' 템플릿을 선택하여 보안 그룹 이름을 입력하고 세부 항목을 설정한 뒤, [확인]을 클릭하십시오.
3. 팝업된 알림창에서 [규칙 설정]을 클릭하십시오. 규칙 설정에 대한 자세한 내용은 아래의 보안 그룹 규칙 추가 문서를 참조하십시오.

### 보안 그룹 규칙 추가
1. "보안 그룹 규칙" 페이지에서 실제 필요에 따라 "인바운드 규칙"과 "아웃바운드 규칙"에 대한 [규칙 추가]를 클릭하십시오.
2. 팝업된 "인바운드/아웃바운드 규칙 추가" 창에서 규칙을 설정하고 [완료]를 클릭하십시오.
규칙을 추가하는 주요 파라미터는 다음과 같습니다.
 - **유형**: 시스템의 규칙 템플릿 또는 사용자 정의 규칙 중 선택할 수 있습니다.
 - **소스/타깃**: 트래픽 소스(인바운드 규칙) 또는 타깃(아웃바운드 규칙)에서 다음 옵션 중 하나를 지정할 수 있습니다.
    - 지정된 단일 IP 주소 또는 IP 주소 범위: CIDR 표기법을 사용하여 ‘203.0.113.0’ 또는 ‘203.0.113.0/24’ 처럼 표기합니다.
    - 보안 그룹 ID를 참조하면 다음 보안 그룹 ID 중 하나를 참조할 수 있습니다.
      - 현재 보안 그룹(보안 그룹과 관련된 CVM를 표시합니다)
      - 그 외 보안 그룹, 동일한 리전의 동일한 프로젝트에 있는 다른 보안 그룹 ID를 지칭합니다.
    - [파라미터 템플릿](https://cloud.tencent.com/document/product/215/20090)에서 IP 주소 객체 또는 IP 주소 그룹 객체를 참조할 수 있습니다. 
 - **프로토콜 포트**: 프로토콜 유형과 포트 범위를 입력하면 [파라미터 템플릿](https://cloud.tencent.com/document/product/215/20090)의 프로토콜 포트 또는 프로토콜 그룹을 참조할 수 있습니다.
 - **정책**: 허용 또는 거부

>
>- 보안 그룹 ID 참조는 고급 기능이며 사용 여부를 선택할 수 있습니다. 참조된 보안 그룹의 규칙은 현재 보안 그룹에 추가되지 않습니다.
>- 보안 그룹 규칙 생성 시 소스/타깃에 보안 그룹 ID를 입력할 경우 보안 그룹 ID가 바인딩된 CVM 인스턴스와 ENI의 개인 IP 주소가 소스/타깃으로 사용됩니다. 공용 IP 주소는 포함되지 않습니다.

### 보안 그룹 규칙 수정
> 실제 필요에 따라 이미 설정된 보안 그룹의 규칙을 수정할 수 있습니다.
>
1. [[보안 그룹](https://console.cloud.tencent.com/cvm/securitygroup)] 관리 페이지에 진입한 뒤, 규칙 수정이 필요한 보안 그룹 ID/이름을 선택하고, 오른쪽에 위치한 [규칙 수정]을 클릭하십시오.
2. 수정할 "보안 그룹 규칙" 페이지에서 실제 필요에 따라 규칙을 **편집**, **삭제** 또는 **삽입**하여 규칙의 우선 순위를 조정하십시오. 보안 그룹 규칙의 우선 순위는 **위치가 높을수록 우선 순위도 높습니다.**

### 보안 그룹에 인스턴스 연결

1. [[보안 그룹](https://console.cloud.tencent.com/cvm/securitygroup)] 관리 페이지에 진입한 후, 연결이 필요한 보안 그룹을 선택하고, [인스턴스 관리]를 클릭해 인스턴스 연결 페이지에 진입하십시오.
2. "인스턴스 연결" 페이지에서 [연결 추가]를 클릭하십시오.
3. 팝업된 "인스턴스 연결 추가" 창에서 보안 그룹에 연결할 1개 또는 여러 개의 인스턴스를 선택한 뒤, [확인]을 클릭하여 보안 그룹과 관련된 인스턴스를 추가하십시오.

### 보안 그룹 복사 또는 삭제

[[보안 그룹](https://console.cloud.tencent.com/cvm/securitygroup)] 관리 페이지에 진입한 뒤 복사 또는 삭제가 필요한 보안 그룹을 선택하고, [더보기]를 클릭하여 [복사] 또는 [삭제]를 선택하십시오.

- 보안 그룹 **복사**를 선택할 경우 기본으로 보안 그룹의 인바운드/아웃바운드 규칙만 복사되며, 보안 그룹과 관련된 인스턴스는 복사되지 않습니다.
-보안 그룹 **삭제**를 선택할 경우 삭제할 보안 그룹에 연결된 인스턴스가 존재하는지 확인하십시오. 만약 연결된 인스턴스가 존재할 경우 연결된 인스턴스를 **보안 그룹에서 제거해야 합니다.**([인스턴스 관리]클릭) 제거하지 않으면 보안 그룹 삭제 작업이 실행되지 않습니다.

### 보안 그룹 규칙 가져오기/내보내기

1. [[보안 그룹](https://console.cloud.tencent.com/cvm/securitygroup)] 관리 페이지에 진입해 가져오기/내보내기가 필요한 보안 그룹을 선택하여 [규칙 수정]을 클릭한 뒤, 보안 그룹 관리 페이지에 진입하십시오.
2. [보안 그룹 규칙]>[인바운드 규칙] 또는 [아웃바운드 규칙] 탭을 선택하고 [규칙 가져오기]를 클릭하십시오.
> 
>- 이미 기존 규칙이 있을 경우 기존 규칙을 먼저 내보내기 할 것을 권장합니다. 그렇지 않으면 가져오기를 진행한 새로운 규칙이 기존 규칙을 덮어쓰기 할 수 있습니다.
>- 기존 규칙이 공백 상태일 경우 먼저 템플릿을 내보내기 한 다음 템플릿 파일을 편집한 후에 파일을 다시 가져오기 할 수 있습니다.
> 
3. 팝업된 "**대량 가져오기-인바운드/아웃바운드 규칙**" 창에서 편집이 완료된 인바운드/아웃바운드 규칙의 템플릿 파일을 선택한 뒤, [가져오기 시작]을 클릭하십시오.

### 보안 그룹 API 사용

CVM 콘솔 외에도 보안 그룹 API를 통해 보안 그룹 작업을 진행할 수 있습니다. 자세한 내용은 [보안 그룹 API](https://cloud.tencent.com/document/product/213/12447)를 참조하십시오.
