When you need to encrypt the data stored in a cloud disk due to business security or compliance reasons, you can enable the cloud disk encryption function, and use the infrastructure provided by the [Key Management Service (KMS) of Tencent Cloud](https://intl.cloud.tencent.com/product/kms) to effectively protect the privacy of the data.
>This function is currently available in the beta version. To use it, [submit a ticket](https://console.cloud.tencent.com/workorder/category) to apply for it.
>

## Key Management
Tencent Cloud encrypts data in your cloud disk using a data key based on the standard AES-256 algorithm in the industry. When you use the cloud disk encryption function for the first time, the system automatically creates a customer master key (CMK) that allows you to use the cloud disk encryption function in the corresponding region in the KMS. Only one CMK is automatically created and stored in the KMS. Access to the KMS is protected by strict physical and logical security controls.
In each region, a unique 256-bit data key (DK) is used to perform the cloud disk encryption. Snapshots created for cloud disk encryption and the encrypted cloud disks created using these encryption snapshots are all associated with the DK. The DK is protected by the key management infrastructure provided by the KMS. It can effectively block unauthorized access. The DK of a cloud disk is only used in the memory of the host where the instance resides, and is not stored in any persistent medium (including the cloud disk itself) in a plaintext form.

## Operating Principles
When you set your cloud disk as an encrypted cloud disk, the KMS encrypts data and automatically decrypts the data when it is read. The encryption and decryption processes are performed on the host where the CVM instance resides, and has minimal impact on the read and write performance of the cloud disk. To conduct a performance test on the cloud disk, refer to [Measuring Cloud Disk Performance](https://intl.cloud.tencent.com/document/product/362/6741).

Once the encrypted cloud disk is created and mounted to the instance, the system encrypts the following data:
- Static data in the cloud disk;
- Data transmitted between the cloud disk and instance (data in the operating system of the instance is not encrypted);
- All snapshots created during cloud disk encryption.

## Use Limits
The cloud disk encryption function is subject to the following limitations:

<table>
	<tr>
	<th width="20%">Limitation</th>
	<th>Description</th>
	</tr>
	<tr>
	<td>Limitations related to cloud disks</td>
	<td><ul class="params">
	<li>Cloud disk encryption supports all cloud disk types and instance types.</li>
	<li>Only cloud disks but not local disks can be encrypted.</li>
	<li>Only data disks but not system disks can be encrypted.</li>
	<li>A non-encrypted disk cannot be directly converted to an encrypted disk.</li>
	<li>An encrypted cloud disk cannot be converted to a non-encrypted cloud disk.</li>
	</ul></td>
	</tr>
	<tr>
	<td>Limitations related to snapshots and images</td>
	<td><ul class="params">
	<li>An existing snapshot generated by a non-encrypted disk cannot be directly converted to an encrypted snapshot.</li>
  <li>An encrypted snapshot cannot be converted to a non-encrypted snapshot.</li>
	<li>An image with an encrypted snapshot cannot be shared.</li>
	<li>The encrypted snapshot and image created during snapshot encryption cannot be replicated across regions.</li>
	</ul></td>
	</tr>
	<tr>
	<td>Other limitations</td>
	<td><ul class="params">
	<li>The cloud disk encryption function relies on the KMS in the same region. If you have no other operation requests, you do not need to perform additional operations in the KMS console.</li>
	<li>When you use the cloud disk encryption function for the first time, you must activate the KMS as instructed on the page. Otherwise, you cannot purchase the encrypted cloud disk.</li>
	<li>In the KMS console, you can query the CMK specially created by the system for cloud disk encryption, but you cannot specify, delete, or change the CMK.</li>
	</ul></td>
	</tr>
</table>







## Fees
You will not be charged for the cloud disk encryption function, CMK, or read/write operations on the data in the cloud disk. However, when you perform a management operation on the encrypted cloud disk either in the console or through an API, the KMS functions as an API and this is therefore considered a KMS call in this region. KMS charging is based on the number of KMS calls. For charging details, see [KMS Charging Overview](https://intl.cloud.tencent.com/document/product/1030/31966).

Management operations on an encrypted cloud disk include:
- Create an encrypted cloud disk
- Mount a cloud disk
- Unmount a cloud disk
- Create a snapshot
- Roll back a snapshot
>Make sure you have sufficient account balance. Otherwise the operation will fail.
>


## Creating an Encrypted Cloud Disk
You can create an encrypted cloud disk using one of following three methods:

### Creating an Encrypted Cloud Disk in the Console
1. Log in to [CBS Console](https://console.cloud.tencent.com/cvm/cbs), select a region, and click **Create**.
2. In the **Purchase Data Disk** dialog box, select the **Encrypted Cloud Disk** option.
>Authorize the key management service first if you are using the encrypted cloud disk in this region for the first time.
>
3. Select the cloud disk configuration based on your actual situation and click **Confirm**.
4. Once you have purchased the cloud disk, you can view the created encrypted cloud disk on the [Cloud Disk List](https://console.cloud.tencent.com/cvm/cbs) page.
The new encrypted cloud disk is in the **to be mounted** state, and you can refer to [Mounting Cloud Disks](https://intl.cloud.tencent.com/document/product/362/5745) to mount the cloud disk to a CVM instance in the same availability zone.

### Creating an Encrypted Cloud Disk from a Snapshot
Refer to [Creating Cloud Disks from Snapshots](https://intl.cloud.tencent.com/document/product/362/5757), and select an encrypted snapshot to create a cloud disk. That is, you can create a cloud disk that already contains the relevant data and is encrypted.

### Creating an Encrypted Cloud Disk Through an API
You can create an encrypted cloud disk by using the [CreateDisks API](https://intl.cloud.tencent.com/document/product/362/16312) in the following ways:
- Set `Encrypt` to `true`.
- Specify a `SnapshotId` for the encrypted snapshot.

## Changing the Data Encryption State
To change the state of the existing data in the cloud disk from non-encrypted to encrypted, we recommend that you run the `rsync` command in the Linux system or the `robocopy` command in the Windows system to copy the data from the non-encrypted disk to the new encrypted disk.
If you need to change the state of the existing data in the cloud disk from encrypted to non-encrypted, we recommend that you run the same command to copy the data from the encrypted disk to the new non-encrypted disk.


<style>
	.params{margin-bottom:0px !important;}
</style>





