## 事象の説明
スケーリング処理を実行する場合、いくつかの原因により失敗になる可能性があります。スケーリング処理を正常に動作するために、適時に注意して対応する必要があります。
[スケーリンググループ](https://console.cloud.tencent.com/autoscaling/group)でスケーリンググループ状態を表示することができます。もし、お客様のスケーリンググループ状態に<img style="margin:-3px 0;" src="https://main.qcloudimg.com/raw/df9771a6e2211e3f418ce257051313c3.png">旨のヒントがあれば、このスケーリンググループの最後のスケーリング処理が失敗になったことです。

>通知アイコンにマウスカーソルを合わせたときに、具体的な異常の原因をチェックすることができます。
>

## 問題分析
### 原因説明の確認
Tencent Cloud ASは業界に最も知能なスケーリンググループ処理の失敗原因を確認する方法を提供しております。以下の手順に従ってスケーリング処理失敗の原因を確認できます：
1.[スケーリンググループリスト](https://console.cloud.tencent.com/autoscaling/group)の中に失敗になったスケーリング処理IDをクリックしてください。
2.こちらのスケーリンググループの詳細画面に、【スケーリング処理】を選択すると、処理情報を確認することができます。下図に示すように：
![](https://main.qcloudimg.com/raw/f6a022c51ec8ed3931efd5b7d3902aad.png)

### 次の操作ガイドご参考ください
スケーリング処理の失敗原因に基づいて対応する操作を行います。通常の失敗原因は下記の通りです。


### スケーリング処理の失敗原因
スケーリング処理が失敗になる原因は以下のカテゴリに分類されます：
 - [CVM関連](#cvm)
 - [イメージ関連](#mirror)
 - [ネットワーク関連](#net)
 - [CBS関連](#cbs)
 - [LBS関連](#load)
 - [その他](#other)





### 故障処理

<span id="cvm"></span>
### CVM関連
#### CVM売り切れ
故障原因：指定したリソースインベントリが不足です。
対処方法：起動設定の中、複数モデルを設定することができます。お客様の状況により、他のインスタンスの仕様またはアベイラビリティーゾーンを選択してください。

#### 該当のアベイラビリティーゾーンに、CVMモデルが無効になる
故障原因：指定したインスタンスの仕様が既に販売終了しました。
対処方法：起動設定の中、販売中のインスタンス仕様を選択してください。より詳細な説明を[インスタンス仕様](https://intl.cloud.tencent.com/document/product/213/11518)をご参照ください。

#### CVMとCBSの組み合わせが無効になる
故障原因：該当のシステムディスクは、このモデルのインスタンスをサポートしていません。
対処方法：スケーリング設定を確認して、システムディスクのタイプを修正してください。高性能CBS/SSD CBSを推奨します。

#### CVMの購入クォータが足りない
故障原因：各ユーザーはCVMの購入クォータあるため、従量課金 CVMのデフォルトクォータについて[従量課金 CVM インスタンスの購入制限](https://intl.cloud.tencent.com/document/product/213/2664)を参照してください。
クォータを超える場合には、ASはCVMを作成することができません。
対処方法：スケールアウトCVMの数を削減したり、あるいは[作業依頼書サブミット](https://intl.cloud.tencent.com/document/product/213/2664)を通して、クォータの追加を申請してください。

#### CVMモデルが存在しない
故障原因：起動設定の中に定義したモデルが不正あるいは販売終了です。
対処方法：該当の起動設定を交換してください。

<span id="mirror"></span>
### イメージ関連
#### イメージが存在しない
故障原因：イメージが存在しないまたは失効しました。
対処方法：起動設定中の関連設定を確認してください。

#### イメージがシステムディスク容量を超える
故障原因：システムディスク容量はイメージのファイルサイズより小さいです。
対処方法：起動設定を確認し、システムディスク容量を増加するまたは小さいキャパシティーのイメージを使用してください。

<sapn id="net"></span>
### ネットワーク関連
#### VPCのみサポートする
故障原因：起動設定の中にVPCのみサポートするモデルを選びました。
対処方法：このモデルを基幹ネットワークに利用しないでください。起動設定の中にこのモデルの選択を解除してください。

#### VPCサブネット内のIP数はスケールアウトするインスタンスの数より少ない
故障原因：VPCサブネット内のIPの数が制限されています。
対処方法：サブネットを新規作成して、そのIPレンジの範囲(CIDR)を拡大してください。


<sapn id="cbs"></span>
### CBS関連の問題
#### CBS売り切れ
故障原因：指定したリソースインベントリが不足です。
対処方法：起動設定の中にデフォルトでCVM機能を設定します。



#### CVMとCBSの組み合わせが無効になる
故障原因：該当のシステムディスクは、このモデルのインスタンスをサポートしていません。
対処方法：スケーリング設定を確認して、システムディスクのタイプを修正してください。高性能CBS/SSD CBSを推奨します。

<sapn id="load"></span>
### CLB関連の問題
#### CLBが存在しない
故障原因：CLBは存在しないまたは失効しました、CLBの関連設定を確認してください。
対処方法：スケーリンググループに関連するCLBインスタンスは、正常状態に動作していることを確保してください。


#### リスナーが存在しない
故障原因：CLBのリスナーが存在しないまたは失効しました、CLBの関連設定を確認してください。
対処方法：スケーリンググループに関連するCLBインスタンスは、正常状態に動作していることを確保してください。

#### 転送パスが存在しない
故障原因：CLBのリスナーは指定されたドメイン名/URLパスに転送します。お客様は作成したドメイン名/URLパスが存在しないまたは失効しました。リスナーCLBの関連設定を確認してください。
対処方法：スケーリンググループに関連するCLBインスタンスは、正常状態に動作していることを確保してください。

#### 指定したCLBがビジー
故障原因：CLBがタスクを実行しています。
対処方法：スケーリンググループ処理の時、矛盾操作を避けるために、手作業はお勧めしません。

<sapn id="other"></span>
### その他の問題
#### ライフサイクルの処理結果が放棄である
故障原因：スケーリンググループはスケールアウトタイプのライフサイクルフックを設定しました。スケーリンググループがスケールアウトする際に、ライフサイクルフックがトリガーされ、そのフックの最終の実行結果が拒否であるため、スケールアウト処理がロールバックされて、スケールアウトしたインスタンスもリリースされます。
対処方法：ライフサイクルフックの実行ポリシーを確認してください。
