## 概要

ASは、監視指標に基づいてスケーリンググループのインスタンス数を動的に拡張することをサポートします。アラームトリガーポリシーを定義する必要があり、すなわち拡張をトリガーする監視指標状態及び需要の変化に応じて拡張することです。

アラームポリシーを作成するには、条件とアクションを指定する必要があります。
- 条件形式は：ある指標+閾値+期間+連続的に閾値に到達するサイクル数です。 つまり、指標はN個の連続サイクルの間で全て閾値に到達しました。
- 実行アクションは：通知の送信+増加/減少　指定された数量のCVMです。

スケーリンググループごとに2つのポリシーを作成することをお勧めする：一つは拡張用、一つは縮小用です。業務量がアラームポリシーで指定された条件に達した後、ASは関連ポリシーを実行して、スケーリンググループを縮小（インスタンスを終了すること）または拡張（インスタンスを起動すること）します。　　　　　

下図に示すように：
![](https://mc.qcloudimg.com/static/img/83557f69f860be57cf464b2b45ab31c5/1.jpg)


## ユースケースの例

例えば、ECウェブサイトアプリケーションがありまして、現在5つのインスタンスを使用しました。あるプロモーションを行い、アクセス量が予想よりも遥かに大きいことが心配して、現在のインスタンスの負荷が70％に上昇した時に2つの新しいインスタンスを起動するように設定し、負荷が40％に低下した時に余分のインスタンスを終了します。スケーリンググループを構成して、これらの条件に基づいて自動的にスケーリングを行います。
![](https://main.qcloudimg.com/raw/97a4db1b251321307f58e4f75057ad00.png)

## 操作手順

1. [コンソール](https://console.cloud.tencent.com/autoscaling/config)を開き、ナビゲーションバーの【スケーリンググループ】を選択します。

2. 修正対象のスケーリンググループを選択し、スケーリンググループIDをクリックして、スケーリンググループの基本情報画面に入ります。
![](https://mc.qcloudimg.com/static/img/cebad1b79ccba9fb9548c2bd2c30a210/2.jpg)

3. 上部にあるナビゲーションバーで【アラームトリガーポリシー】を選択して、その画面でスケーリンググループに関連するアラームトリガーポリシーを管理する。
	- 【新規作成】をクリックして、新しいアラームトリガーポリシーを追加します。
	- 【削除】をクリックして、アラームトリガーポリシーを削除します。
![](https://mc.qcloudimg.com/static/img/570e5bd24b8975c65dd939bc9052d5a3/3.jpg)


## あるサーバーがアラームスケーリングポリシーの影響を受けないように指定する
auto scalingを使用する前に、システムは既に通常のサーバーを利用している可能性があります。以下の理由により、CVMをアラームスケーリングポリシーから削除することは望ましくないです：

- **一台のCVMを多目的に使用される**：クラスター内のあるサーバーは、クラスターの機能以外、他の目的にも使用されます。 例えば、ウェブサイト構築の初期段階では、あるサーバーがキャッシュサーバーとファイルサーバーの両方として使用されます。キャッシュサーバークラスターがスケーリンググループに配置される場合、アラートスケーリングポリシーから削除されることは望ましくないです。

- **データの保存**：サーバーは状態ありの時、あるいは他のサーバーにはないデータを持っています。例えば、クラスター内の他のサーバーによって生成された増分データも統一して当サーバーに保存されます。

- **イメージ/スナップショットの更新**：このサーバーで定期的にイメージとスナップショットを作成します。


**設置方法：**

**step 1** :[スケーリンググループリスト](https://console.cloud.tencent.com/autoscaling)でサーバーが所属されているスケーリンググループをクリックして、管理画面に入ります。

**step 2**：管理画面下部にある「クラウドホストリスト」で、設定対象のクラウドホストに対し「削除保護の設定」をクリックします。
