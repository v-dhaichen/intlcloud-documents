본 솔루션은 클러스터 배포의 웹 사이트/APP에 적합합니다.

서비스가 다음 조건을 충족할 경우 5분간의 솔루션 사양으로 30%의 비용을 절약할 수 있습니다.

- 웹 사이트는 클러스터 방식을 사용하고 클러스터에는 1대 이상의 서버가 존재합니다.
- 웹 사이트에는 긴 유휴 시간이 존재합니다. Tencent Cloud의 통계에 따르면 90%의 클러스터는 새벽 00:00-오전 09:00, 이 9시간 동안 부하가 30% 이하입니다.

대부분 웹 사이트의 피크타임은 8시간을 넘지 않으며 나머지 16시간에 유휴 서버를 완전히 용량 축소할 수 있으므로 많은 비용을 절감할 수 있습니다.

한 레저 관련 웹 사이트를 예로 들면 해당 웹 사이트의 액세스 피크타임은 20:00-24:00사이입니다.

## 솔루션 요약

- 비 피크 타임의 부하에 따라 고정 리소스를 배포하고 CVM 연정액, 월정액제를 사용할 수 있습니다.
- 피크 타임의 부족한 부분은 종량제에 따라 과금하는 CVM을 사용합니다. 예약된 작업을 통해 20:00에 1대를 용량 확장하고 24:00에 용량 축소합니다.

신규 및 기존 솔루션 비교:
![](https://mc.qcloudimg.com/static/img/46cc4300131254282b894c9b1ed691ac/AS-Best+Practise-Cluster+Solution%281%29.png)



## 장점
기존 솔루션에 2대의 쿼드코어 4G CVM이 필요하다고 가정하면, 1대 쿼드코어 4G CVM+하루 4시간의 임시 CVM으로 변경 시 약 30%의 비용을 절감할 수 있습니다.

예시의 웹 사이트 경우 연간 1,500위안을 절감할 수 있습니다.

![](https://main.qcloudimg.com/raw/e0cd53fd8cc1a58e467a2d29646a7616.png)

## 구체적인 작업

용례의 웹 사이트 구조는 비교적 간단하며 애플리케이션 서버당 하나의 클러스터만 있습니다. 복잡한 웹 사이트의 경우 애플리케이션 서버 클러스터, 프런트 엔드 서버 클러스터 및 캐시 서버 클러스터 등이 있고 각각의 클러스터는 모두 하나의 스케일링 그룹에 해당하는 유사한 작업을 수행할 수 있습니다.

![](https://mc.qcloudimg.com/static/img/76238c1b282534b67e80a7e4d04bba17/AS-Best+Practise-Cluster+Solution%282%29.png)


### 1단계. 클러스터 기기의 사용자 지정 이미지 생성

이 단계는 매우 간단하게 1대의 완료된 클러스터 기기를 기반으로 생성하면 됩니다. 상세 정보는 [사용자 지정 이미지 만들기](https://intl.cloud.tencent.com/document/product/213/4942)를 참조하십시오.

> 참고:
> 사전에 이미지 환경을 배포하여 이미지의 애플리케이션이 언제든지 시스템 시작을 작업할 수 있도록 보장하며, 용량 확장된 기기는 수동 조작 없이 직접 작동할 수 있습니다.

### 2단계. 작동 사양 생성

용량 확장할 경우 AS는 작동 사양으로 템플릿에 기기를 생성하기 때문에 사전에 작동 사양을 통하여 리전, 모델 및 미러이미지를 지정합니다.

1. [Auto Scaling 콘솔](https://console.cloud.tencent.com/autoscaling/config)을 로그인하고 사이드바의 [작동 사양]을 클릭하십시오.

2. 프로젝트 및 리전을 선택할 경우 웹 애플리케이션의 프로젝트 및 리전을 주의하여 선택해야 합니다.
![](https://mc.qcloudimg.com/static/img/9a39d87fa90f3ae5995073a6077b1057/1.jpg)


3. 다음 단계는 기기를 구매하는 작업과 유사하므로 지시에 따라 작동 사양 생성을 완료하십시오. 사용자 지정 이미지에서 방금 생성된 이미지를 지정하십시오.
![](https://mc.qcloudimg.com/static/img/02220977468b12ef47c9aeb30a26b06d/2.jpg)



### 3단계. 기기를 위한 스케일링 그룹 생성

[Auto Scaling 콘솔](https://console.cloud.tencent.com/autoscaling)에서 [생성]을 클릭하고 다음과 같이 클러스터 관리 정보를 입력하십시오.

- **이름**: 예를 들어 "애플리케이션 서버 클러스터"와 같이 필요에 따라 이름을 입력하십시오.
-**최소 스케일링 수**: 클러스터 서버 수의 최솟값입니다. 예를 들어 여기에 0을 입력하십시오.
-**최초 용례 수**: 처음으로 스케일링 그룹을 생성할 때 **자동 생성**되는 기기의 수량입니다. 일반적으로 스케일링 그룹을 생성한 직후 기기를 자동으로 생성하지 않으므로 여기에 0을 입력할 것을 권장합니다.
-**최대 스케일링 수**: 클러스터 서버 수의 최댓값으로 필요에 따라 입력하십시오. 예를 들어 5를 입력하면 스케일링 그룹에 최대 5대의 기기가 생성됩니다.
-**작동 사양 **: 방금 생성된 작동 사양을 선택합니다.
-**네트워크 지원** : 세션 서버의 네트워크 환경은 일반적으로 "기본 네트워크"를 선택하면 됩니다.
-**가용 영역 지원** : 용량 확장된 기기는 세션 서버가 위치한 가용 영역에 따라 선택하면 됩니다.
-**삭제 정책**: 기본값을 선택하십시오.
-**Cloud Load Balancer** : 클러스터의 Cloud Load Balancer를 선택하십시오.
![](https://mc.qcloudimg.com/static/img/f3ab676105c79c61ce877b92e4e6ca7c/24.jpg)


마지막으로 [확인]을 클릭하여 생성을 완료하십시오.

### step 4. 스케일링 그룹에 기존 기기 추가

1. [콘솔](https://console.cloud.tencent.com/autoscaling)에서 스케일링 그룹의 이름을 클릭하고 관리 페이지에 들어가서 페이지 하단의 [클라우드 호스트 추가]를 클릭합니다.
![](https://mc.qcloudimg.com/static/img/3ff1beba2621d68ef939d7fd0df2de11/5.jpg)


2. 팝업된 대화 상자에서 클러스터의 기존 서버를 선택하여 스케일링 그룹에 추가하십시오. 비 피크 타임일 경우 클러스터에서 사용률이 낮은 서버를 반환할 수 있으므로 비용을 절감합니다.
![](https://mc.qcloudimg.com/static/img/be11ceec587195b7cf39f9183a051769/6.jpg)


3. 추가한 후 서버를 "용량 축소 제외"로 설정하면, 용량 축소 작업에서 스케일링 그룹이 해당 서버를 선택하여 용량 축소하지 않습니다. 이 기기는 영구적으로 클러스터에서 작동하고 AS는 이를 변경하지 않습니다.
![](https://mc.qcloudimg.com/static/img/2c19119e95beb4eb820757939578c656/7.jpg)


### 5단계. 용량 확장 및 축소 정책 설정(중요 사항)

AS는 예약 용량 확장 또는 알람에 기반한 동적 용량 확장을 지원하며, 용량 확장 및 축소 공지를 받고 세부 정보를 검토할 수 있도록 지원합니다. 모든 것이 사용자 통제 하에 있습니다.
![](https://mc.qcloudimg.com/static/img/f348d96c002cdf79ac2033abcd7e6e4c/8.jpg)


- **먼저 20:00에 용량 확장 작업을 예약합니다.**
![](https://mc.qcloudimg.com/static/img/0721f68f33dca49f7175d1f4fd3a80aa/t1.jpg)

> 참고:
> Tencent Cloud의 CVM은 약 1분 만에 생성되며 사용자 지정 이미지의 크기가 클 경우, 더 많은 시간이 필요할 수 있습니다. 시작 시간 5분 전에 실행할 수 있습니다.

- **다음 24:00에 용량 축소 작업을 예약합니다.**
![](https://mc.qcloudimg.com/static/img/a86e797fa59c66d304837b3017d7bc78/t2.jpg)


이로써 작업을 마칩니다.

웹 사이트의 백엔드 클러스터가 "1대의 고정 애플리케이션 서버+1대의 피크타임에 생성되는 애플리케이션 서버"로 변경되었습니다.
스케일링 그룹에 추가되지 않은 다른 클러스터 기기는 대부분 사용되지 않아 반환할 수 있으므로 비용을 절감합니다.
