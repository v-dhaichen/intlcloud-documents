## IP 변환 구성
구체적인 작업은 다음과 같습니다.
1. [Tencent Cloud 콘솔](https://console.cloud.tencent.com/)에 로그인하고 [클라우드 컴퓨팅과 네트워크] > [VPC]를 선택하여 VPC 콘솔에 들어갑니다.
2. 왼쪽 탐색 모음에서 [직접 연결 게이트웨이]를 클릭합니다.
3. 직접 연결 게이트웨이 ID를 클릭하여 세부 정보 페이지로 들어갑니다.
4. [로컬 IP 변환] 탭을 클릭하여 로컬 IP 변환 구성을 진행합니다.
 1. 로컬 IP 변환 규칙을 편집합니다.
     - 생성: IP 매핑 페이지 오른쪽 상단에서 [생성]을 클릭하여 기존 IP, 매핑 IP 및 비고를 입력하면 됩니다. 생성된 로컬 IP 변환 규칙은 기본적으로 ALL PASS의 ACL 규칙을 추가하였습니다. 즉, 로컬 IP 변환은 모든 전용 채널에 유효합니다. 로컬 IP 변환 ACL 규칙을 편집하여 로컬 IP 변환 적용 범위를 변경할 수 있습니다.
     - 삭제: IP 변환 규칙 행에서 [삭제]를 클릭하고 작업을 확인하면 됩니다. IP 변환 규칙 삭제 후 해당 IP 변환 규칙의 ACL 규칙을 연동 삭제합니다.
     - 수정: IP 변환 규칙 행에서 [IP 매핑 수정]을 클릭하면 로컬 IP 변환 규칙의 기존 IP, 매핑 IP와 비고를 편집할 수 있습니다. [확인]을 클릭하면 IP 변환이 유효합니다.
 2. 로컬 IP 변환의 네트워크 ACL 규칙을 구성합니다.
ACL 규칙은 TCP와 UDP 프로토콜을 지원합니다. 로컬 IP 매핑 ACL 규칙은 소스 포트, 대상 IP, 대상 포트를 지원합니다. 그 중, 포트, IP를 입력하지 않으면 ALL을 의미합니다. 프로토콜이 ALL을 선택하였을 경우, 포트와 IP는 기본적으로 ALL을 선택합니다.
     - 생성: IP 매핑 규칙 행에서 [ACL 규칙 편집]을 클릭합니다. 기존 ACL 규칙 하단에서 [1개 추가]를 클릭하면 추가할 수 있습니다.
     - 삭제: IP 매핑 규칙 행에서 [ACL 규칙 편집]을 클릭하여 ACL 편집 상태에 들어가 [삭제]를 클릭하고 작업을 확인하면 해당 ACL 규칙을 삭제할 수 있습니다. 또는 ACL 규칙 옆의 [삭제]를 클릭하여 삭제 작업을 완료할 수 있습니다.
     - 수정: IP 매핑 규칙 행에서 [ACL 규칙 편집]을 클릭하여 ACL 편집 상태에 들어가 ACL 규칙을 수정할 수 있습니다. 또는 ACL 규칙 옆의 [수정]을 클릭하여 수정 작업을 완료할 수 있습니다.
     
 >**주의:**
 >직접 연결 게이트웨이가 동시에 피어 IP 변환을 구성할 경우, 로컬 IP 변환 ACL 규칙의 **대상 IP**는 기존 IP가 아닌 **피어 IP 변환 매핑 IP **를 입력해야 합니다.

 **규칙 제한:**
 - 기존 IP는 반드시 VPC CIDR 범위 내에 있어야 합니다.
 - 매핑 IP는 직접 연결 게이트웨이가 속한 VPC CIDR 범위에 있을 수 없습니다. 
 - 기존 IP는 유일하며 중복될 수 없습니다. 즉, VPC 내 1개의 IP는 1개의 IP로만 매핑할 수 있습니다.
 - 매핑 IP는 유일하며 중복될 수 없습니다. 즉, 여러 개의 VPC IP가 동일한 IP로 매핑할 수 없습니다.
 - 기존, 대상 IP는 브로드캐스팅 주소(255.255.255.255), D 클래스 주소(224.0.0.0 ~ 239.255.255.255), E 클래스 주소(240.0.0.0 ~ 255.255.255.254)를 지원하지 않습니다.
 - 직접 연결 게이트웨이의 로컬 IP 변환 규칙 제한 수는 최대 100개이며, 로컬 IP 변환당 최대 20개의 ACL 규칙(필요할 경우 백 엔드로 할당액을 높일 수 있음)을 지원합니다.
4. **피어 IP 변환을 구성합니다.**
직접 연결 게이트웨이 세부 정보 페이지에서 [피어 IP 변환] TAB 페이지를 클릭합니다.
 - 생성: IP 매핑 페이지 왼쪽 상단에서 파란색 [생성]을 클릭하고 기존 IP, 매핑 IP 및 비고를 입력하면 됩니다.
 - 삭제: IP 변환 규칙 행에서 [삭제]를 클릭하고 확인하면 됩니다.
 - 수정: IP 변환 규칙 행에서 [IP 매핑 수정]을 클릭하면 피어 IP 변환 규칙의 기존 IP, 매핑 IP와 비고를 편집할 수 있습니다. [확인]을 클릭하면 IP 변환이 유효합니다.
 
 **규칙 제한:**
 - 매핑 IP는 직접 연결 게이트웨이가 속한 VPC CIDR 범위에 있을 수 없습니다.
 - 기존 IP는 유일하며 중복될 수 없습니다. 즉, 직접 연결 피어에 1개의 IP는 1개의 IP로만 매핑할 수 있습니다.
 - 매핑 IP는 유일하며 중복될 수 없습니다. 즉, 여러 개의 직접 연결 피어 IP가 동일한 IP로 매핑할 수 없습니다.
 - 기존, 대상 IP는 브로드캐스팅 주소(255.255.255.255), D 클래스 주소(224.0.0.0 ~ 239.255.255.255), E 클래스 주소(240.0.0.0 ~ 255.255.255.254)를 지원하지 않습니다.
 - 직접 연결 게이트웨이의 피어 IP 변환 규칙 제한 수는 최대 100개(필요할 경우, 백 엔드로 할당량을 높일 수 있음)입니다.


## IP 포트 변환 구성
1. [Tencent Cloud 콘솔](https://console.cloud.tencent.com/)에 로그인하고 [클라우드 컴퓨팅과 네트워크] > [VPC]를 선택하여 VPC 콘솔에 들어갑니다.
2. 왼쪽 탐색 모음에서 [직접 연결 게이트웨이]를 클릭합니다.
3. 직접 연결 게이트웨이 ID를 클릭하여 세부 정보 페이지로 들어갑니다.
4. [로컬 소스 IP 포트 변환] 탭을 클릭하여 로컬 소스 IP 포트 변환 구성을 진행합니다.
 1. 로컬 IP 포트 변환 주소 풀을 구성합니다.
     - 생성: 매핑 IP 풀 페이지에서 [생성]을 클릭하고 매핑 IP 풀(IP 또는 IP 주소 범위 지원, IP 주소 범위 형식은 "A - B"임)과 비고(옵션)를 입력하여 새 IP 풀의 ACL 규칙은 ALL DROP입니다. ACL 규칙을 별도 편집해야 네트워크 변환을 구현할 수 있습니다.
     - 삭제: IP 주소 풀 행에서 [삭제]를 클릭하면 해당 주소 풀을 삭제할 수 있습니다. 주소 풀 삭제 후 주소 풀에 연결된 ACL 규칙이 자동 삭제됩니다.
     - 수정: IP 주소 풀 행에서 [매핑 IP 풀 수정]을 클릭하면 해당 매핑 IP 풀의 IP와 비고를 편집할 수 있습니다.
 2. IP 주소 풀의 네트워크 ACL 규칙을 구성합니다.
ACL 규칙은 프로토콜(TCP 또는 UDP 지원), 소스 IP, 소스 포트, 대상 IP, 대상 포트를 지원합니다.
     - 생성: IP 주소 풀 행에서 [ACL 규칙 편집]을 클릭하면 ACL 편집 상태에 들어가 규칙의 가장 하단의 [1행 추가]를 클릭하면 새 ACL 규칙을 추가할 수 있습니다.
     - 삭제: IP 주소 풀 행에서 [ACL 규칙 편집]을 클릭하면 ACL 편집 상태에 들어가 규칙의 가장 오른쪽의 [삭제]를 클릭하면 해당 ACL 규칙을 삭제할 수 있으며, ACL 규칙 표시 상태에서 가장 오른쪽의 [삭제]를 클릭할 수도 있습니다.
     - 수정: IP 주소 풀 행에서 [ACL 규칙 편집]을 클릭하면 ACL 편집 상태에 들어가며 ACL 규칙 표시 상태에서 가장 오른쪽의 [수정]을 클릭할 수도 있습니다.
    
 >**주의:**
 >직접 연결 게이트웨이가 동시에 피어 IP 변환을 구성할 경우, 로컬 소스 IP 포트 변환 ACL 규칙의 **대상 IP**는 기존 IP가 아닌 **피어 IP 변환 매핑 IP**를 입력해야 합니다.

 **규칙 제한:**
 - IP 주소 풀은 직접 연결 게이트웨이가 속한 VPC CIDR 범위에 있을 수 없습니다.
 - 여러 개의 IP 주소 풀 ACL 규칙은 중복될 수 없습니다. 중복될 경우 네트워크 주소 변환이 충돌될 수 있습니다.
 - 여러 개의 IP 주소 풀 간의 IP는 중복될 수 없습니다.
 - IP 주소 풀은 단일 IP 또는 연속 IP만 지원하며, 연속 IP의 /24 IP 주소 범위는 일치해야 합니다. 즉, "192.168.0.1 - 192.168.0.6"은 지원하지만 "192.168.0.1 - 192.168.1.2"는 지원하지 않습니다.
 - 주소 풀은 브로드캐스팅 주소(255.255.255.255), D 클래스 주소(224.0.0.0 ~ 239.255.255.255), E 클래스 주소(240.0.0.0 ~ 255.255.255.254)를 지원하지 않습니다.
 - 로컬 소스 IP 포트 변환은 최대 100개의 IP 주소 풀을 지원하며, 각 주소 풀은 최대 20개의 ACL 규칙을 지원합니다(필요할 경우, 백 엔드로 할당액을 높일 수 있음).
5. 직접 연결 게이트웨이 세부 정보 페이지에서 [로컬 대상 IP 포트 변환] 탭을 클릭합니다.
 - 생성: IP 포트 매핑 페이지에서 [생성]을 클릭하면 새로운 IP 포트 매핑을 추가할 수 있습니다.
 - 삭제: IP 포트 매핑 행에서 [삭제]를 클릭하면 해당 매핑을 삭제할 수 있습니다.
 - 수정: IP 포트 매핑 행에서 [IP 포트 매핑 수정]을 클릭하면 해당 IP 포트 매핑의 매핑 관계 및 비고를 수정할 수 있습니다.
 
 **규칙 제한:**
 - 기존 IP는 반드시 직접 연결 게이트웨이가 속한 VPC CIDR 범위 내에 있어야 합니다.
 - 기존 IP 포트는 유일합니다. 즉, VPC 내 동일한 IP 포트는 1개의 IP 포트로만 매핑할 수 있습니다.
 - 매핑 IP 포트는 VPC CIDR 범위에 있을 수 없습니다.
 - 매핑 IP 포트는 중복될 수 없습니다. 즉, 1개의 IP 포트가 여러 개의 VPC IP 포트를 매핑할 수 없습니다.
 - 기존 IP와 매핑 IP는 브로드캐스팅 주소(255.255.255.255), D 클래스 주소(224.0.0.0 ~ 239.255.255.255), E 클래스 주소(240.0.0.0 ~ 255.255.255.254)를 지원하지 않습니다.
 - 로컬 대상 IP 포트 변환은 최대 100개의 IP 포트 매핑을 지원합니다(필요할 경우, 백 엔드로 할당액을 높일 수 있음).
>**주의:**
>IP 변환과 IP 포트 변환을 동시에 구성할 경우, 동시에 적중하면 우선적으로 IP 매핑을 매칭합니다.

