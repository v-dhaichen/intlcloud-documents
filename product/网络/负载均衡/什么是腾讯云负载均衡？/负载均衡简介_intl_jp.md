## CLBとは何ですか？
CLB（Cloud Load Balancer）は複数の[CVM](https://cloud.tencent.com/doc/product/213/495)に対してトラフィックの割り当てを行うサービスです。CLBはトラフィックの割り当てによりアプリケーションシステムの対外的なサービス能力を拡張し、単一障害点を解消することによりアプリケーションシステムの可用性を向上させます。

CLBサービスは仮想サービスアドレス（VIP）を設定することにより、**同一地域**の複数のCVMリソースを高性能で高可用性のアプリケーションサービスプールに仮想化し、アプリケーションが指定する方法に基づき、クライアントからのネットワークリクエストをCVMプールに割り当てます。

CLBサービスはCVMプールにおけるCVMインスタンスの正常性状態を検査し、異常状態のインスタンスを自動で分離することにより、CVMの単一障害点問題を解決し、同時にアプリケーション全体のサービス能力を向上させます。

Tencent Cloudが提供するCLBサービスは自動管理、自動故障修復、ネットワークへの故障防御などの高度な機能を有し、企業、コミュニティ、電子商取引、ゲームなど様々なユーザーのシナリオに適用されます。

## 構成部分
サービスを提供するCLBグループは、通常、以下の部分より構成されます。
- CloudLoadBalancer：トラフィックを割り当てるためのCLBインスタンス。
- VIP(virtual IP)：CLBがクライアントにサービスを提供するIPアドレス。
- Backend/Real Server：実際にリクエストを処理するための1組のバックエンドCVMインスタンス。
- VPC/基本ネットワーク：ネットワーク環境全体。

CLB以外からのアクセスクリクエストは、CLBインスタンスを介して、且つ関連するポリシーと転送規則に基づきバックエンドCVMに割り当てられ、処理されます。

##名詞の説明

| 用語      | 正式名称                    | 説明                                       |
| ------- | --------------------- | ---------------------------------------- |
| CLB   | Cloud Load Balancer   | Tencent Cloudが提供するネットワークCLBサービスであり、CVMと合わせてユーザーにTCP/UDP及びHTTPに基づくCLBサービスを提供します |
| CLBリスナー | Load Balance Listener | CLBサービスリスナーはポートの監視、CLBポリシーと正常性検査の構成などを含み、各監視項目はバックエンドのアプリケーションサービスに対応します |
| RS   | Real Server           | CLBの割り当てリクエストを受ける1組のCVMインスタンスであり、CLBサービスはユーザーが設定した規則に基づきアクセスリクエストをこの1組のバックエンドCVMに転送して処理を行います |
| 仮想サービスアドレス  | Virtual IP            | システムによって割り当てられたサービスアドレスであり、現在はIPアドレスです。ユーザーはこのサービスアドレスを外部に公開するかどうかを選択することができ、それによりパブリックネットワークとプライベートネットワークタイプのCLBサービスをそれぞれ作成します |

## CLBの動作原理
### 基本的な動作原理
CLBはクライアントからの流入トラフィックを受け入れ、且つリクエストを1つまたは複数のAvailability ZoneのバックエンドCVMインスタンスにルーティングして処理を行います。

CLBサービスは、主にCLBリスナーにより提供されます。リスナーはCLBインスタンスにおけるリクエストをリスニングし、ポリシーをRSに割り当てるなどのサービスを行い、「クラウド-CLB」と「CLB-RS」の2つの次元の転送プロトコルとプロトコルポートを構成することにより、CLBはリクエストをバックエンドCVMに直接転送することができます。

複数のAvailability Zone間でCLBのバックエンドCVMインスタンスを構成することをお勧めします。Availability Zoneが使用不可となった場合、CLBはトラフィックをその他のAvailability Zoneの正常に動作しているインスタンスにルーティングし、それによりAvailability Zoneの故障によって引き起こされたサービス中断の問題をブロックできます。

### リクエストルーティングの選択
クライアントはドメイン名を通じたサーバーへのアクセスを要求し、リクエストがCLB装置に送信される前にDNSサーバーはCLBのドメイン名を分析し、且つリクエストを受信したCLBのIPアドレスをクライアントに返送します。CLBリスナーはリクエスト受信時に、異なるCLBアルゴリズムを使用してリクエストをRSに分配します。現在、Tencent Cloudは重み付きラウンドロビンとip_hash重み付き最小接続数などの複数のCLBアルゴリズムをサポートしています。

### バックエンドサービス状態の監視
CLB装置は更にバックエンドインスタンスの動作状況を監視することができ、それによりトラフィックを正常に動作するインスタンスにのみルーティングされるよう確保します。CLB装置が動作が異常なインスタンスを検出した時、このインスタンスへのトラフィックのルーティングを停止してから、再度インスタンスの正常な動作を検出した後、改めてそれにトラフィックをルーティングします。

## 関連サービス
CLBは以下のサービスと一緒に使用することにより、アプリケーションの可用性と拡張性を向上させることができます。
- CVMインスタンス：アプリケーションがクラウド上で動作する仮想サーバー。詳細については、[CVM製品ドキュメント](https://cloud.tencent.com/doc/product/213)を参照してください。
- 自動スケーリング：インスタンス数を柔軟に制御します。自動スケーリングにおいてCLBインスタンスが有効となっている場合、スケーリングされたインスタンスは自動的にCLBグループに追加されると同時に、終了したインスタンスは自動的にCLBグループから除去されます。詳細については、[自動スケーリング製品ドキュメント](https://cloud.tencent.com/doc/product/377)を参照してください。
- クラウド監視：お客様がCLB及び全てのバックエンドインスタンスの状況を監視し、且つ必要な操作を実行することを支援します。詳細については、[クラウド監視製品ドキュメント](https://cloud.tencent.com/doc/product/248)を参照してください。
- ドメイン名登録とログイン名分析：お客様がカスタマイズしたドメイン名（例：`www.example.com`）をネットワーク通信に使用されるIPアドレス（例：`192.0.2.1`）に変換することにより、迅速且つ簡単にリクエストをCLBインスタンスにルーティングします。詳細については、[ドメイン名登録製品ドキュメント](https://cloud.tencent.com/doc/product/242)と[ドメイン名分析製品ドキュメント](https://cloud.tencent.com/doc/product/302)を参照してください。

