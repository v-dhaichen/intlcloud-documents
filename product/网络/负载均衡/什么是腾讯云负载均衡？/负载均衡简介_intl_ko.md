## CLB는 무엇인가요?
CLB(Cloud Load Balancer)는 여러 대의 [CVM](https://cloud.tencent.com/doc/product/213/495)에 대해 트래픽을 배치하는 서비스입니다. CLB는 트래픽 배치를 통해 응용프로그램 시스템의 대외 서비스 능력을 향상시킬 수 있고, 단일 장애점을 제거하여 응용프로그램 시스템의 가용성을 개선합니다.

CLB 서비스는 가상 서비스 주소(VIP)를 설정하여 **동일 지역**의 여러 대 CVM 리소스를 성능이 좋고 가용성이 높은 응용프로그램 서비스 풀로 구성합니다. 응용프로그램이 지정한 방식에 따라 클라이언트의 네트워크 요청을 CVM 풀에 배치합니다.

CLB 서비스는 CVM 풀 중 CVM 인스턴스의 상태를 검사하며, 이상 상태인 인스턴스를 자동으로 격리시키기 때문에 CVM의 단일 장애점 문제를 해결하였을 뿐만 아니라 응용프로그램 전체적인 서비스 능력을 향상시켰습니다.

Tencent Cloud가 제공한 CLB 서비스는 자동 관리, 자동 고장 복구, 네트워크 공격 방지 등 고급 기능을 보유하고 있어 기업, 커뮤니티, 전자 상거래, 게임 등 여러 시나리오에 적용됩니다.

## 구성 부분
서비스를 제공하는 CLB 그룹은 일반적으로 다음 부분으로 구성됩니다.
- CloudLoadBalancer: 로드밸런싱 인스턴스, 트래픽을 배치하는 데에 사용됩니다.
- VIP(Virtual IP): CLB가 클라이언트에 서비스를 제공하는 IP 주소입니다.
- Backend/Real Server: 백 엔드 CVM 인스턴스, 실제 요청 처리에 사용됩니다.
- VPC/기본 네트워크: 전체 네트워크 환경.

CLB를 제외한 접근 요청은 로드밸런싱 인스턴스를 통하여 관련 전략과 포워딩 규칙에 따라 백 엔드 CVM에 배치되어 처리됩니다.

## 용어집

| 용어      | 전체 이름                    | 설명                                       |
| ------- | --------------------- | ---------------------------------------- |
| 로드밸런서   | Cloud Load Balancer   | Tencent Cloud가 제공하는 일종의 네트워크 CLB 서비스로 CVM와 결합할 수 있으며, 사용자에게 TCP/UDP 및 HTTP에 기반한 CLB 서비스를 제공합니다. |
| CLB 수신기 | Load Balance Listener | CLB 서비스 수신기, 수신 포트, CLB 전략과 상태 검사 구성 등을 포함하며 각 수신 항목은 백 엔드의 응용프로그램 서비스에 해당합니다. |
| RS   | Real Server           | CLB 배치 요청을 수락한 그룹 CVM 인스턴스로 CLB 서비스는 접근 요청을 사용자가 설정한 규칙에 따라 이 CVM에 포워딩하여 처리합니다. |
| 가상 서비스 주소  | Virtual IP            | 시스템이 할당한 서비스 주소로 현재는 IP 주소입니다. 사용자는 해당 서비스 주소를 대외 공개할지 여부를 선택하여 공중망과 사설망 유형의 CLB 서비스를 따로 구축할 수 있습니다. |

## CLB 작업 원리
### 기본 작업 원리
로드밸런서는 클라이언트가 가져온 트래픽을 수락하고 요청을 1개 또는 여러 개 가용 영역의 백 엔드 CVM 인스턴스에 라우팅하여 처리합니다.

CLB 서비스는 주로 CLB 수신기로 제공합니다. 수신기는 로드밸런싱 인스턴스의 요청을 수신하며, 전략에 따라 RS 등 서비스에 배치합니다. 클라이언트-CLB과 CLB-RS 두 가지 차원의 포워딩 프로토콜 및 프로토콜 포트를 구성하여 CLB는 요청을 백 엔드 CVM에 직접적으로 포워딩할 수 있습니다.

여러 가용 영역 간에 로드밸런서의 백 엔드 CVM 인스턴스를 구성하길 권장합니다. 하나의 가용 영역이 불가용한 경우, 로드밸런서는 트래픽을 다른 가용 영역에서 정상적으로 운행되는 인스턴스에 라우팅함으로써 가용 영역 고장으로 인해 야기되는 서비스 중단 현상을 방지할 수 있습니다.

### 요청 라우팅 선택
클라이언트 요청은 도메인 이름을 통해 서비스를 접근합니다. 요청을 로드밸런서에 발송하기 전, DNS 서버는 CLB 도메인 이름을 해석하고 수령한 요청의 CLB IP 주소를 클라이언트에 반환합니다. CLB 수신기가 요청을 수령하면 다른 CLB 알고리즘을 사용하여 요청을 RS에 배치합니다. 현재 Tencent Cloud는 가중 라운드 로빈과 ip_hash 가중 최소 연결 수 등 여러 밸런싱 알고리즘을 제공하고 있습니다.

### 백 엔드 서비스 상태 모니터링
로드밸런서는 백 엔드 인스턴스의 운행 상황을 모니터링할 수 있기 때문에 트래픽이 정상적으로 운행하는 인스턴스에만 라우팅되도록 확보합니다. 로드밸런서는 비정상적으로 운행되는 인스턴스를 감지하면, 해당 인스턴스에 대한 라우팅 트래픽을 중단한 다음 인스턴스가 정상적으로 다시 실행함을 감지한 후 다시 라우팅합니다.

## 관련 서비스
CLB는 다음 서비스와 함께 사용하여 응용프로그램의 가용성과 확장성을 향상시킬 수 있습니다.
- CVM 인스턴스: 응용프로그램은 클라우드에서 운행하는 가상 서버입니다. 더 많은 세부 정보는 [CVM 제품 문서](https://cloud.tencent.com/doc/product/213)를 참조하십시오.
- AS: 인스턴스 수량을 유연하게 조정합니다. AS에서 로드밸런싱 인스턴스를 시작하면 조정한 인스턴스가 CLB 그룹에 자동으로 추가하는 동시에 정지된 인스턴스가 CLB 그룹에서 자동으로 제거됩니다. 더 많은 세부 정보는 [AS 제품 문서](https://cloud.tencent.com/doc/product/377)를 참조하십시오.
- Cloud Monitoring: CLB 및 모든 백 엔드 인스턴스의 운행 상황을 모니터링하고 및 필요한 작업을 실행할 수 있도록 도와줍니다. 더 많은 세부 정보는 [Cloud Monitoring 제품 문서](https://cloud.tencent.com/doc/product/248)를 참조하십시오.
- 도메인 이름 등록 및 해석: 사용자 지정한 도메인 이름(예: `www.example.com`)을 네트워크 통신이 사용한 IP 주소(예: `192.0.2.1`)로 전환하여 요청을 빠르고 손쉽게 로드밸런싱 인스턴스에 라우팅할 수 있습니다. 더 많은 세부 정보는 [주소 등록 제품 문서](https://cloud.tencent.com/doc/product/242)와 [도메인 이름 해석 제품 문서](https://cloud.tencent.com/doc/product/302)를 참조하십시오.

