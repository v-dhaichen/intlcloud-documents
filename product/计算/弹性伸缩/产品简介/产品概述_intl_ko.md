## AS란?

AS(Auto Scaling)는 비즈니스 요구와 전략에 따라 CVM 컴퓨팅 리소스를 자동으로 조정해 응용 프로그램 로드를 처리하기 이한 적절한 양의 CVM 인스턴스를 확보합니다. 웹 서비스의 경우, 스마트 확장과 축소는 원가 절감과 리소스 관리에 아주 중요합니다. 웹 응용 프로그램에 요청 트래픽이 많을 때 별도의 로드에 대응하도록 더 많은 서버를 추가해야 하고, 웹 응용 프로그램의 트래픽이 감소하면 충분히 이용되지 않는 서버를 종료해야 합니다.

AS를 사용해 조정하면 사전에 확장 조건과 축소 조건을 설정하기만 하면 됩니다. AS는 조건을 만족하면 자동으로 서버를 추가해 성능을 유지하며, 수요가 감소하면 AS는 축소 조건에 따라 서버 수량을 감소시키고 최대한 원가를 절감합니다.

아래 그림과 같이 AS를 통해 클러스터는 항상 적절한 양의 리소스를 보유하고 정상 상태를 유지하여 기존 모드로 인한 다음 문제를 해결합니다. 
 - 비즈니스 급증 또는 CC 공격으로 CVM이 부족하여 서비스가 응답할 수 없습니다.
 - 피크 액세스 트래픽에 따라 리소스를 예측하지만 평상 시에는 액세스 양이 매우 적어 리소스 낭비를 초래합니다.
 - 인력 방어 및 용량 알람에 대한 빈번한 처리로 인해 많은 수동 변경이 필요합니다.

**기존의 클러스터 보호:**
![Alt text](https://mc.qcloudimg.com/static/img/dad472d890863fea889cea359de94c28/image.jpg)

**AS 적용 후:**
![Alt text](https://mc.qcloudimg.com/static/img/5ca21d066ffffe9093a6796e3739325b/AS.jpg)


## AS의 작업 방식

흔히 볼 수 있는 웹 응용 서비스에서 클러스터가 클라이언트 트래픽을 만족하기 위해 일반적으로 응용 프로그램의 여러 복제본을 실행해야 합니다. 예를 들어 액세스 레이어의 프론트 엔드 서버 클러스터, 로직 레이어의 응용 서버 클러스터, 백 엔드 캐시 서버 클러스트입니다. 각 인스턴스는 모두 클라이언트 요청을 처리할 수 있습니다. 

이들 유사 또는 동일한 인스턴스는 수량을 일반적으로 조절할 수 있습니다. 이 CVM을 하나의 조정 그룹으로 넣어 관리할 수 있습니다.

- 각 조정 그룹의 최소 인스턴스 수량을 지정할 수 있고 AS는 조정 그룹의 인스턴스 수가 이 최솟값보다 낮아지지 않는 것을 확보합니다.
- 각 조정 그룹의 최대 인스턴스 수량을 지정할 수 있고 AS는 조정 그룹의 인스턴스 수가 이 최댓값보다 높아지지 않는 것을 확보합니다.
- 조정 전략을 지정할 수 있고 AS는 응용프로그램 요구가 증가 또는 감소할 경우 인스턴스를 시작 또는 종료합니다. 조정 전략은 다음과 같은 두 가지가 있습니다.
   a) 알람 트리거 전략: 지정한 조건에 따라 동적으로 확장합니다(예: 조정 그룹 CVM의 CPU 이용률이 60%를 초과하면 추가)
   b) 시간 제한 조정 전략: 지정 시간에 따라 확장합니다(예: 매일 밤 9시 확장). 
- 전략을 설정한 후 조정 활동 알림을 설정할 수 있습니다. AS는 조정 활동 발생 시 이메일, 메시지, 내부 메시지 방식으로 통지합니다. 비즈니스 요청량 변화에 별 신경쓸 필요없이 AS 알림에만 유의하면 됩니다.
- 언제나 필요한 설비 수량을 원클릭으로 지정하거나 기존의 CVM을 조정 그룹에 추가시켜 함께 관리할 수 있습니다.

## AS 기본 개념

**AS 제품은 다음의 기본 개념이 있습니다.**

- 조정 그룹
- 시동 구성
- 조정 전략
- 쿨 타임


## 1. 조정 그룹
조정 그룹은 동일한 규칙을 따르며 동일 시나리오에 적용되는 CVM 인스턴스 집합입니다. 조정 그룹은 그룹 내 CVM 인스턴스 수의 최댓값, 최솟값 및 관련 로드밸런서 인스턴스 등 속성을 정의합니다.

## 2. 시동 구성
시동 구성은 CVM을 자동으로 생성하는 템플릿으로 이미지 ID, CVM 인스턴스 유형, 시스템 디스크 및 데이터 디스크 유형과 용량, 키 쌍, 보안 그룹 등이 포함됩니다.

조정 그룹 생성 시 반드시 시동 구성을 지정하고 시동 구성은 생성 후 속성을 편집할 수 없습니다.

## 3. 조정 전략
조정 동작을 실행하는 조건입니다. 트리거 조건은 시간 또는 CM 알람일 수 있으며 작동은 CVM을 삭제 또는 추가일 수 있습니다.
조정 전략은 다음 두 가지가 있습니다.

- **시간 제한 조정 전략**
정해진 시간이 되면 CVM 인스턴스를 자동으로 증가 또는 감소합니다. 주기적인 중복을 지원합니다.

- **알람 조정**
CM 지표(예: CPU, 메모리, 네트워크 트래픽)에 기반해 CVM 인스턴스를 자동으로 증가 또는 감소합니다.

## 4. 쿨 타임
쿨 타임은 조정 그룹내 하나의 조정 활동(CVM 인스턴스 추가 또는 삭제)이 완료된 후의 잠긴 기간을 나타냅니다. 해당 기간 동안 조정 그룹은 조정 활동을 실행하지 않습니다. 쿨 타임은 0-999999(초) 범위에서 지정할 수 있습니다.

