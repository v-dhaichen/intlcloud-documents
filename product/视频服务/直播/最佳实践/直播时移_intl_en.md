Based on the LVB recording capability, the time shifting feature stores the TS segment addresses and TS files separately into the VOD system. A client can replay video content before the current time point by passing in a time parameter through the time shifting domain name.
## How It Works

In a common live broadcast in HLS format, the pushed video content is sliced into multiple TS segments. When a viewer watches it, the TS segment addresses are accessed by requesting the .m3u8 files to get the TS files. In this case, because the TS files are not persisted, the viewer cannot replay the live video content before the current time point.

## Usage of Time Shifting
>! Please kindly note that enabling time shifting will incur VOD traffic and storage fees. For more information, see [VOD Pricing Overview](https://cloud.tencent.com/document/product/266/2838).

1. Activate [VOD](https://cloud.tencent.com/document/product/266/2839).
2. To use time shifting, you need to apply for a domain name and obtain ICP filing for it. Go to the [VOD Console](https://console.cloud.tencent.com/video/domainsetting) and configure this domain name as the VOD domain name as instructed in [Distributed Playback Settings](https://cloud.tencent.com/document/product/266/14056). In addition, you need to add a correct CNAME record for the domain name. For the configuration of Tencent Cloud, see [Add a DNS Record](https://cloud.tencent.com/document/product/302/3446).
3. Submit a ticket to apply for activation of the time shifting service for the domain name and include the following parameters in the ticket:
	- timeshift_dur   Time shifting duration:
		- This parameter is in seconds, indicating how much time in the past is supported for time shifting (up to 7 days currently).
		- It cannot be guaranteed to be absolutely accurate. You are recommended to add a small amount of time to it on the premise of on-demand configuration.
		- If it is configured as 7200 (2 hours), the time-shifted content less than 2 hours old can be requested (i.e., the time shifting duration relative to the delay can be 90 seconds to 2 hours). When the content more than 2 hours old is requested, even if there is live streaming content, HTTP 404 will be returned.
	- timeshift_stor   Time shifting storage duration:
		- This parameter is in seconds, indicating how long the recorded file (HLS) generated by time shifting will be stored in VOD.
		- If it is configured to 0, the file will not be deleted automatically.
		- If it is configured to a non-zero value, it needs to be greater than (timeshift_dur + 3600); otherwise, it will be automatically adjusted to (timeshift_dur + 3600).
		- For example, if it is configured to 14400 (4 hours), then for a time shifting-enabled stream, an LVB recording file (HLS) will be generated and stored in VOD each time after it is pushed. This file will be automatically deleted from VOD 4 hours after the live broadcast ends.

## Playback Request

The request parameter is in the following format:
```
http://[Domain]/timeshift/[AppName]/[StreamName]/timeshift.m3u8?delay=xxx
```
Here:
* [Domain] is the time shifting service access domain name you registered, i.e., the domain name you added in the VOD Console.
* timeshift is a fixed field.
* [AppName] is the application name. For example, if your application name is `live`, enter `live`.
* [StreamName] is the stream name. Enter the stream name corresponding to your request.
* timeshift.m3u8 is a fixed field.
* delay indicates the relative time shifting duration in seconds. Currently, if this value is less than 90, the backend can adjust it to 90.
For example, if you want to use time shifting to replay the content 5 minutes ago of the stream `SLPUrIFzGPE` in the application `live`, then the request URL is as follows:
```
http://testtimeshift.com/timeshift/live/SLPUrIFzGPE/timeshift.m3u8?delay=300
```
