## 소개

Tencent Cloud GME SDK의 사용을 환영합니다. 개발자가 Tencent Cloud GME 제품 API를 디버깅하고 연결하는 데 도움이 되도록 이 문서에 GME 범위 음성의 액세스 기술을 소개합니다.


GME 범위 음성은 배틀로얄 게임을 위해 특별히 개발된 맞춤형 제품입니다. 일반적인 팀 음성 치팅 방과 다른 핵심 기능은 다음과 같습니다.

#### 1.배틀로얄 게임에 고유한 "팀" 또는 "모두" 음성 모드를 제공합니다.

#### 2.범위 판단 능력 덕분에 동일한 음성 채팅방에서 많은 사용자가 동시에 마이크를 켜서 음성 통화를 지원합니다.


## 기본 개념

### 1.방에 들어갈 때 지정된 TeamID! = 0이면 범위 음성 채팅방 모드로 들어갑니다.

### 2.범위 음성 채팅 방에 입장할 때 두 가지 음성 모드를 선택할 수 있습니다.

| 음성 모드 | 매개변수 이름               | 기능                                         |
| -------- | ---------------------- | -------------------------------------------- |
| 전체   | RANGE_AUDIO_MODE_WORLD | 구성 후 플레이어 근처의 일정 범위의 사람들이 플레이어의 말을 들을 수 있습니다 |
| 팀   | RANGE_AUDIO_MODE_TEAM  | 팀원만 음성 메시지를 들을 수 있습니다                               |

### 3.다른 음성 모드에서 구체적인 가청 범위는 다음과 같습니다.

  #### 플레이어 A의 상태가 "모두"라고 가정하면 플레이어 B가 다른 음성 모드에서 청취 가능 여부는 다음과 같습니다.

  |동일 팀 여부	|범위 내 여부	|음성 모드	|A가 B의 소리를 들을 수 있는지	|B가 A의 소리를 들을 수 있는지	|
  | -----------------	| ------------ | ------------ |--------------------------	|--------------------------	|
  |동일 팀		|예		 	|MODE_WORLD	|A는 B의 소리를 들을 수 있음		|B는 A의 소리를 들을 수 있음		|
  |동일 팀		|예		 	|MODE_TEAM	|A는 B의 소리를 들을 수 있음		|B는 A의 소리를 들을 수 있음		|
  |동일 팀		|아니요		 	|MODE_WORLD	|A는 B의 소리를 들을 수 있음		|B는 A의 소리를 들을 수 있음		|
  |동일 팀		|아니요		 	|MODE_TEAM	|A는 B의 소리를 들을 수 있음		|B는 A의 소리를 들을 수 있음		|
  |동일 팀 아님		|예		 	|MODE_WORLD	|A는 B의 소리를 들을 수 있음		|B는 A의 소리를 들을 수 있음		|
  |동일 팀 아님		|예			|MODE_TEAM	|A는 B의 소리를 들을 수 없음	|B는 A의 소리를 들을 수 없음	|
  |동일 팀 아님		|아니요		 	|MODE_WORLD	|A는 B의 소리를 들을 수 없음	|B는 A의 소리를 들을 수 없음	|
  |동일 팀 아님		|아니요			|MODE_TEAM	|A는 B의 소리를 들을 수 없음	|B는 A의 소리를 들을 수 없음	|

  #### 플레이어 A의 상태가 "팀"이라고 가정하면 플레이어 B가 다른 음성 모드에서 청취 가능 여부는 다음과 같습니다.

  |동일 팀 여부	|범위 내 여부	|음성 상태	|A가 B의 소리를 들을 수 있는지	|B가 A의 소리를 들을 수 있는지	|
  | -----------------	| ------------ | ------------ |--------------------------	|--------------------------	|
  |동일 팀		|예		 	|MODE_WORLD	|A는 B의 소리를 들을 수 있음		|B는 A의 소리를 들을 수 있음		|
  |동일 팀		|예		 	|MODE_TEAM	|A는 B의 소리를 들을 수 있음		|B는 A의 소리를 들을 수 있음		|
  |동일 팀		|아니요		 	|MODE_WORLD	|A는 B의 소리를 들을 수 있음		|B는 A의 소리를 들을 수 있음		|
  |동일 팀		|아니요		 	|MODE_TEAM	|A는 B의 소리를 들을 수 있음		|B는 A의 소리를 들을 수 있음		|
  |동일 팀 아님		|예		 	|MODE_WORLD	|A는 B의 소리를 들을 수 없음	|B는 A의 소리를 들을 수 없음	|
  |동일 팀 아님		|예			|MODE_TEAM	|A는 B의 소리를 들을 수 없음	|B는 A의 소리를 들을 수 없음	|
  |동일 팀 아님		|아니요		 	|MODE_WORLD	|A는 B의 소리를 들을 수 없음	|B는 A의 소리를 들을 수 없음	|
  |동일 팀 아님		|아니요			|MODE_TEAM	|A는 B의 소리를 들을 수 없음	|B는 A의 소리를 들을 수 없음	|


### 4.음성 범위에 대한 추가 설명:
  - 음성 범위 내인지는 동일 팀 멤버 간의 통화에 영향을 주지 않습니다.
  - 음성의 접속 범위를 설정하려면 API:UpdateAudioRecvRange를 참조하십시오.
  - 범위 음성 채팅방에서 음성 모드를 실시간 전환할 수 있습니다. 그러나 방에서 TeamID를 변경할 수 없습니다. 방에 입장하기 전에 TeamID를 지정해야 합니다.




## 사용 프로세스

일반적인 팀 음성 채팅방과 달리, 범위 음성 기능을 사용하는 경우 EnterRoom(방 입장)하기 전에 다음 두 API를 호출해야 합니다.

### 1.TeamID 설정

- 이 방법으로 팀 번호를 설정하면 EnterRoom 이전에 호출해야 합니다. 그렇지 않으면 바로 오류 코드 AV_ERR_ROOM_NOT_EXITED(1202)를 반환합니다.

- 퇴장 시 이 매개변수는 자동으로 0으로 재설정되지 않으므로 이 음성 모드를 호출하기로 결정하면 매번 EnterRoom 이전에 이 방법을 호출하여 TeamID를 설정하십시오.

#### 함수 프로토타입
```
ITMGContext SetRangeAudioTeamID(int teamID)
```

|매개변수     | 유형         |의미|
| ------------- |:-------------:|-------------
| teamID		|int    		| 팀 번호는 범위 음성의 상향 및 하향 오디오 스트림 제어에 사용됩니다. TeamID가 0이면 통화 모드는 일반 팀 음성이고 기본값은 0입니다.

### 2.AudioMode 설정

- 이 방법으로 음성 모드를 수정할 때 입장 전에 호출할 수 있고 입장 후에도 호출할 수 있습니다.

- 방 입장하기 전에 이 방법을 호출하면 다음의 입장 시 영향을 줍니다.

- 입장 후에 이 방법을 호출하면 바로 현재 사용자의 음성 모드가 변경됩니다.

- 퇴장 시 이 매개변수는 자동으로 MODE_WORLD로 재설정되지 않으므로 이 방법을 호출하기로 결정하면 매번 EnterRoom 이전에 이 방법을 호출하여 audioMode를 설정하십시오.

> 함수 프로토타입
  
```
ITMGRoom int SetRangeAudioMode(RANGE_AUDIO_MODE rangeAudioMode)
```

|매개변수     | 유형         |의미|
| ------------- |:-------------:|-------------|
| rangeAudioMode    |int     |0(MODE_WORLD)은 "전체"를 나타내고 1(MODE_TEAM)은 "팀"을 나타냅니다.|


### 3.음성 접속 범위 설정

- 이 방법은 음성 접속 범위(거리는 게임 엔진을 기준으로 함)를 설정하는 데 사용되며 입장 성공 후에만 호출할 수 있습니다.
  
- 이 방법은 UpdateSelfPosition 사운드 소스 위치를 업데이트와 함께 사용해야 합니다.

#### 함수 프로토타입 

```
ITMGRoom int UpdateAudioRecvRange(int range)
```

|매개변수     | 유형         |의미|
| ------------- |-------------|-------------|
| range    |int         | 음성을 접속 가능한 최대 범위				|

#### 샘플 코드  

```
ITMGContext.GetInstance().GetRoom().UpdateAudioRecvRange(300);
```

### 4.사운드 소스 위치 업데이트

- 이 함수는 사운드 소스 위치 정보를 업데이트하는 데 사용되며 입장 성공 후에만 호출할 수 있습니다.

- 이 제품 형태에서는 위치만 필요하며 사운드 방향을 지정할 필요가 없습니다.

- 사운드 소스와 청취자 사이의 거리를 결정할 때 사운드 소스의 SelfPostion, 청취자의 SelfPostion 및 청취자의 AudioRecvRange를 결합하여 결정합니다.


#### 함수 프로토타입

```
public abstract int UpdateSelfPosition(int position[3], float axisForward[3], float axisRight[3], float axisUp[3])
```

|매개변수     | 유형         |의미|
| ------------- |-------------|-------------|
| position   	|int[]		|자체가 세계 좌표계의 좌표로, 순서는 앞쪽, 오른쪽 위쪽입니다.|
| axisForward   |float[]  	|이 제품에서 주목할 필요가 없음|
| axisRight    	|float[]  	|이 제품에서 주목할 필요가 없음|
| axisUp    	|float[]  	|이 제품에서 주목할 필요가 없음|

