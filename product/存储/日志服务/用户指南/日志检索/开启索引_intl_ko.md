CLS는 비즈니스 문제를 신속하게 찾을 수 있도록 실시간 로그 조회 기능을 제공합니다. 로그 검색을 수행하기 전에 인덱스를 구성하고 활성화해야 합니다.

## 검색 원리

로그 검색은 로그 내용의 키워드를 기반으로 하며 로그 내용의 키워드는 사용자가 입력한 정보와 매칭합니다. 사용자는 비즈니스 시나리오의 특정 요구에 따라 단어 구분 기호를 지정하고 대소문자 구분 여부를 선택하여 키워드를 유연하게 조정할 수 있습니다. 단어 구분 기호 및 대소 문자를 구분하는 개념을 소개하기 위해 사용자의 로그 내용을 예로 들어봅시다.

```
10002345987;write;ERROR;code=400;topic does not exist;
```

### 단어 구분 기호

원본 로그의 텍스트는 검색을 용이하게 하기 위해 단어 구분 기호를 사용하여 여러 키워드로 나눌 수 있습니다. 예:

- 사용자가 단어 구분 기호를 `;=`로 설정하면 로그 내용은 `10002345987`, `write`, `ERROR`, `code`, `400`, `topic does not exist` 6개 단어로 구분됩니다. 정확한 검색에서 사용자는 단순히 단어를 입력하여 해당 로그 내용을 검색할 수 있습니다.
- 사용자가 단어 구분 기호를 널(NULL)로 설정하면, 전체 로그 내용은 하나의 단어로 간주됩니다. 정확한 검색에서 해당 로그를 검색하려면 전체 단어를 입력해야 합니다.

### 대/소문자 구분

대/소문자 구분은 문자열에서 대문자와 소문자의 정확한 구분 여부를 나타냅니다. 예를 들어, 단어 구분 기호가 `;=`일 경우,

- 대/소문자 구분을 활성화하면 `error`를 입력하여 해당 로그를 찾을 수 없습니다. `error` 및 `ERROR`는 다른 키워드로 간주됩니다.

- 대/소문자 구분하지 않으면 "error", "Error"또는 "ERROR"를 입력하여 로그를 찾을 수 있습니다.

## 인덱스 사용

인덱스 기능은 로그 토픽의 선택 가능한 기능입니다. 먼저 조회할 로그 토픽을 클릭하고 인덱스 기능을 사용하십시오. 구체적인 절차는 다음과 같습니다.

1. [CLS 콘솔](https://console.cloud.tencent.com/cls)에 로그인합니다.
2. 왼쪽의 로그 집합 관리를 클릭한 다음 순서대로 대상 로그 집합 및 로그 토픽으로 이동합니다.
3. 로그 토픽 탭에서 **인덱스 구성**을 클릭하십시오.
4. 필요에 따라 전체 텍스트 인덱스 또는 키 값 인덱스를 활성화하고 대/소문자 구분 여부(기본적으로 선택되지 않음)를 선택하고 단어 구분 기호(기본 구분 기호: `, "';=()[]{}?@&<>/:\n\t\r`)를 입력하십시오.
5. [저장]을 클릭하여 인덱스 구성을 완료하십시오.

> **주의:**
> 로그 토픽 생성 후 기본적으로 인덱스가 사용 불가능입니다. 수동적으로 사용 가능을 선택해야 합니다.

## 인덱스 유형

### 전체 텍스트 인덱스

CLS는 전체 단일 로그를 텍스트로 간주하여 조회합니다. 전체 텍스트 인덱스를 사용하면 키워드로 로그를 검색할 수 있습니다. 전체 텍스트 단어 구분 기호를 사용자 지정할 수 있고, 단어 구분 기호에 따라 원본 로그를 여러 개의 키워드로 구분할 수 있어 사용자가 편리하게 검색할 수 있습니다.
![](https://main.qcloudimg.com/raw/2c9d0b1ee437cc4bb519e10dbba71c97.png)

전체 텍스트 단어 구분 기호의 기능을 더 직관적으로 설명하기 위해 다음은 검색에 대한 몇 가지 예시를 나열하였습니다.

| 전체 텍스트 단어 구분 기호 | 정확한 검색                                                     | 퍼지 검색                  |
| ---------- | ------------------------------------------------------------ | ------------------------- |
| 널로 설정   | "10002345987;write;error;code=400;topic does not exist;"를 입력 | "10002345987*"을 입력        |
| ;          | "code=400" 또는 "topic does not exist"를 입력                     | "code=40?" 또는 "code*"를 입력 |
| ;=         | "code", "400" 또는 "code=400"을 입력                        | "topic*" 또는 "40?"을 입력     |
| ;  =       | "topic", "does", "not" 또는 "exist"를 입력                    | "do*"를 입력                |

### 키 값 인덱스

CLS는 캡처 구성의 key에 따라 키 값 인덱스를 구성할 수 있습니다. 키 값 인덱스 구성에서 인덱스 요구 사항에 따라 적절한 key를 입력하고 해당 데이터 유형(현재 text, long, 및 double 지원)을 지정하십시오. 그 중 text 데이터 유형은 사용자 지정을 단어 구분 기호를 지원합니다. 사용자는 key에 따라 다른 단어 구분 기호를 설정할 수 있습니다.
![](https://main.qcloudimg.com/raw/c65aa983cedb1bf2439cba5a8d85a2de.png)

## 데이터 유형

CLS는 다음 세 가지 필드 유형을 지원합니다.

| 이름   | 유형 설명                 |
| ------ | :----------------------- |
| text   | 텍스트 유형                 |
| long   | 정수 값 유형(Int 64)   |
| double | 부동 소수점 값 유형(64 비트) |

## 주의 사항

1. 인덱스가 비활성화된 경우, 캡처된 로그 데이터를 검색할 수 없습니다.
2. 인덱스가 활성화된 경우, 캡처된 로그를 바로 검색할 수 있습니다.
3. 데이터 저장 시간은 로그 집합의 저장 시간과 동일합니다.
4. 단일 로그 토픽이 여러 번 활성화되거나 비활성화된 경우, 활성화 기간 동안의 로그 데이터를 검색할 수 있습니다.

