## 소개
Tencent Cloud COS는 리소스 URL을 사용하는 공중망 트래픽에 대한 악성 프로그램의 부정 행위 또는 악성 수단으로 초래한 리소스 훔치기로 인한 불필요한 손실을 방지하기 위해 사용자에게 핫 링크 보호 지원을 제공합니다. 보안 보호를 위해 콘솔의 핫 링크 보호 설정에서 블랙리스트/화이트리스트를 구성하는 것이 좋습니다.

## 설정 절차
1. [COS 콘솔](https://console.cloud.tencent.com/cos5)에 로그인하고 좌측 메뉴 [버킷 리스트]에 액세스한 후 핫 링크 보호 설정이 필요한 버킷(예: examplebucket-1250000000)을 선택한 후, 해당 버킷에 액세스합니다.
![](https://main.qcloudimg.com/raw/b373ba0eba6a1723236fce8e4a945c64.png)
2. [기본 구성]을 한번 클릭한 후, 핫 링크 보호 설정을 찾아 [편집] 버튼을 한번 클릭하면 편집 가능 상태로 액세스합니다.
![핫 링크 보호 설정1](https://main.qcloudimg.com/raw/97dceabb6297080878dfd871f143af79.png)
3. 현재 상태가 시작임을 수정한 다음 리스트 유형(블랙리스트 또는 화이트리스트)을 선택하고 해당되는 도메인 이름을 설정하고 [저장]을 클릭하면 됩니다.
![핫 링크 보호 설정2](https://main.qcloudimg.com/raw/619a86e9eb8b1f4fc9741abcebd915d8.png)

>?
>- 사용자는 핫 링크 보호 상태를 활성화로 설정한 후, 반드시 해당하는 도메인 이름을 입력해야 합니다.
>- 블랙리스트: 리스트 내의 도메인 이름이 버킷에 접근하는 기본 접근 주소를 제한하며, 리스트 내의 도메인 이름이 버킷의 기본 접근 주소에 접근할 경우 403을 반환합니다.
>- 화이트리스트: 리스트 외의 도메인 이름이 버킷에 접근하는 기본 접근 주소를 제한하며 리스트 외의 도메인 이름이 버킷의 기본 접근 주소에 접근할 경우 403을 반환합니다.
>- HTTP 요청 헤더는 빈 referer입니다(즉, referer 필드가 없거나 referer 필드가 비어 있음)
>- 도메인 이름이 최대 10개의 도메인 이름을 지원할 수 있고 접두사와 매칭될 수 있도록 설정합니다. 도메인 이름, IP와 와일드 카드 \* 등 형식의 주소를 지원합니다. 한 개 주소가 1행을 차지하고 여러 개 주소는 줄을 바꿔야 합니다.
  예시(예시로만 사용되며 실질적인 의미는 없습니다.)
  `www.example.com`을 구성하면 `www.example.com/123`, `www.example.com.cn` 등 `www.example.com`이 접두사인 주소를 제한할 수 있습니다.
  포트가 있는 도메인 이름과 IP를 지원합니다. 예: `www.example.com:8080`, `10.10.10.10:8080` 등 주소.
  `* .example.com` 구성은 `a.b.example.com/123`, `a.example.com` 등 주소를 제한할 수 있습니다.
>- 만약 CDN 도메인 이름을 통해 가속 접근하면 CDN의 핫 링크 보호 규칙을 먼저 실행하고 COS 서비스의 핫 링크 보호 규칙을 실행합니다.


## 예시
APPID가 1250000000인 사용자는 이름이 examplebucket-1250000000인 버킷을 생성하였고 루트 디렉터리에 1장의 사진 picture.jpg을 배치하면 COS는 규칙에 따라 기본 접근 주소를 생성합니다.
```shell
examplebucket-1250000000.file.myqcloud.com/picture.jpg
```
사용자 A가 보유한 웹사이트:
```shell
www.example.com
```
또한, 이 사진을 메인 페이지 index.html에 삽입하였습니다.

이때, 웹사이트 운영자 B가 보유한 웹사이트:
```shell
www.fake.com
```
웹사이트 운영자 B는 이 사진을 `www.fake.com`에 배치하고자 합니다. 트래픽 비용 지불을 원하지 않으므로 직접 다음 주소를 통해 picture.jpg를 인용하여 `www.fake.com` 웹사이트의 메인 페이지 index.html에 배치하였습니다.
```shell
examplebucket-1250000000.file.myqcloud.com/picture.jpg
```

사용자 A의 손실을 막기 위해 상기 상황에 대상하여 당사는 두 가지 핫 링크 보호 방식을 제공합니다.

#### 방식1

**블랙리스트** 모드를 구성하고 도메인 이름 설정에 `*.fake.com`을 입력하고 저장하면 적용합니다.

#### 방식2

**화이트리스트** 모드를 구성하고 도메인 이름 설정에 `*.example.com`을 입력하고 저장하면 적용합니다.

### 활성화 전

`http://www.example.com/index.html`에 접근 시 그림이 정상으로 나타납니다.
`http://www.fake.com/index.html`에 접근 시에도 그림이 정상으로 나타납니다

#### 활성화 후

`http://www.example.com/index.html`에 접근 시 그림이 정상으로 나타납니다.
`http://www.fake.com/index.html`에 접근 시 그림이 나타나지 않습니다.
