## Overview

CDN acceleration is used to speed up the download and delivery of COS bucket content, especially if the same content needs to be repeatedly downloaded.

## Setup Instructions

You can manage the following domain names to quickly download and deliver objects in buckets:
- Default domain name: the COS origin server's domain name, which is automatically generated based on the bucket name and region when the bucket is created. It should be distinguished from the default accelerated domain name.
- Default accelerated domain name: the the domain name passing through CDN acceleration nodes and is generated by the system. You can choose to enable or disable it.
- Custom domain name: you can bind the registered custom domain name to the bucket, and access the objects in the bucket via the custom domain name.

With CDN acceleration enabled for the default accelerated domain name or the custom domain name, if the origin server is a public-read bucket, the objects in the origin server can be accessed directly via the CDN accelerated domain name or the custom domain name. If the origin server is a private-read bucket, it is recommended to enable the CDN origin-pull authentication and CDN authentication configuration options.

- Origin-pull authentication (CDN service authorization must be added before it can be enabled): If the data requested by a user is not cached in the edge node, CDN fetches the data from the origin server. If COS is used as the origin server and origin-pull authentication is enabled, the CDN edge server accesses the COS origin server using a special service identity (which must be authorized by CDN service) to acquire and cache the data in the private bucket.
- CDN authentication configuration: When a user attempts to acquire cached data by accessing an edge server, the edge server will verify the identity authentication field in the accessed URL based on the authentication configuration rules to prevent unauthorized access and realize hotlink protection, thus improving the security and reliability of the data cached in the edge server.

CDN authentication configuration and CDN origin-pull authentication do not conflict with each other, but whether to enable them can affect the level of data protection, as shown below:


| Bucket access permission | CDN origin-pull authentication | CDN authentication configuration | Origin server can be accessed via CDN accelerated domain name | Origin server can be accessed via COS origin server's domain name | Scenarios |
| ------------------- | ------------ | ------------ | --------------- | --------------- | ------------ |
| Public read | Disabled | Disabled | Yes | Yes | Public read globally |
| Public read | Disabled | Enabled | URL authentication is required | Yes | Not recommended |
| Public read | Enabled | Disabled | Inaccessible | Accessible | Not recommended |
| Public read | Enabled | Enabled | URL authentication is required | Accessible | Not recommended |
| Private read + CDN service authorization | Enabled | Enabled | URL authentication is required | COS authentication is required | Full link protection |
| Private read + CDN service authorization | Disabled | Enabled | URL authentication is required | COS authentication is required | Not recommended |
| Private read + CDN service authorization | Enabled | Disabled | Yes | COS authentication is required | Origin server protection |
| Private read + CDN service authorization | Disabled | Disabled | No | COS authentication is required | Not recommended |
| Private read | Disabled | Enabled or disabled | No  | COS authentication is required | CDN is unavailable |

> For the first row, if the bucket access permission in origin server is public read, and neither CDN origin-pull authentication nor CDN authentication configuration is enabled, then CDN edge servers and buckets in origin server can be accessed directly via the CDN domain name, and buckets in origin server can be accessed directly via the COS domain name.

## Default Accelerated Domain Name
### Procedure
#### Default CDN acceleration
1. Click **Domain Name Management** at the top of the bucket details page, click **Edit**, and then set the current status of the default accelerated domain name to Enabled. The origin server type defaults to **XML Node**, but if you have enabled static website for the origin server bucket and want to accelerate content delivery for the static website, select **Static Website Node**, as shown below:
![](https://main.qcloudimg.com/raw/542a778a7177e3aae0e49580aaefe348.png)
> If you have never used Tencent Cloud CDN service, you need to go to CDN Console to use CDN service before you can access **Domain Name Management**.
2. If the bucket access permission is public read, you don't need to enable **origin-pull authentication**. Clicking **Save** will enable the CDN acceleration.

#### Enable authentication
1. If the bucket access permission is private read, **origin-pull authentication** needs to be enabled (on condition that CDN service authorization has been added). Log in to the [COS Console](https://console.cloud.tencent.com/cos5), go to the **Bucket List** from the left side bar, and then click the bucket (e.g. example) for which you want to set the domain name to enter the bucket details page, as shown below: 
![](https://main.qcloudimg.com/raw/688c1dc518cb417461bc9d4645e4c41c.png)
2. Click **Domain Name Management** at the top of the bucket details page, click **Edit**, enable **Origin-pull Authentication**, and then click **Save** to enable CDN acceleration, as shown below:
![](https://main.qcloudimg.com/raw/9b662fe72d91ff15e2e664ef4ffbc1c0.png)
> For private-read buckets, if both origin-pull authentication and CDN service authorization are enabled, signature is not required for the access to origin server via CDN, and cached resources in CDN will be distributed on the public network, which will affect the data security. Therefore, it is recommended to enable CDN authentication.

3. After you click **Save**, the status of CDN authentication is shown under "Default Accelerated Domain Name". Click **Authentication Configuration** to configure authentication, as shown below:
![](https://main.qcloudimg.com/raw/f836aa8efc9b07b79d47a203c697aa49.png)

4. In the page that pops up, click the Enable button next to "Authentication Configuration", and then enter the authentication Key and validity period, as shown below:
![](https://main.qcloudimg.com/raw/7b8f499321fbe7a61e304397a945215f.png)

5. Click **Authentication Calculator**. The authentication key and validity period specified in the previous step will be entered automatically, and you only need to enter the path of the object to be accessed, and then click **Generate** to get the authentication URL. You can use this URL to directly access the target object. If the authentication key and validity period were not specified in the previous step, enter them and the target path on the authentication calculator, as shown below:
![](https://main.qcloudimg.com/raw/572b32410086d49cbfc00a650eb6f514.png)
## Custom Accelerated Domain Name

>
>- This document only describes how to add a custom domain name and enable CDN acceleration on the COS Console. For more information on how to add a custom domain name on the CDN Console, see [Add Domain Names to CDN](https://cloud.tencent.com/document/product/228/5734). 
>- A maximum of 10 custom domain names can be added on the COS Console.

### Procedure

1. Log in to the [COS Console](https://console.cloud.tencent.com/cos5), go to the **Bucket List** from the left side bar, and then click the bucket (e.g. example) that you need to set the domain name to enter the bucket details page, as shown below: 
![](https://main.qcloudimg.com/raw/688c1dc518cb417461bc9d4645e4c41c.png)

2. Go to **Domain Name Management** from the top of the bucket details page, click **Add Domain Name** in the second column "Custom Accelerated Domain Name", and then enter the custom domain name to be bound (e.g. `www.example.com`). Enable **Origin-pull Authentication**, and click the **Save** button on the right to add the domain name, as shown below:
![](https://main.qcloudimg.com/raw/716e49eb9b9b6600c8afd9deceb78451.png)
> For private-read buckets, if both origin-pull authentication and CDN service authorization are enabled, then signature is not required for the access to origin server via CDN, and cached resources in CDN will be distributed on the public network, which will affect the data security. Therefore, it is recommended to enable CDN authentication (Step 3).

3. After the custom domain name is saved, the Enable button for CDN authentication appears in the **CDN Authentication** column. You can click the button to enable the CDN authentication for custom domain name.
4. Log in to the [CDN Console](https://console.cloud.tencent.com/cdn/access), go to **Domain Name Management** from the left side bar, click **Management** for the domain name to be configured, and then select **Security Configuration**. Enter the authentication key and validity period, and then click **OK**, as shown below:
![](https://main.qcloudimg.com/raw/61310b0c5960b4846a946bbacbc9fd00.png)

5. Click **Authentication Calculator**. The authentication key and validity period specified in the previous step will be entered automatically, and you only need to enter the path of the object to be accessed, and then click **Generate** to get the authentication URL. You can use this URL to directly access the target object. If the authentication key and validity period were not specified in the previous step, enter them and the target path on the authentication calculator, as shown below:
![](https://main.qcloudimg.com/raw/ad4a7703e469269bbf299e19869d00d6.png)

## Note

After CDN acceleration is enabled for a domain name, anyone can directly access the origin server via the domain name. Therefore, if you need to keep you data private, be sure to protect your data in the origin server through **Authentication Configuration**.

