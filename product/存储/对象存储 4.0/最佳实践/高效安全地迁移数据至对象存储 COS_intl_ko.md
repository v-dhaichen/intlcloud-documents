## 개요
COS는 여러 가지 데이터 마이그레이션 방식을 지원합니다. 사용자는 각기 다른 마이그레이션 시나리오에서 각기 다른 데이터의 마이그레이션 방법을 선택할 수 있습니다. 본 문서는 몇 가지 대표적인 마이그레이션 시나리오에서 적용하는 마이그레이션 방식과 해당하는 마이그레이션 실행 절차 및 실행 팁을 소개하여 사용자가 효율적으로 안전하게 데이터를 COS에 마이그레이션할 수 있게 도와드립니다.

| 마이그레이션 유형 | 마이그레이션 방식                                                     |
| -------- | ------------------------------------------------------------ |
| 온라인 마이그레이션 | [COS 마이그레이션](#cos), [마이그레이션 플랫폼 MSP](#msp), [COS 오리진 요청](#huiyuan) |
| 오프라인 마이그레이션 | [클라우드 데이터 마이그레이션 CDM](#cdm )                                      |

## 마이그레이션 시나리오

### 1. 로컬 데이터를 COS로 마이그레이션
로컬 IDC를 보유한 사용자에 대해, COS는 각기 다른 마이그레이션 유형에서 아래 몇 가지 마이그레이션 방식을 지원하여 사용자가 로컬 IDC의 대량 데이터를 COS로 빠르게 마이그레이션할 수 있도록 도와드립니다.

- 온라인 마이그레이션: [COS 마이그레이션](#cos)
- 오프라인 마이그레이션: [클라우드 데이터 마이그레이션 CDM](#cdm)

사용자는 데이터 마이그레이션 량, IDC 출구 대역폭, IDC 유휴 기기 리소스, 접수 가능한 마이그레이션 완료 시간 등 요소로부터 마이그레이션 방식을 어떻게 선택할지를 결정할 수 있습니다. 아래 그림에서는 온라인 마이그레이션을 사용할 때 예상 소요 시간을 표시합니다. 여기서 해당 마이그레이션 주기가 10일의 시간을 초과하거나 마이그레이션 데이터 량이 50TB를 초과할 경우 당사는 [클라우드 데이터 마이그레이션 CDM](#cdm)을 선택하여 오프라인 마이그레이션을 권장합니다. 그렇지 않을 경우 온라인 마이그레이션을 선택하십시오.
![](https://main.qcloudimg.com/raw/b07948f0626973d2d64753df39add6f4.png)
>**주의:**
>1MB 이하의 작은 용량의 파일 수가 비교적 많고 디스크 IO 성능 부족 등도 데이터의 마이그레이션 진도에 영향을 끼칠 수 있습니다.

### 2. 제3자 클라우드 스토리지의 데이터를 COS로 마이그레이션
제3자 클라우드 스토리지를 사용하는 사용자가 각기 다른 클라우드 플랫폼 사이에서 데이터 마이그레이션을 구현하고자 할 경우, COS는 아래 두 가지 마이그레이션 방식을 선택할 수 있습니다.

- 온라인 마이그레이션: [COS 마이그레이션](#cos), [마이그레이션 서비스 플랫폼 MSP](#msp)


이 두 가지 마이그레이션 방식은 데이터 마이그레이션 진도의 조회, 파일 일관성 검사, 실패 시 재개, 중단점 재개 등 기능을 모두 지원하므로 사용자 데이터의 기본적인 마이그레이션 수요를 만족시킬 수 있습니다. 그러나 이 두 가지 마이그레이션 방식은 상호적 형식과 기능적 특성 등에서 아래 표에서와 같이 차별화됩니다. 사용자는 아래 차이성 비교표에 따라 가장 적절한 하나의 방식을 선택하여 데이터 마이그레이션을 진행할 수 있습니다. 주의해야 할 점은 마이그레이션 서비스 플랫폼 MSP를 사용하여 데이터 마이그레이션을 진행할 경우 사용 권한을 신청해야 합니다.

| 마이그레이션 방식         | 상호적 형식                   | 대소형 파일을 구분하는 임계값 | 마이그레이션 동시 발생 진행률                     | HTTPS 안전 전송                         |
| ---------------- | -------------------------- | ------------------ | ------------------------------ | -------------------------------------- |
| COS 마이그레이션    | 구성 문서 수정, 시각화 작업이 아님 | 사용자 지정 조정 가능       | 대형 파일 및 소형 파일의 동시 발생 진도의 정의 | 시작 여부를 선택 가능하며 종료는 마이그레이션 가속화에 도움이 됩니다 |
| 마이그레이션 플랫폼 MSP | 시각화 작업             | 기본값으로 설정       | 전역 일관성                       | 시작                                   |

### 3. 데이터는 URL을 오리진 주소로 COS로 마이그레이션

사용자가 URL 리스트를 데이터 오리진 주소로 사용하여 데이터 마이그레이션하고자 할 경우 COS는 아래 3가지 방식을 지원합니다.

- 온라인 마이그레이션: [COS 마이그레이션](#cos), [마이그레이션 플랫폼 MSP](#msp), [COS 오리진 요청](#huiyuan)

COS 마이그레이션과 마이그레이션 플랫폼 MSP의 선택은 상기 시나리오 2에 소개한 부분을 참조하십시오. 데이터 오리진 서버에서 클라우드로 마이그레이션하는 과정에서 사용자가 데이터 오리진 서버의 핫 데이터를 모두 클라우드로 마이그레이션하고 콜드 데이터가 오리진 서버에 남아 있으려고 하는 경우 [COS 오리진 요청](#huiyuan)의 방식을 사용할 수 있습니다. COS 오리진 요청은 읽기 및 쓰기 접근 요청이 있는 핫 데이터를 COS로 마이그레이션할 수 있으며 자동으로 저빈도 접근 비즈니스 데이터에 대해 콜드/핫 데이터를 분류합니다.

### 4. COS 사이의 데이터 마이그레이션
COS를 사용하고 있는 사용자에 대해 한 개 버킷의 데이터를 같은 계정 하의 다른 버킷(또는 계정　간 지역　간의 버킷)으로 마이그레이션하고자 할 경우 COS가 제공하는 영역 간 복사 기능을 사용하여 데이터 마이그레이션을 진행 가능합니다. 현재 해당 기능은 공식적으로 런칭되지 않았습니다. 기대해 주십시오.

## 마이그레이션 실행

### <span id="cos"> COS 마이그레이션</span>

COS 마이그레이션은 COS 데이터 마이그레이션 기능을 통합된 도구입니다. 사용자는 간단한 구성 작업으로 데이터를 COS로 빠르게 마이그레이션할 수 있습니다.

마이그레이션 실행에는 아래 몇 가지 절차가 있습니다.

1. Java 환경 설치
2. COS 마이그레이션 도구 설치
3. 구성 파일 수정
4. 도구 실행

자세한 실행 방법은 [COS 마이그레이션 문서](https://cloud.tencent.com/document/product/436/15392 )를 참조하십시오.
#### 팁

아래는 최대적으로 마이그레이션 속도를 높일 수 있는 COS 마이그레이션의 구성에 관한 소개입니다.

1. 자체 네트워크 환경에 따라 대형 파일과 소형 파일을 구분하는 임계값과 마이그레이션 동시 발생도를 조정하는 것으로 대형 파일은 분할하고 소형 파일은 동시 전송하는 최상의 마이그레이션 방식을 구현합니다.
  구성 파일 `config.ini`에서 `[common]` 을 파티션하고 `smallFileThreshold` 소형 파일 임계값 매개변수를 수정하여 이 임계값보다 크거나 같은 경우 파티션하고 업로드하며 기본 설정은 5MB입니다. 대형 파일의 동시 발생도 `bigFileExecutorNum`과 소형 파일의 동시 발생도 `smallFileExecutorNum`을 각각 수정합니다. 공중망으로 COS에 접근할 경우 대역폭이 비교적 작으므로 해당 동시 발생도를 줄입니다. 소형 파일과 대형 파일의 동시 발생도는 기본적으로 각각 64와 8입니다.

2. 도구 시행 시간을 조정하고 대역폭 제한을 설정하여 자체 비즈니스 실행이 마이그레이션된 데이터의 대역폭 점용에 의한 영향을 받지 않도록 확보합니다.
  구성 파일 `config.ini`에서 `[common]`을 파티션하고 매개변수 `executeTimeWindow`를 수정합니다. 해당 매개변수는 마이그레이션 도구가 매일 시행되는 시간대를 정의하고 기타 시간은 휴면 상태로 되고 휴면 상태는 마이그레이션을 중단시키고 다음 시간창이 자동으로 계속 실행하기까지 마이그레이션 진도를 유지합니다.

3. 분산형 동시 전송률을 사용하면 마이그레이션 속도를 한층 더 높일 수 있습니다. 사용자는 여러 대의 기계로 COS 마이그레이션을 설치하여 각기 다른 소스 데이터의 마이그레이션 작업을 각각 수행할 수 있습니다.


### <span id="msp"> 마이그레이션 서비스 플랫폼 MSP</span>

마이그레이션 플랫폼 MSP는 여러 가지 마이그레이션 도구를 통합하고 시각화 인터페이스의 플랫폼을 제공하여 사용자가 대규모의 데이터 마이그레이션 작업을 쉽게 모니터링하고 관리할 수 있도록 도와드립니다. 그 중 “파일 마이그레이션 도구”는 사용자가 데이터를 각 유형의 공유 클라우드와 데이터 오리진 서버로부터 COS로 마이그레이션을 진행할 수 있도록 도와드립니다.

마이그레이션 실행에는 아래 몇 가지 절차가 있습니다.

1. 콘솔 탐색 모음 중의 [마이그레이션 도구]에서 “파일 마이그레이션 도구” 입구를 찾아 사용합니다.
2. 마이그레이션 작업을 생성하고 작업 정보를 구성합니다.
3. 작업을 시작합니다.

자세한 실행 방법은 [마이그레이션 도구](https://cloud.tencent.com/document/product/659/15313) 문서를 참고하십시오.
#### 팁

데이터 마이그레이션을 진행하는 과정에서 데이터 소스의 읽기 속도는 각기 다른 네트워크 환경에 따라 다릅니다. 그러나 사용자가 실제 상황에 따라 “마이그레이션 작업 생성” 시 비교적 높은 QPS 동시 발생도를 선택하면 마이그레이션 속도를 높이는 것에 도움을 줄 수 있습니다.


### <span id="cdm"> 클라우드 데이터 마이그레이션 CDM</span>

클라우드 데이터 마이그레이션 CDM은 Tencent Cloud가 제공하는 오프라인 마이그레이션 전용 장치를 사용하여 사용자가 로컬 데이터를 클라우드로 마이그레이션하는 한 가지 마이그레이션 방식으로서 로컬 데이터 센터 중 네트워크 전송을 통한 클라우드 마이그레이션의 시간이 길고 비용이 높으며 보안성이 낮은 문제를 해결할 수 있습니다.

마이그레이션 실행에는 주로 아래 몇 가지 절차가 있습니다.

1. 클라우드 데이터 마이그레이션 CDM 콘솔에서 신청을 제출합니다.
2. 신청 심사가 통과된 후 사용자는 장치의 수령을 기다립니다.
3. 장치를 수령한 후 마이그레이션 장치 매뉴얼에 따라 데이터를 장치에 복사합니다.
4. 데이터 복사 완료 후 콘솔에 재발송 신청을 제출하고 Tencent Cloud가 데이터를 COS로 마이그레이션하기를 기다립니다.

자세한 사항은 [클라우드 데이터 마이그레이션 CDM ](https://cloud.tencent.com/document/product/623) 제품 문서를 참조하십시오.

#### 팁

아래는 오프라인 마이그레이션에 의해 효율적으로 안전하게 데이터를 COS에 마이그레이션하는 방법을 소개합니다.

1. IDC 구성이 10Gbps인 네트워크 환경에서 로컬 데이터 환경이 전송에 방해가 되지 않도록 고성능의 탑재 포인트 서버를 갖추어 복사를 최대적으로 가속합니다.
2. CDM 전송 데이터를 적용하는 가장 빠른 방법은 전송 데이터를 동시 진행하는 것으로 사용자는 장치의 CPU와 메모리 사용률을 모니터링하여 현재 마이그레이션 속도가 예상치보다 낮을 경우 아래 동시 전송 방식을 선택할 수 있습니다.
 - 여러 대의 장치를 각기 다른 네트워크 API를 통해 동일한 CDM 장치에 연결합니다.
 - 여러 대의 장치를 각기 다른 네트워크 API를 통해 여러 대의 CDM 장치에 연결합니다.

### <span id="huiyuan">COS 오리진 요청</span>

COS 오리진 요청은 데이터 오리진 서버에서 읽기와 쓰기 접근 요청이 있는 데이터를 자동으로 COS로 마이그레이션합니다. 이 마이그레이션 방식은 사용자가 빠르게 데이터를 콜드 데이터와 핫 데이터로 분류하도록 도와 줄 뿐만 아니라 비즈니스 시스템 중 핫 데이터의 읽기/쓰기 접근 속도를 높일 수 있습니다.

마이그레이션 실행에는 주로 아래 몇 가지 절차가 있습니다.

1. COS 콘솔에 액세스하여 마이그레이션 대기 데이터의 목적 버킷에서 오리진 요청 설정을 시작합니다.
2. 버킷 오리진 요청 주소를 구성한 후 저장합니다.
3. 비즈니스 시스템의 읽기/쓰기 요청을 COS로 전환합니다.

자세한 실행 방법은 [오리진 요청 설정](https://cloud.tencent.com/document/product/436/13310) 콘솔 가이드 문서를 참조하십시오.

#### 팁

아래 절차는 소스 데이터의 콜드/핫 분리를 완성할 수 있고 핫 데이터는 COS로 원활하게 마이그레이션될 수 있으므로 핫 데이터의 읽기 요청 속도를 가속할 수 있습니다.

1. 비즈니스 시스템의 읽기/쓰기 요청을 COS에 전환하여 COS 콘솔에서 오리진 요청 설정 기능을 실행하며 오리진 요청 주소는 데이터 오리진 서버입니다. 이 경우 시스템 구조는 아래 그림과 같습니다.
  ![](https://main.qcloudimg.com/raw/c30ed0391380420007bf9e2d89df89eb.png)

2. 일정한 시간 후 콜드 데이터는 여전히 오리진 서버에 남아 있지만 핫 데이터는 COS로 마이그레이션되었습니다. 마이그레이션 과정 중 비즈니스 시스템은 영향을 받지 않습니다.
