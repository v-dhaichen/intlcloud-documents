## アクセス管理の概要

アクセス管理（Cloud Access Management、CAM）は、Tencent Cloudにより提供される認証および権限付与サービスであり、主にユーザーのTencent Cloudアカウント内のリソースへのアクセス権限の安全管理に使用されます。権限を付与する時に、権限付与のオブジェクト、リソース、操作を管理でき、かついくつかのポリシー制限の設定をサポートします。

## アクセス管理機能
## ルートアカウントのリソースの権限付与
ルートアカウントに関連付けられた身分認証情報を共有することなく、サブアカウントまたは他のルートアカウントを含むルートアカウントのリソースを他のユーザーに権限付与できます。

### 詳細な権限管理
異なるリソースに対して異なるアクセス権限を異なるユーザーに付与できます。例えば、一部のサブアカウントが特定のCOSバケットの読み取り権限を持っているが、他のサブアカウントまたはルートアカウントが特定のCOSの書き込み権限を持っていることなどを許可できます。上記リソース、アクセス権限およびユーザーはいずれも一括してパケット化することができます。

### 最終の一致性
CAMは現在、Tencent Cloudの複数の地域をサポートし、ポリシーデータをコピーすることにより地域間のデータ同期を実現し、CAMポリシーの変更は適時に提出されますが、地域間のポリシー同期はポリシーの有効化の遅延を引き起こす可能性があります；同時に、CAMはキャッシュ（現在は1分間のキャッシュである）を使用してパフォーマンスを向上させ、キャッシュの期限切れ後にアップデートを有効化する必要があります。

## アクセス管理の適用シナリオ
### 企業サブアカウントの権限管理
企業内のさまざまな職務の従業員は、この企業のクラウドリソースの最小限アクセス権限を持っている必要があります。

シナリオ：ある企業は、CVM、VPCインスタンス、CDNインスタンス、COSバケットおよびオブジェクトなどを含む多くのクラウドリソースを所有しています。この企業は、開発者、テスター、保守管理者などを含む多くの従業員を抱えます。
一部の開発者は自分のプロジェクトに関連付けられた開発マシンのクラウドリソースの読み書き権限を持っている必要があり、テスターは自分のプロジェクトのテストマシンのクラウドリソースの読み書き権限を持っている必要があり、保守管理者はマシンの購入および日常の運用を担当します。企業従業員の責任または参加するプロジェクトが変更されると、対応する権限は終了します。

### 異なる企業間の権限管理
クラウドリソースは異なる企業間で共有する必要があります。

シナリオ：ある企業が多くのクラウドリソースを所有しています。この企業は製品開発に集中することを望み、クラウドリソースの保守管理作業を他の運営会社に依頼します。運営会社の契約が終了すると、対応する管理権限は解除されます。

## アクセス管理ポリシーの構文
ポリシー（policy）は、複数の要素で構成され、権限付与の具体的な情報を説明するために使用されます。コア要素は、プリンシパル（principal）、操作（action）、リソース（resource）、有効化条件（condition）および効果（effect）を含みます。詳細については、[アクセスポリシーの言語概要](https://cloud.tencent.com/document/product/436/18023)を参照してください。

>?
>- 要素は小文字のみをサポートします。それらの説明には順序要件はありません。
>- ポリシーには特定の条件制約がない場合、condition要素はオプションです。
>-principal要素をコンソールに書き込むことはできず、principalは、ポリシー管理APIでおよびポリシー構文の関連パラメータでのみサポートされます。

### コア要素
#### バージョンversion
ポリシー構文のバージョンを説明します。現在は2.0のみが許可されます。この要素は必須です。

#### プリンシパルprincipal
ポリシーが付与されるエンティティを説明するために使用されます。ユーザー（開発者、サブアカウント、匿名ユーザー）、ユーザーグループを含み、この要素は、ポリシー管理APIでおよびポリシー構文の関連パラメータでのみサポートされます。

#### ステートメントstatement
1つ以上の権限の詳細を説明するために使用されます。この要素は、action、resource、condition、effectなどの複数の他の要素の権限または権限集合を含みます。1つのポリシーには、1つのstatement要素のみがあります。この要素は必須です。

#### 操作action
許可または拒否の操作を説明するために使用されます。操作は、API（nameのプレフィックスで記述される）または機能集合（permidのプレフィックスで記述される特定のAPI集合である）であってもよいです。この要素は必須です。

#### リソースresource
権限付与の具体的なデータを説明するために使用されます。リソースは6段式で説明されます。各製品のリソース定義の詳細は異なります。リソースの指定方法については、作成されたリソースステートメントに対応する製品ドキュメントを参照してください。この要素は必須です。

#### 有効化条件condition
ポリシー有効化の制約条件を説明するために使用されます。条件は、演算子、操作キーおよび操作値を含みます。条件値は、時間、IPアドレスなどの情報を含むことができます。一部のサービスでは、条件に他の値を指定することができます。この要素は非必須です。

#### 効果effect
allow（許可）とdeny（明示的な拒否）の両方を含むステートメントの結果を説明するために使用されます。この要素は必須です。

### ポリシーの制限
| 制限項目                              | 制限値    |
| ----------------------------------- | --------- |
| 1つのルートアカウント内のユーザーグループ数              | 20個    |
| 1つのルートアカウント内のサブユーザー数              | 1000個    |
| 1つのサブユーザーが加入可能なユーザーグループ数      | 10個     |
| 1つのユーザーグループ内のサブユーザー数             | 100個    |
| 1つのルートアカウントのポリシー数                  | 1000個   |
| 1つのCAMユーザー、ユーザーグループに関連付けられたポリシー数  | 20個     |
| カスタマイズポリシーの最大文字数                   | 4096文字 |

### ポリシーの例
この例は以下のように説明されます：ルートアカウントID 1238423に属するサブアカウントID 3232523およびグループID 18825が、北京地域のCOSバケットbucketAと広州地域のCOSバケットbucketBのオブジェクト2に対して、アクセスIPが`10.*.*.10/24`のIPアドレス範囲にある時、すべてのCOSのAPI読み取り権限とオブジェクト書き込み権限、およびメッセージキュー送信権限を持つことを許可します。

```json
{     
        "version":"2.0",
        "principal":
		   {"qcs":["qcs::cam::uin/1238423:uin/3232523",
                        "qcs::cam::uin/1238423:groupid/18825"]
		   },
        "statement":
        [
           {
              "effect":"allow",
              "action":["name/cos:PutObject","permid/280655"],
              "resource":["qcs::cos:ap-beijing:uid/1238423:bucketA-1238423/*",
                        "qcs::cos:ap-guangzhou:uid/1238423:bucketB-1238423/object2"],
               "condition": {"ip_equal":{"qcs:ip":"10.*.*.10/24"}}
           },
           {
             "effect":"allow",
             "action":"name/cmqqueue:Sendmessages",
             "resource":"*"
           }
       ]
}
```
