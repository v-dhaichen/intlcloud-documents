## CAM 개요

CAM(Cloud Access Management)은 Tencent Cloud가 제공하는 일종의 신원 검증과 라이센싱 서비스로 고객이 Tencent Cloud 계정에 속한 리소스에 대한 접근 권한을 안전하게 관리하는 데 사용됩니다. 접근 권한을 부여할 때, 접근 권한을 받은 객체, 리소스, 작업을 관리할 수 있으며, 접근 제어에 일부 정책을 설정할수 있도록 지원합니다.

## CAM 기능
### 루트 계정 리소스의 권한 부여
루트 계정의 관련 자격 증명을 공유할 필요가 없이 루트 계정의 리소스에 대한 권한을 서브 계정 또는 다른 루트 계정이 포함된 다른 사람에게 부여할 수 있습니다.

### 세분화된 권한 관리
서로 다른 리소스에 대해 다른 사람에게 다른 권한을 부여할 수 있습니다. 예를 들어 특정 서브 계정에 특정 COS 버킷의 읽기 권한을 허용하고, 또 다른 서브 계정이나 루트 계정에는 COS 버킷에 대한 쓰기 권한을 허용할 수 있습니다. 위의 리소스, 접근 권한과 사용자는 모두 배치로 작업할 수 있습니다.

### 최종 일관성
현재 CAM은 Tencent Cloud의 여러 지역을 지원하고 있으며, 정책 데이터를 복제하여 지역 간의 데이터 동기화를 구현합니다. CAM 정책의 수정은 즉시 제출되지만, 지역 간의 정책 동기화로 인해 적용 시간에 지연이 있을 수 있습니다. 또한 CAM은 캐시를 사용하여 성능을 향상시킬 수 있습니다(현재 캐시: 1분). 캐시가 만료된 후에 업데이트할 수 있습니다.

## CAM 적용 시나리오
### 기업 서브 계정 권한 관리
기업 내의 직책에 따라 직원들은 해당 기업 클라우드 리소스의 최소 권한을 가집니다.

시나리오: 기업에는 CVM, VPC 인스턴스, CDN 인스턴스, COS 버킷 및 객체 등 많은 클라우드 리소스가 있습니다. 이 기업에는 개발자, 테스터, OPS 인력을 포함한 많은 직원이 있습니다.
일부 개발자는 자신의 프로젝트와 관련된 개발 서버 클라우드 리소스에 대한 읽기/쓰기 권한이 필요합니다. 테스터는 프로젝트의 테스트 서버 클라우드 리소스에 대한 읽기/쓰기 권한이 있어야 합니다. OPS 담당자는 서버구매 및 일상 운영을 담당합니다. 기업 직원의 책임이나 참여한 프로젝트가 변경되면 해당 권한이 종료됩니다.

### 서로 다른 기업 간의 권한 관리
서로 다른 기업 간에 클라우드 리소스를 공유해야 합니다.

시나리오: 어느 기업은 많은 클라우드 리소스를 보유하고 있으며 제품 개발에 집중하고 클라우드 리소스 OPS 작업을 다른 운영 업체에게 부여하기를 원합니다. OPS의 계약이 종료되면 해당 관리 권한도 회수됩니다.

## CAM 정책 구문
정책(policy)은 몇 가지 요소로 구성되며, 권한 부여에 대한 구체적인 정보를 설명합니다. 핵심 요소로는 의뢰인(principal), 작업(action), 리소스(resource), 효력 발생 조건(condition) 및 효력(effect)이 있습니다. 더 많은 내용을 알고 싶으면, [액세스 정책 언어 개요](https://cloud.tencent.com/document/product/436/18023)를 참조하십시오.

>?
>- 요소는 소문자만 지원하며, 설명 순서에 대한 제한이 없습니다.
>- 정책에 대해 특정 제한이 없는 경우, condition 오소는 옵션입니다.
>- 콘솔에서 principal 요소를 입력할 수 없으니, 정책 관리 API 또는 정책 구문과 관련된 매개변수에서 principal 사용은 지원합니다.

### 핵심 요소
#### 버전 version
정책 구문 버전에 대해 설명합니다. 현재 허용 값은 2.0이며, 필수 항목입니다.

#### 의뢰인 principal
정책 권한을 부여하는 엔터티를 설명하는 데 사용됩니다. 사용자(개발자, 서브 계정, 익명 사용자), 사용자 그룹을 포함하며, 정책 관리 API 또는 정책 구문과 관련된 매개변수에서 해당 요소의 사용은 지원합니다.

#### 문구 statement
하나 또는 여러 권한의 세부 정보를 설명하는 데 사용됩니다. 해당 요소는 action, resource, condition, effect 등 여러 개의 다른 요소의 권한이나 권한의 집합을 포함합니다. 하나의 정책에는 하나의 어구 요소가 있으며, 해당 요소는 필수 항목입니다.

#### 작업 action
허용 또는 거절에 대한 작업을 설명하는데 사용됩니다. 작업은 API(name은 접두사임)나 기능 세트(한 그룹의 특정 API, permid 접두사로 설명)로 할 수 있습니다. 해당 요소는 필수 항목입니다.

#### 리소스 resource
권한 부여에 대한 구체적인 데이터를 설명하는 데 사용됩니다. 리소스는 육단식으로 설명됩니다. 제품마다 리소스 정의에 대한 세부 내용은 일정한 차이가 있습니다. 리소스 정보를 어떻게 지정하는지에 대해서는,귀하가 작성하신 리소스 선언에 해당하는 제품 문서를 참조하십시오. 해당 요소는 필수 항목입니다.

#### 적용 조건 condition
정책 적용에 대한 제약 조건을 설명하는 데 사용됩니다. 조건은 작업 기호, 작업 키와 작업 값으로 구성되었습니다. 조건값은 시간, IP 주소 등의 정보를 포함하고 있습니다. 일부 서비스는 조건에 다른 값을 지정하는 것을 허용합니다. 해당 요소는 필수 항목이 아닙니다.

#### 효력 effect
allow(허용)와 deny(명시적 거부) 두 가지 상황을 포함한 선언이 생성되는 결과를 설명하는 데 사용됩니다. 해당 요소는 필수 항목이 아닙니다.

### 정책 제한
| 제한 항목                           | 값    |
| ----------------------------------- | --------- |
| 하나의 기본 계정 안의 사용자 그룹 수              | 20개    |
| 하나의 기본 계정 안의 서브 사용자 수              | 1000개    |
| 하나의 서브 사용자가 가입할 수 있는 사용자 그룹 수              | 10개    |
| 하나의 사용자 그룹 안의 서브 사용자 수              | 100개    |
| 하나의 루트 계정의 정책 수              | 1000개    |
| 하나의 CAM 사용자, 사용자 그룹에 연결된 정책 수              | 20개    |
| 사용자 지정 전력의 최대 문자 수                    | 4096자 |

### 정책 예시
예시 설명: 루트 계정 ID 1238423에 속한 ID가 3232523인 서브 계정 및 ID가 18825인 그룹의 경우, 베이징 지역의 COS bucketA와 광저우 지역의 COS bucketB에 있는 object2에 대해, IP가 `10.*.*.10/24`인 주소 범위를 접근할 때, 모든 COS는 API를 읽을 수 있는 권한 및 객체에 대한 쓰기 권한을 가지며, 대기열을 발송할 수 있는 권한을 허용합니다.

```json
{     
        "version":"2.0",
        "principal":
		   {"qcs":["qcs::cam::uin/1238423:uin/3232523",
                        "qcs::cam::uin/1238423:groupid/18825"]
		   },
        "statement":
        [
           {
              "effect":"allow",
              "action":["name/cos:PutObject","permid/280655"],
              "resource":["qcs::cos:ap-beijing:uid/1238423:bucketA-1238423/*",
                        "qcs::cos:ap-guangzhou:uid/1238423:bucketB-1238423/object2"],
               "condition": {"ip_equal":{"qcs:ip":"10.*.*.10/24"}}
           },
           {
             "effect":"allow",
             "action":"name/cmqqueue:Sendmessages",
             "resource":"*"
           }
       ]
}
```
