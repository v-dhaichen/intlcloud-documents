
##　操作シナリオ
セキュリティグループは、フィルタ機能を備えたステートフルの仮想ファイアウォールです。1台または複数のデータベースのネットワークアクセスを制御するために使用し、Tencent Cloud が提供する重要な NS 隔離手段です。セキュリティグループはロジックによるグループです。同一リージョン内で同一の NS 隔離要件を持ったデータベースインスタンスを、同一のセキュリティグループに追加することができます。データベースは CVM などとセキュリティグループリストを共有し、セキュリティグループ内は規則マッチングに基づいています。具体的な規則と制限については、[セキュリティグループの説明](https://cloud.tencent.com/document/product/215/20089)をご覧ください。
>!
> - データベースセキュリティグループは、現在のところ**Virtual Private Cloud（VPC）のイントラネットアクセスと外部ネットワークアクセスのネットワーク制御にのみ対応しています。基本ネットワークのネットワーク制御には対応していません**。
> - 広州、上海、北京、成都エリアのみ、データベースの**外部ネットワークアクセス**のセキュリティグループに対応しています。その他のエリアはサポート対象外です。
> - **データベースにはアクティブなアウトバウンドトラフィックがないため、アウトバウンドルールはデータベースに対して効力がありません**。
> - TencentDB for Redis のセキュリティグループは、マスターインスタンス、リードオンリーインスタンスと災害復旧インスタンスに対応しています。
> - セキュリティグループがデフォルトで提供するテンプレートについて、以下の注意が必要です。
 - Linux ポート22を開放する ：SSH ログインにより TCP のポート22 からパブリックネットワークまでのみが開放され、イントラネットポートが全て接続されている場合、**このテンプレートはデータベースに対して効力がありません**。
 - Windows ポート3389を開放する ：MSTSC ログインにより TCP のポート3389 からパブリックネットワークまでのみが開放され、イントラネットポートが全て接続されている場合、**このテンプレートはデータベースに対して効力がありません**。
 - 全ポートを開放する：全ての IP にデータベースへのアクセスを許可すると、セキュリティリスクが発生します。


## 操作手順
### セキュリティグループの作成

1. [Tencent Cloud コンソール](https://console.cloud.tencent.com/)にログインし、【CVM】をクリックして CVM の管理ページに入ります。左側のナビゲーションバーから【セキュリティグループ】をクリックし、セキュリティグループの管理ページに入ります。
![](https://main.qcloudimg.com/raw/df452fec405d26252d03eead48af985a.png)
2. 【新規作成】をクリックして【テンプレート】からテンプレートまたはカスタマイズを選択し、セキュリティグループの【名前】を入力します（my-security-group など）。【所属プロジェクト】を選択し、【備考】を選択してから【OK】をクリックします。


### セキュリティグループの設定
[セキュリティグループ](https://cloud.tencent.com/doc/product/213/500) は、Tencent Cloud が提供するインスタンスレベルのファイアウォールです。データベースの入出トラフィックを制御できます。インスタンスを購入する際にセキュリティグループとの紐づけを行うことができます。インスタンス購入後に、コンソールでセキュリティグループと紐付けしても構いません。
>! 現在、TencentDB for Redis のセキュリティグループは、**VPC のデータベース**設定にのみ対応しています。

1. [Redis コンソール](https://console.cloud.tencent.com/redis)にログインします。
2. インスタンスリストからセキュリティグループを設定するインスタンスを選択し、インスタンス名をクリックしてインスタンス詳細のページに入ります。
3. 【セキュリティグループ】ページで【セキュリティグループの設定】をクリックします。
![](https://main.qcloudimg.com/raw/8396b0a2797acae97fb677ad4c2d5a9b.png)
4. 紐付けするセキュリティグループを選択して【OK】をクリックすれば、セキュリティグループとデータベースの紐づけが完了します。 

### セキュリティグループの削除
1. [セキュリティグループコンソール](https://console.cloud.tencent.com/cvm/securitygroup)にログインし、【アクション】から【詳細】>【削除】を選択します。
2. セキュリティグループの削除ページで【OK】をクリックします。
>?現在のセキュリティグループに関連する CVM がある場合、先にセキュリティグループを解除してから削除する必要があります。

### セキュリティグループのクローン作成
1. [セキュリティグループコンソール](https://console.cloud.tencent.com/cvm/securitygroup)にログインし、【アクション】から【詳細】>【クローン作成】を選択します。
2. セキュリティグループのクローン作成ページでターゲットリージョン、ターゲットプロジェクトを選択し、【OK】をクリックします。
>?新しいセキュリティグループを CVM と関連付けたい場合、セキュリティグループの“インスタンスの管理”でもう一度 CVM を関連付けます。

### セキュリティグループルールの追加
1. [セキュリティグループコンソール](https://console.cloud.tencent.com/cvm/securitygroup)にログインし、更新するセキュリティグループを選択してセキュリティグループ名をクリックします。
2. 【インバウンド/アウトバウンドルール】ページで、【ルールの追加】をクリックします。
3. ルール追加ページでルール情報を設定し（ソース/ターゲットを10.0.0.0/0に指定し、プロトコルポートをTCP:3306に指定する等）、【完了】をクリックします。

### セキュリティグループルールのインポート/エクスポート
1. [セキュリティグループコンソール](https://console.cloud.tencent.com/cvm/securitygroup)にログインし、更新するセキュリティグループを選択してセキュリティグループ名をクリックします
2. 【インバウンド/アウトバウンドルール】ページで、【ルールをインポート】をクリックします。
 - 既存のルールがある場合、ルールをインポートすると既存のルールに上書きされてしまうため、先に既存のルールをエクスポートするこことをお勧めします。
 - 元々ルールがない場合は先にテンプレートをエクスポートし、テンプレートファイルを編集した後に再度【ファイルの選択】をクリックしてテンプレートファイルを選択し、【インポートの開始】をクリックします。	





