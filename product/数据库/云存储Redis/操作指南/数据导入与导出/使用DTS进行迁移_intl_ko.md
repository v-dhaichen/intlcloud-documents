
## 소개
온라인 마이그레이션 도구는 현재 공중망 자체 구축, CVM 자체 구축, Direct Connection, VPN 액세스, TencentDB for Redis 인스턴스의 마이그레이션을 지원합니다.
온라인 마이그레이션 도구는 현재 Redis 2.8 마스터/슬레이브 버전 인스턴스의 마이그레이션만 지원합니다. 오리진 인스턴스 버전은 Redis 2.8 및 그 이하의 버전이어야 합니다.

| 용어집 | 설명 | 
|---------|---------|
| 오리진 인스턴스 | 마이그레이션한 오리진 인스턴스 | 
| 대상 인스턴스 | 마이그레이션한 대상 인스턴스, 즉, 사용자가 구매한 TencentDB for Redis | 
| CVM이 자체 구축한 인스턴스 마이그레이션 | 사용자가 CVM에 배포한 Redis 서비스를 TencentDB for Redis로 마이그레이션합니다. | 
| 공중망이 자체 구축한 인스턴스 마이그레이션 | 사용자가 공중망 환경에 배포한 Redis 서비스를 TencentDB for Redis로 마이그레이션합니다. | 

>!
- 현재는 Tencent Cloud Redis 2.8 마스터/슬레이브 버전으로의 마이그레이션만 지원합니다.
2. 마이그레이션의 효율을 높이기 위해, CVM 자체 생성한 인스턴스 마이그레이션은 지역 간의 마이그레이션을 지원하지 않습니다.
3. rdb 프로토콜 제한으로 인해 Redis 3.2 버전의 자체 구축 인스턴스 마이그레이션은 현재 지원하지 않습니다.
4. 공중망 인스턴스를 마이그레이션할 때, 오리진 인스턴스의 서비스가 공중망에서 액새스할 수 있도록 확인해야 합니다.
5. 마이그레이션 태스크를 진행할 때, 정상적으로 실행하는 인스턴스만 마이그레이션할 수 있습니다. 비밀번호를 초기화하지 않았거나 기타 태스크에 실행 중인 인스턴스는 마이그레이션할 수 없습니다.
6. 대상 인스턴스는 데이터가 없는 비어 있는 인스턴스여야 합니다. 마이그레이션 과정 중에는 인스턴스가 잠금될 수 있으므로 인스턴스에 쓰기 작업을 수행할 수 없습니다.
7. 마이그레이션이 성공하면, 비즈니스 측에서 데이터를 검증한 후, 오리진 인스턴스와의 연결을 끊고 대상 인스턴스로 전환합니다.

## 마이그레이션 과정
### 1. 마이그레이션 태스크 생성
1. [DTS 콘솔](https://console.cloud.tencent.com/dtsnew/migrate/page)에 로그인하고 데이터 마이그레이션 리스트에서 [태스크 생성]을 클릭하여 마이그레이션 태스크를 생성합니다.
2. [링키지 지역]에서 해당 지역을 선택하고 [0CNY로 구매]를 클릭합니다.

### 2. 태스크 설정
- 태스크 이름: 태스크 이름을 지정합니다.
- 정시 실행: 마이그레이션 태스크를 위해 시작 시간을 지정합니다.

>!
> - 정시 태스크를 수정하고 검증 통과 후, [정시 시작]을 다시 클릭해야 태스크가 정시로 시작됩니다.
> - 태스크가 정시 시작 시간이 지났을 경우, 정시 시작은 즉시 시작으로 변경되며, [바로 시작]을 클릭하면 바로 태스크를 시작할 수 있습니다.

### 3. 소스 데이터베이스와 대상 데이터베이스 설정
CVM의 Redis 인스턴스를 예로 들어 설명하여 공중망 인스턴스 마이그레이션은 이와 같습니다.

| 필드 | 설명 | 주석 | 필수 항목 여부 |
|---------|---------|---------|---------|
| 작업 이름 | 마이그레이션 작업의 이름 | 사용자가 작업을 관리하는 데 도움이 됩니다 | 예 |
| CVM ID | 오리진 Redis 인스턴스가 위치한 CVM ID |마이그레이션 작업은 CVM 인스턴스 ID에 따라, CVM의 운영 상황을 검사합니다. | 예 |
| CVM 사설망 IP |오리진 Redis 인스턴스가 위치한 CVM의 사설망 IP |마이그레이션 작업은 CVM 사설 IP를 검사합니다. | 예 |
| 포트 | 오리진 인스턴스 포트 번호 | 마이그레이션 작업은 오리진 인스턴스 서비스를 액세스합니다. | 예 |
| 비밀번호 | 오리진 인스턴스 비밀번호 |오리진 인스턴스 서비스에 엑세스 시, auth 인증을 진행합니다. | 아니요 |
| 인스턴스 ID | 대상 인스턴스 ID |데이터를 대상 인스턴스로 동기화| 예 |

>!현재 소스 인스턴스의 비밀번호 없이 마이그레이션을 지원합니다.

### 4. 매개변수 설정 및 검증
1. 시스템이 마이그레이션을 시작할 때 이 매개변수를 설정하고 마이그레이션이 종료될 때 매개변수의 히스토리 값을 복구하게 됩니다. [다음 단계: 태스크 검증]을 클릭하여 매개변수를 검증합니다(마이그레이션 효율을 보장하기 위해 기본값을 권장합니다).
![](https://main.qcloudimg.com/raw/af8381c236e912ae4798b296c5cdbe0a.png)
2. 검증이 성공한 후, [시작]을 클릭합니다.
>!
>- 알람 항목이 나타나도 데이터를 마이그레이션할 수 있지만, 알람 내용이 데이터에 영향을 끼치는지 파악해야 합니다.
>- 네트워크가 도달할 수 없는 경우, 오리진 인스턴스가 위치한 서비스 보안 그룹을 검사하여 모든 포트를 개방해야 합니다.

### 5. 마이그레이션 태스크 시동
1. 매개변수 검증이 성공한 후, 태스크는 시동되지 않은 상태에 처하게 되며 [데이터 마이그레이션] 페이지를 반환합니다.
2. [작업] 줄에서 [바로 시작]을 클릭합니다. 태스크를 시동한 후, 태스크 상태는 [검증 중]으로 바뀌며, 태스크는 매개변수 검증을 다시 진행합니다. 검증 기간에는 태스크 취소, 태스크 보기 및 검증 상황 보기만 가능합니다.
3. 매개변수 검증이 성공한 후, 데이터 마이그레이션을 시작합니다.
데이터 동기화 단계에서는 데이터 오프셋, 오리진 인스턴스, 대상 인스턴스 key 변화 상황을 표시합니다.

### 6. 마이그레이션 태스크 완료 
동기화를 끊기 전에, 대상 인스턴스에서 데이터를 검증할 수 있습니다. 검증에 오류가 없을 경우, 마이그레이션 태스크를 완료할 수 있습니다.
오리진 인스턴스와 대상 인스턴스의 키가 서로 일치하면 [확인]을 클릭하여 데이터 동기화 작업을 완료할 수 있습니다.



 
 

