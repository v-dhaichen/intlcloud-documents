
## 概要
オンライン移行ツールは、現在のところパブリックネットワーク自己構築、CVM自己構築、DC、VPN Connections、TencentDB for Redis インスタンスの移行に対応しています。
オンライン移行ツールは、現在のところ Redis 2.8 マスタースレーブ版インスタンスの移行にのみ対応しています。ソースインスタンスのバージョンは、Redis 2.8 以下である必要があります。

| 用語 | 説明 | 
|---------|---------|
| ソースインスタンス | 移行するソースインスタンス。| 
| ターゲットインスタンス | 移行するターゲットインスタンスは、ユーザーが購入した Tencent Cloud Redis です。| 
| CVM 自己構築 | ユーザーが Tencent Cloud サーバ上に配置した Redis サービスが Tencent Cloud Redis に移行されます。| 
| パブリックネットワーク自己構築 | ユーザーが 外部ネットワーク環境に配置した Redis サービスが Tencent Cloud Redis に移行されます。| 

>!
- 現在のところ、Tencent Cloud Redis 2.8 マスタースレーブ版への移行にのみ対応しています。
2. 移行効率を保つため、CVM 自己構築インスタンスはクロスリージョンの移行に対応していません。
3. rdb プロトコルの制限により、現在のところ自己構築インスタンスの Redis バージョン3.2 の移行に対応していません。
4. 外部ネットワークのインスタンスを移行する場合、ソースインスタンスサービスが外部ネットワーク環境でアクセスできるようにする必要があります。
5. タスクの移行を実行する場合、正常な実行状態におけるインスタンスのみ移行できます。パスワードを初期化していないインスタンスや、実行中のタスクがあるインスタンスは移行できません。
6. ターゲットインスタンスは、データのない空のインスタンスである必要があります。移行中、インスタンスはロックされ、インスタンスに書き込みを行うことはできません。
7. 移行に成功すると、サービス側でデータを検証した後にソースインスタンスとの接続を切ることができるため、接続をターゲットインスタンスに切り換えます。

## 移行プロセス
### 1. 移行タスクの新規作成
1. [データ送信サービスコンソール](https://console.cloud.tencent.com/dtsnew/migrate/page) にログインし、データ移行リストで【タスク新規作成】をクリックして移行タスクを作成します。
2. 【リンクするリージョン】で対応するリージョンを選択し、【0元で購入】をクリックします。

### 2. タスク設定
- タスク名：タスク名を指定します。
- 定時実行：移行タスクの開始時間を指定します。

>!
> - 定時タスクを変更する場合、検証にパスした後にもう一度【定時開始】をクリックすることで、タスクを定時に開始させることができます。
> - タスクが定時開始時刻を過ぎている場合は、定時開始がすぐに開始になるため、【すぐに開始】をクリックすることでタスクが開始します。

### 3. ソースライブラリ/ターゲットライブラリを設定
CVM の Redis インスタンスを例に説明します。外部ネットワークのインスタンスの移行も同様です。

| フィールド | 説明 | 備考 | 入力必須 |
|---------|---------|---------|---------|
| タスク名 | 移行タスクの名前 |ユーザーが管理しやすいタスク | 要 |
| CVM インスタンス ID |ソース Redis インスタンスがある Tencent Cloud サーバ ID |移行タスクは CVM インスタンス ID に基づき、Tencent Cloud サーバの実行状況をチェックする | 要 |
| CVM イントラネットス IP |ソース Redis インスタンスがある Tencent Cloud サーバのイントラネット IP |移行タスクはTencent Cloud サーバのイントラネット IP をチェックする | 要 |
|ポート | ソースインスタンスのポート番号 |移行タスクはソースインスタンスのサービスにアクセスする | 要 |
| パスワード | ソースインスタンスのパスワード |ソースインスタンスのサービスにアクセスする際、auth 認証がある | 不要 |
| インスタンス ID | ターゲットインスタンス ID |ターゲットインスタンスにデータを同期する | 要 |

>!現在のところ、ソースのパスワードのない移行をサポートしています。

### 4. パラメータの設定と検証
1. システムは、移行が開始されるとこれらのパラメータを設定します。移行が終了するとパラメータの履歴値が復元され、【次へ：検証タスク】をクリックすることでパラメータの検証を実行します（移行効率を保つため、デフォルト値の使用をお勧めします）。
![](https://main.qcloudimg.com/raw/af8381c236e912ae4798b296c5cdbe0a.png)
2. 検証に成功したら、【開始】をクリックします。
>!
>- アラーム項目が表示された場合でもデータ移行を実行できますが、アラームの内容がデータに影響を及ぼすかどうかを知っておく必要があります。
>- ネットワークにアクセスできない場合、ソースインスタンスがあるサービスのセキュリティグループをチェックしてください。セキュリティグループを全てのポートに開放する必要があります。

### 5. 移行タスクの開始
1. パラメータの検証に成功した後、タスクが開始されていない状態であれば、【データ移行】ページに戻ります。
2. 【操作】から【すぐに開始】をクリックします。タスク開始後、タスクのステータスが【検証中】に変われば、タスクは再びパラメータの検証を実行します。検証中はタスクのキャンセル、タスクの表示、検証状況の表示のみ可能です。
3. パラメータの検証に成功すると、データの移行が開始されます。
データの同期ステップではデータのオフセット量、ソースインスタンス、ターゲットインスタンスの Key の変化状況が表示されます。

### 6. 移行タスクの完了 
同期を切断する前に、ターゲットインスタンスでデータを検証できます。検証に間違いがない場合は、移行タスクを完了します。
ソースインスタンスとターゲットインスタンスの Key が同期された場合、【完了】をクリックすると決定され、データ同期の操作が完了します。



 
 
