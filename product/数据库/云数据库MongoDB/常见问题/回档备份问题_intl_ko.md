
### MongoDB의 매일 자동 백업과 수동 백업을 조작하는 방법?
TencentDB for MongoDB는 매일 자동 백업과 수동 백업을 지원합니다. 백업 데이터는 기본적으로 7일 동안 보관합니다.
- **자동 백업**
인스턴스는 매일 한 번의 자동 백업을 제공합니다. Tencent Cloud [MongoDB 콘솔](https://console.cloud.tencent.com/mongodb)의 인스턴스 세부 정보 페이지의 [롤백과 백업]에서 확인할 수 있습니다.
- **수동 백업**
인스턴스 세부 정보 페이지의 [롤백과 백업]에서 우측 상단의 [수동 백업]을 클릭하고 팝업창에서 백업할 비고를 입력한 후 제출하면 수동 백업이 완료됩니다.

### 백업 문서를 다운로드할 수 있나요?
현재는 지원하지 않습니다.

### 롤백 후 교체 작업을 진행했는데 다시 롤백할 수 있나요?
아니요 없습니다. 교체 후 기존의 백업 문서는 이미 교체 후의 인스턴스에 사용될 수 없어 다시 롤백을 할 수 없습니다. 교체하기 전에 미리 확인하십시오.

### MongoDB 롤백 시간은 어떻게 결정되나요?
롤백은 마지막으로 진행한 전량 백업의 이미지 + oplog에 기반하며 롤백 시간은 oplog 플레이백 양에 의해 결정됩니다.
전량 백업의 시점이 롤백 시간으로부터 오래되었다면 비교적 많은 시간을 들여 oplog를 플레이백해야 합니다.

### MongoDB를 롤백한 후, 전환 작업과 교체 작업의 차이는 무엇인가요?
전환은 롤백 후의 임시 인스턴스를 새로운 인스턴스로 전환하는 것입니다. 해당 인스턴스와 오리진 인스턴스는 대응 관계가 없습니다. 임시 인스턴스의 기본적인 유효 기간은 2일이며 적당한 시일 내에 갱신하시기 바랍니다.
교체는 임시 인스턴스 데이터를 사용하여 현재 인스턴스 데이터를 덮어쓰는 것입니다. 교체 후 인스턴스의 백업 문서는 삭제되며 다시 교체 이전으로 롤백할 수 없으니 주의하시기 바랍니다.

### MongoDB를 롤백한 후 교체 작업을 진행하면 백업 문서가 삭제되나요?
교체 후, 오리진 백업 문서는 교체 후의 인스턴스에서 사용할 수 없습니다. 그러므로, 롤백 과정에서 백업 문서를 삭제합니다.
 
### MongoDB 복제본 세트 인스턴스의 백업과 롤백을 조작하는 방법?
샤딩 클러스터 인스턴스는 현재 인스턴스 수준의 백업과 롤백을 지원합니다.
- **백업**
[콘솔](https://console.cloud.tencent.com/mongodb)의 인스턴스 세부 사항 페이지에서 [수동 백업]을 클릭하여 비고 정보를 입력한 후, [제출]을 클릭하고 인스턴스를 백업합니다.
- **롤백**
롤백 작업 과정에서 롤백할 날짜를 입력해야 합니다. 현재는 5일 내의 임의적인 시점으로 롤백할 수 있습니다. 단, 이것은 2개 백업(성공하고 비 oplog 쓰기 충진 상태가 아님) 간의 시점을 선택하여 롤백하는 것입니다. 조건이 충족하지 않는다면 [수동 백업](https://cloud.tencent.com/document/product/240/7108)을 실행해야 합니다.

### MongoDB에서 샤딩 클러스터 인스턴스를 어떻게 백업하고 롤백하나요?
샤딩 클러스터 인스턴스의 백업 및 롤백에 대한 작업이 복제본 세트 인스턴스와 동일합니다. 현재 인스턴스 수준의 백업과 롤백을 지원합니다.
- **백업**
[콘솔](https://console.cloud.tencent.com/mongodb)의 인스턴스 세부 사항 페이지에서 [수동 백업]을 클릭하여 비고 정보를 입력한 후, [제출]을 클릭하고 인스턴스를 백업합니다.
- **롤백**
인스턴스의 oplog 공간은 고정 집합(Capped Collection)입니다. 집합 공간을 다 사용한 후, 다시 삽입한 요소는 처음의 헤더 원소를 덮어쓰게 됩니다. 덮어쓰기된 oplog 공간에서 발생하는 백업 및 복구 오류를 방지하려면 비즈니스 세부 정보에 따라 적당한 oplog 공간을 설정하십시오. 비즈니스에 쓰기, 업데이트 및 삭제 작업이 빈번하게 수행되는 경우, 두 개의 백업 시점을 겹쳐쓰지 않도록 하루에 여러 개의 백업을 설정할 수 있습니다. 두 백업 시점 사이의 oplog 공간을 덮어쓰면 데이터 복구 시간이 보장되지 않을 수 있습니다.

