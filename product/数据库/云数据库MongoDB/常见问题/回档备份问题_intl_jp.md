
### MongoDB毎日の自動バックアップと手動バックアップはどのように操作しますか？
TencentDB for MongoDBは2つのバックアップ方法をサポートしています。1つは毎日の自動バックアップ、もう1つは手動バックアップです。バックアップデータはデフォルトで7日間保持されます。

- **自動バックアップ**
インスタンスは1日に1回自動バックアップを提供します。これは、Tencent Cloud [MongoDBコンソール](https://console.cloud.tencent.com/mongodb)インスタンス詳細ページの【ロールバックとバックアップ】で確認できます。
- **手動バックアップ**
インスタンス詳細ページの【ロールバックとバックアップ】で、右上の【手動バックアップ】をクリックし、ポップアップにバックアップのコメントを入力して提出した後、手動バックアップが完了できます。

### バックアップファイルのダウンロードをサポートしていますか？
現在はまだサポートしません。

### ロールバックした後、置き換え操作を実行すると、再びロールバックができますか？
いいえ。置き換え後、元のバックアップファイルは置き換えられたインスタンスに適用できなくなり、再びロールバックができません。ユーザーが置き換え操作を選択する前に必ず確認してください。

### MongoDBロールバックの時間は何に依存しますか？
ロールバックは最新の完全バックアップのイメージ+oplogに基づいており、ロールバックの時間はoplogの再生量によって異なります。
完全バックアップの時点がロールバックの時間と十分に長い場合、oplogを再生するのに長い時間がかかります。

### MongoDBがロールバックされた後、正式化転換操作と置き換え操作の違いは何ですか？
正式化転換とはロールバック後の一時的なインスタンスを新しいインスタンスに転換して実行することです。このインスタンスは、元のインスタンスとは対応していません。デフォルトでは、一時的なインスタンスに対して2日の有効期間が設定されますので、時間内に更新してください。
置き換えとは、一時的なインスタンスデータで現在のインスタンスのデータを上書きすることです。置き換え後、インスタンスのバックアップファイルは削除され、再び置き換え前にロールバックできません。慎重に操作してください。

### MongoDBがロールバックされた後、置き換え操作が実行されると、バックアップファイルは削除されますか？
置き換え後、元のバックアップファイルは置き換えられたインスタンスには適用されなくなるため、ロールバックプロセスによってバックアップファイルが削除されます。
 
### MongoDBはレプリカセットインスタンスのバックアップロールバックをどのように完成させますか？
シャードクラスタインスタンスは、現在インスタンスレベルのバックアップとロールバックのみをサポートしています。

- **バックアップ**
[コンソール](https://console.cloud.tencent.com/mongodb)インスタンスの詳細ページで、【手動バックアップ】をクリックしてコメント情報を入力し、【提出】をクリックしてインスタンスのバックアップを実行します。
- **ロールバック**
ロールバック操作中に、ロールバックの日付を入力する必要があります。現在は5日以内の任意時間のロールバックをサポートしていますが、前提として、2つのバックアップ（正常に完了し、且つoplogが書き尽くされていない状態）の間の時間帯だけを選択してロールバックできます。満足するバックアップがない場合は、[手動バックアップ](https://cloud.tencent.com/document/product/240/7108)を1回実行してください。

### MongoDBはシャードクラスタインスタンスのバックアップとロールバックをどのように完成させますか？
シャードクラスタインスタンスのバックアップとロールバックは、レプリカセットインスタンスのバックアップとロールバック操作と同じです。現在は、インスタンスレベルのバックアップとロールバックだけをサポートしています。

- **バックアップ**
[コンソール](https://console.cloud.tencent.com/mongodb)インスタンスの詳細ページで、【手動バックアップ】をクリックしてコメント情報を入力し、【提出】をクリックしてインスタンスのバックアップを実行します。
- **ロールバック**
インスタンスのoplogスペースはキャップコレクション（Capped Collection）で、コレクションスペースが使い果たされると、挿入された要素は最初のヘッダーの要素を上書きします。oplogスペースの上書きによるバックアップと復旧の失敗を防ぐために、業務の詳細に基づいてoplogスペースのサイズを適切に設定してください。ビジネスの書き込み、削除、および更新操作が頻繁に行われる場合は、2つのバックアップ時点間のoplogが上書きされないように、1日に複数回バックアップを設定できます。2つのバックアップ時点間のoplogスペースは上書きされ、データ復旧の時点が保証されない可能性があります。

