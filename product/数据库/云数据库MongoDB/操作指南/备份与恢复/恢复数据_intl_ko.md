TencentDB for MongoDB 복구 절차는 다음과 같습니다.
**1단계:** 백업 복구 리스트에 들어가 백업 파일의 롤백 작업을 클릭하여 롤백 페이지에 들어갑니다. 이 페이지에서 롤백 시점 및 롤백 유형을 선택할 수 있습니다. 롤백 유형은 전체 인스턴스 롤백과 데이터베이스 테이블 롤백이 있습니다. 자세한 작업은 다음과 같습니다.
1. [인스턴스 롤백] 버튼 클릭하기:
![](https://main.qcloudimg.com/raw/f68d404c4b720bd04356485dae1bcd5a.png)
2. 롤백 시간 선택:
![](https://main.qcloudimg.com/raw/e8c3e96de22e7123cf5b79b8e5d87d9e.png)
3. 롤백 유형 선택:
![](https://main.qcloudimg.com/raw/72776d49399432f30726af3c93df069d.png)

**2단계:** 사용자가 [전체 인스턴스 롤백]을 선택하면 시스템은 롤백 데이터를 저장하기 위해 임시 인스턴스를 무료로 생성합니다. 임시 인스턴스의 사용자 이름과 비밀번호는 원본 인스턴스와 같습니다. 원본 인스턴스를 유지하며 비즈니스에 아무런 영향도 끼치지 않습니다.
**3단계:** 사용자가 [데이터베이스 테이블 롤백]을 선택하면 시스템은 사용자가 선택한 데이터베이스 테이블, 롤백 후 데이터베이스 테이블 이름 및 롤백 시간에 따라 원본 인스턴스에 대해 롤백합니다. 롤백한 후, 사용자는 데이터를 확인해야 합니다.
**4단계:** 전체 인스턴스 롤백은 롤백 완료 후 48시간 내에 사용자가 임시 인스턴스를 접근하여 롤백 데이터를 확인해야 합니다.
롤백 작업으로 생성된 임시 인스턴스에 대해 사용자는 다음 모든 작업을 선택하여 실행할 수 있습니다.
1.  "전환": 임시 인스턴스를 원본 인스턴스와 독립적인 정식 인스턴스로 전환하여 비즈니스에 사용합니다.
2. "교체": 임시 인스턴스로 원본 인스턴스를 교체합니다(원본 인스턴스 사설망 IP를 임시 인스턴스에 바인딩).
48시간이 지나도 처리하지 않을 경우, 시스템은 임시 인스턴스를 폐기할 것입니다.
![](https://mc.qcloudimg.com/static/img/4729ddc8384362dfb9a601343e928807/huifu2.png)


>!
1. 인스턴스의 oplog 공간은 고정 집합(Capped Collection)입니다. 집합 공간을 다 사용한 후, 다시 삽입한 요소는 처음의 헤더 원소를 덮어쓰게 됩니다. 덮어쓰기된 oplog 공간에서 발생하는 백업 및 복구 오류를 방지하려면 비즈니스 세부 정보에 따라 적당한 oplog 공간을 설정하십시오.
>2. 비즈니스에 쓰기, 업데이트 및 삭제 작업이 빈번하게 수행되는 경우, 두 개의 백업 시점을 겹쳐쓰지 않도록 하루에 여러 개의 백업을 설정할 수 있습니다.
>3. 두 백업 시점 사이의 oplog 공간을 덮어쓰면 데이터 복구 시간이 보장되지 않을 수 있습니다.
