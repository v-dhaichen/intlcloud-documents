TencentDB for MongoDBの復旧手順は次のとおりです。
**ステップ1：**バックアップ復旧リストに移動して、あるバックアップファイルのロールバック操作をクリックして、ロールバックページに移動して、ロールバックの時点とロールバックの種類を選択できます。ロールバックタイプには、インスタンス全体のロールバックとデータベーステーブルのロールバックが含まれます。具体的な操作は以下の通りです。
1.【ロールバックインスタンス】ボタンをクリックします。
![](https://main.qcloudimg.com/raw/f68d404c4b720bd04356485dae1bcd5a.png)
2.ロールバック時間を選択します。
![](https://main.qcloudimg.com/raw/e8c3e96de22e7123cf5b79b8e5d87d9e.png)
3.ロールバックのタイプを選択します。
![](https://main.qcloudimg.com/raw/72776d49399432f30726af3c93df069d.png)

**ステップ2：**ユーザーが【インスタンス全体のロールバック】を選択すると、システムはロールバックデータを保存するための一時的なインスタンスを無料で作成し、一時的なインスタンスのユーザー名とパスワードは元のインスタンスと同じです。元のインスタンスは同じままで、ビジネスには影響を与えません。
**ステップ3：**ユーザーが【データベーステーブルのロールバック】を選択すると、システムは、ユーザーが選択したデータベーステーブル、ロールバック後のデータベーステーブル名、およびロールバック時間に従って、元のインスタンスでロールバックします。ロールバックが完成したら、データを確認する必要があります。
**ステップ4：**インスタンス全体のロールバックは、ロールバック完了後の48時間以内にユーザーは一時的なインスタンスにアクセスしてロールバックのデータを確認する必要があります。
ロールバックによって生成された一時的なインスタンスについて、ユーザーは次のいずれかの操作を実行することを選択できます。
1.「正式に変換」：一時的なインスタンスをビジネス用の元のインスタンスとは独立した正式なインスタンスに変換します。
2.「置き換え」：一時的なインスタンスを用いて元のインスタンスを置換します（元のインスタンスのプライベートネットワークIPは一時的なインスタンスにバインディングされます）。 
48時間以上処理されないと、システムは一時的なインスタンスを終了します。
![](https://mc.qcloudimg.com/static/img/4729ddc8384362dfb9a601343e928807/huifu2.png)


>!
1.インスタンスのoplogスペースはキャップコレクション（Capped Collection）で、コレクションスペースが使い果たされると、挿入された要素は最初のヘッダーの要素を上書きします。oplogスペースの上書きによるバックアップと復旧の失敗を防ぐために、ビジネスの詳細に基づいてoplogスペースのサイズを適切に設定します。
> 2.ビジネスの書き込み、削除、およびアップデート操作が頻繁に行われる場合は、2つのバックアップ時点間のoplogが上書きされないように、1日に複数回のバックアップを設定できます。
> 3.2つのバックアップ時点間のoplogスペースが上書きされると、データ復旧の時点が保証されない可能性があります。

