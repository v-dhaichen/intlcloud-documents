## 操作シナリオ
セキュリティグループはステータスベースのパケットフィルタリング機能を有する仮想ファイアウォールであり、単一または複数台クラウドデータベースのネットワークアクセス制御に使用され、Tencent Cloudから提供される重要なネットワークセキュリティ分離方法です。セキュリティグループは論理的なグループであり、あなたが同一地域内で同じネットワークセキュリティ分離需要を持つクラウドデータベースインスタンスを同一セキュリティグループに追加できます。クラウドデータベースとCVM等がセキュリティグループリストを共有し、セキュリティグループ内には規則に基づいてマッチングされます。具体的な規則と制限についてセキュリティグループの詳細説明を参照してください。

>!
> 1. クラウドデータベースセキュリティグループは現時点で**VPCのプライベートネットワークアクセスのネットワーク制御をサポートしますが、基本ネットワークへのネットワーク制御をサポートしません**。
> 2. **クラウドデータベースには自発的なアウトバウンドトラフィックがないため、アウトバウンド規則はクラウドデータベースに無効です**。
> 3. TencentDB for MongoDBセキュリティグループはマスターインスタンス、読み取り専用インスタンス、ディザスタリカバリインスタンスをサポートします。
> 4. セキュリティグループのデフォルトテンプレートについて以下の注意点があります。
>  - Linuxのポート22の開放：SSHログイン用TCPポート22のみをパブリックネットワークに開放し、プライベートネットワークのすべてのポートを開放します。**このテンプレートはクラウドデータベースに無効です**。
>  - Windowsのポート3389の開放：MSTSCログイン用TCPポート3389のみをパブリックネットワークに開放し、プライベートネットワークのすべてのポートを開放します。**このテンプレートはクラウドデータベースに無効です**。
>  - すべてのポートの開放：すべてのIPでのクラウドデータベースへのアクセスを可能にします。セキュリティ上のリスクがあります。
> 5. セキュリティグループ機能は現在ホワイトリスト制御に基づき、必要に応じて、[チケット提出](https://console.cloud.tencent.com/workorder/category)を通じて申請してください。

## 操作ステップ

### セキュリティグループの作成

1.[Tencent Cloudコンソール](https://console.cloud.tencent.com/)にログインし、【クラウド製品】>【CVM】を選択すると、CVM管理ページに入ります。  
2.左側のナビゲーションバーで【セキュリティグループ】をクリックすると、セキュリティグループ管理ページに入ります。
   ![](https://main.qcloudimg.com/raw/9c154ef45b104ffebef99a3de249b50c.png)
3.【新規作成】をクリックし、【テンプレート】作成または【カスタム】作成を選択し、セキュリティグループの【名称】（例えば：my-security-group）を入力し、【所属プロジェクト】を選択し、【備考】（非必須）を入力し、確認後【OK】をクリックします。
![](https://main.qcloudimg.com/raw/cc9a780ddd091f68c5476ee8463e1294.png)

### TencentDB for MongoDBにセキュリティグループを構成する
[セキュリティグループ](https://cloud.tencent.com/doc/product/213/500)はTencent Cloudより提供されるインスタンスレベルのファイアウォールです。クラウドデータベースのインバウンド/アウトバウンドトラフィック制御を行います。あなたがインスタンスを購入する際にセキュリティグループをバインディングすることも、インスタンスを購入した後にコンソールでセキュリティグループをバインディングすることもできます。

> ! 現在TencentDB for MongoDBセキュリティグループは**VPCクラウドデータベース**の構成のみをサポートします。

1.[MongoDBコンソール](https://console.cloud.tencent.com/mongodb)にログインし、インスタンスリストからセキュリティグループを構成する必要があるインスタンスを選択し、【操作】列で、【管理】>【セキュリティグループ】を選択します。
![](https://main.qcloudimg.com/raw/22337a8d71bb79228790c3253d4fd3e2.png)
2.バインディングする必要があるセキュリティグループを選択し、【確認】をクリックすると、セキュリティグループのTencentDB for MongoDBへのバインディング操作を完了します。 
![](https://main.qcloudimg.com/raw/b63568e07e679628d17d61b75fb453f5.png)

### セキュリティグループの削除
1.[セキュリティグループページ](https://console.cloud.tencent.com/cvm/securitygroup)にログインし、セキュリティグループリストの【操作】列で、【その他】>【削除】を選択します。
![](https://main.qcloudimg.com/raw/794d76f9f7969fe66f250b63e7a99415.png)
2.表示されたセキュリティグループ削除ページで、【OK】をクリックします。現在のセキュリティグループに関連するCVMが存在した場合、削除前にセキュリティグループを解除する必要があります。

### セキュリティグループのクローン
1.[セキュリティグループページ](https://console.cloud.tencent.com/cvm/securitygroup)にログインし、セキュリティグループリストの【操作】列で、【その他】>【クローン】を選択します。
   ![](https://main.qcloudimg.com/raw/28810c1f2b863caac6d4598d3b4c5c07.png)
2.表示されたセキュリティグループクローンページで、対象地域、対象プロジェクトを選択した後、【OK】をクリックします。新しいセキュリティグループがCVMに関連付ける必要があれば、セキュリティグループ内のCVMをもう一度管理してください。

### セキュリティグループに規則の追加
1.[セキュリティグループページ](https://console.cloud.tencent.com/cvm/securitygroup)にログインし、アップデートする必要があるセキュリティグループを選択し、セキュリティグループIDををクリックして詳細ページに入ります。詳細ページにこのセキュリティグループの詳細情報および、使用可能なインバウンド規則とアウトバウンド規則を表示します。       
2.インバウンド/アウトバウンド規則タブで【規則追加】をクリックします。
  ![](https://main.qcloudimg.com/raw/c2c4533dc6ff96e4f2af2fb8ee0fea30.png)
3.タブからインバウンド/アウトバウンド規則のオプションを選択し、次は必要な情報を入力します。例えば、ソース/ターゲットを10.0.0.0/0に、プロトコルポートをTCP：3306に指定し、ポリシーを有効に設定し、【完了】をクリックし、【1行追加】をクリックすると複数の規則を同時に構成できます。
  ![](https://main.qcloudimg.com/raw/2f48931b61d45ab8275e12cf0cf70945.png)

### セキュリティグループ規則のインポートとエクスポート
1.[セキュリティグループページ](https://console.cloud.tencent.com/cvm/securitygroup)にログインし、アップデートする必要があるセキュリティグループを選択し、セキュリティグループIDをクリックすると詳細ページに入ります。  
2.インバウンド/アウトバウンド規則タブで【規則のインポート】をクリックします。
![](https://main.qcloudimg.com/raw/ab01ffb53084acf3e88219df7aca7b25.png)
3.既に規則が存在した場合、規則をインポートすると元の規則を上書きするので、まずは既存の規則をエクスポートすることをおすすめします。元の規則がブランクであれば、まずはテンプレートをエクスポートし、テンプレートファイルを編集した後、次は【ファイル選択】をクリックしてあなたのテンプレートファイルを選択し、最後に【インポート開始】をクリックします。	
![](https://main.qcloudimg.com/raw/fda954cd9eaa9058a1fea6ca52d12f50.png)

