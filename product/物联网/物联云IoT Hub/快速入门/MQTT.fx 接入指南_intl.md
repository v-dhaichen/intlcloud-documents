[//]: # (chinagitpath:XXXXX)

MQTT.fx is a mainstream MQTT desktop client. Compatible with Windows, Mac and Linux, it can quickly verify whether it is possible to connect to IoT Hub and publish or subscribe to messages. Here we demonstrate how MQTT.fx interacts with the IoT Hub.

### Connecting to IoT Hub
1. Go to the [MQTT.fx download page](http://mqttfx.jensd.de/index.php/download). Download and install the appropriate version of MQTT.fx client. Here is an example of MQTT.fx 1.7.0 for Mac.
2. Launch the MQTT.fx client, click the Settings button to open the settings page and click the "+" button to create a new profile.
![](https://main.qcloudimg.com/raw/bd83f2f9976cab19c9117a5fe6d63a07.png)
3. Enter the Connection Profile and General information.
![](https://main.qcloudimg.com/raw/86649d2431efe8794fe31885b33775af.png)
<table>
<tr>
  <th>Parameter</th>
  <th>Description</th>
</tr>
<tr>
  <td>Profile Name</td>
  <td>Name of the profile</td>
</tr>
<tr>
  <td>Broker Address</td>
  <td>MQTT server connection address; for Guangzhou, enter: iotcloud-mqtt.gz.tencentdevices.com</td>
</tr>
<tr>
  <td>Broker Port</td>
  <td>MQTT server connection port; enter: 8883</td>
</tr>
<tr>
  <td>Client ID</td>
  <td>MQTT protocol field; enter in according to IoT Hub's requirement: product ID + device name, such as "QICJYEM1T4Demo1" where QICJYEM1T4 is the product ID and Demo1 is the device name</td>
</tr>
<tr>
  <td>Connection Timeout</td>
  <td>Connection timeout in seconds</td>
</tr>
<tr>
  <td>Keep Alive Interval</td>
  <td>Heartbeat interval in seconds</td>
</tr>
<tr>
  <td>Auto Reconnect</td>
  <td>Automatic reconnection after network disconnection</td>
</tr>
</table>
4. Enter the User Credentials information.
![](https://main.qcloudimg.com/raw/d8c9e225e48f2ae7ef23df34c8b1e07b.png)
<table>
<tr>
	<th>Parameter</th>
	<th>Description</th>
</tr>
<tr>
	<td>User Name</td>
	<td>MQTT protocol field; enter in according to IoT Hub's requirement: product ID + device name + sdkappid + connid, such as "QICJYEM1T4Demo1;12010126;12345"; it is sufficient to replace only the product ID and device name in the example, and as the last two parameters are automatically generated by the access SDK of IoT Hub, the fixed test value are entered here</td>
</tr>
<tr>
	<td>Password</td>
	<td>Password is required. As MQTT.fx sets the system password flag default to true by, you need to enter a random non-empty string as the password. Otherwise, you cannot connect to IoT Hub's backend. </td>
</tr>
</table>
5. Select "Enable SSL/TLS", check "Self signed certificates", and upload related files.
IoT Hub uses secure encrypted link, so you also need to set up SSL/TLS information. MQTT.fx does not support symmetric encryption PSK. Here we only demonstrate settings for asymmetric encrypted connection.
![](https://main.qcloudimg.com/raw/e68e018aed4f9088d4be0180ec9b3cf3.png)
<table>
<tr>
	<th>File</th>
	<th>Description</th>
</tr>
<tr>
	<td>ca.crt</td>
	<td>Root certificate; click the <a href="https://main.qcloudimg.com/raw/9aa774ea8c09f98811df361c741df38c/ca.crt">ca.crt</a> link to download</td>
</tr>
<tr>
	<td>Client Certificate File</td>
	<td>Client certificate file, i.e., the device certificate which can be downloaded if the device is created in a certificate-authenticated product. For details, see <a href="https://cloud.tencent.com/document/product/634/14442">Device Access Preparations</a></td>
</tr>
<tr>
	<td>Client Key File</td>
	<td>Client key file, i.e., the device key which can be downloaded if the device is created in a certificate-authenticated product. For details, see <a href="https://cloud.tencent.com/document/product/634/14442">Device Access Preparations</a></td>
</tr>
<tr>
	<td>PEM Formatted</td>
	<td>The IoT Hub root certificate, device certificate and device key are all generated by OpenSSL, and they are all in PEM format. MQTT.fx is a Java client, so it does not recognize PEM certificates. You need to select to have client automatically convert certificates into Java-recognized JKS format</td>
</tr>
</table>
6. After completing the steps above, click **Apply** and **OK** to save. Then, select the file name just created in the profile box and click the **Connect** button. If the round icon in the upper right corner is green, the connection to IoT Hub is successful and publishing and subscribing operations can be performed.
![](https://main.qcloudimg.com/raw/1058d3742bc592a02c6e2bf73e803023.png)

### Publishing a Message
Select the Publish tab in the client, enter the subject name, select the QoS level and click the **Publish** button to publish the message. The result of the publishing can be queried via [Cloud Log](https://cloud.tencent.com/document/product/634/14445).
![](https://main.qcloudimg.com/raw/1c8d6ce44ec57b66dadbdfc63f64aa7d.png)

### Subscribing to a Topic
Select the Subscribe tab in the client, enter the subject name, select the QoS level and click the **Subscribe** button to subscribe to the topic. The result of subscribing can be queried via [Cloud Log](https://cloud.tencent.com/document/product/634/14445).
![](https://main.qcloudimg.com/raw/495a058f78a548a182a61fbeabc6ea5d.png)

